Object RhunVahRus
	; *** ART Parameters ***
	ButtonImage		= uivahrus
	SelectPortrait	= upvahrus
	
	DescriptionStrategic = CONTROLBAR:LW_ToolTip_VahRus
	
	Draw = W3DScriptedModelDraw ModuleTag_DRAW

		OkToChangeModelColor	= Yes
		StaticModelLODMode		= Yes

		DefaultModelConditionState
			Model							= muvahrus_skn
			Skeleton            = RUElfWar_SKL
			WeaponLaunchBone				= PRIMARY ARROW
		End
		
		ModelConditionState = MOUNTED
			Model	=	RUHHs_Theo_SKN
			Skeleton = RUHHs_Theo_SKL
			WeaponLaunchBone    = PRIMARY PASSENGERBONE
		End
		AnimationState			    = MOUNTED DEBUG
			Animation
				AnimationName       = RUHHs_Theo_IDLA      
				AnimationMode       = ONCE
			End
			ParticleSysBone = BAT_HHEAD glowHorseGold FollowBone:Yes			
			ParticleSysBone = B_HHIPL glowHorseRearGold FollowBone:Yes
			ParticleSysBone = BAT_SPINE2 glowGold FollowBone:Yes			
		End
		AnimationState				=	MOUNTED FREEFALL 
			Animation				=	freefall
				AnimationName		=	RUHHs_Theo_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	MOUNTED STUNNED_FLAILING 
			Animation				=	JustDie
				AnimationName		=	RUHHs_Theo_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	MOUNTED PASSENGER
			Animation				=	grabbed
				AnimationName		=	RUHHs_Theo_GBDA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	MOUNTED DYING SPLATTED
			Animation				=	Land
				AnimationName		=	RUHHs_Theo_LNDA
				AnimationMode		=	ONCE
				AnimationBlendTime  =   2
			End
			FXEvent	= Frame:2 Name:FX_SplatDust
		End
		AnimationState				=	MOUNTED DYING
			Animation				=	JustDie
				AnimationName		=	RUHHs_Theo_DIEA
				AnimationMode		=	ONCE
			End
		End
		AnimationState				=	MOUNTED STUNNED_STANDING_UP
			Animation				=	StandUp
				AnimationName		=	RUHHs_Theo_GTPA
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 3.5 3.5
			End
		End
		AnimationState				=	MOUNTED STUNNED
			Animation				=	Land
				AnimationName		=	RUHHs_Theo_LNDA
				AnimationMode		=	ONCE
			End
		End
		AnimationState						= PARALYZED MOUNTED
			Animation
				AnimationName				= RUHHs_Theo_IDLA
				AnimationMode				= LOOP
			End
		End
		AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = RUHHs_Theo_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End
		AnimationState				=	MOUNTED MOVING USING_SPECIAL_ABILITY
			Animation				=	RousingSpeech
				AnimationName		=	RUHHs_Theo_WLKB
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOUNTED TURN_LEFT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_TNL1
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.2 1.2
				AnimationBlendTime	=	20
			End
		End
		AnimationState				=	MOUNTED TURN_RIGHT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_TNR1
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.2 1.2
				AnimationBlendTime	=	20
			End
		End
		AnimationState				=	MOUNTED MOVING TURN_LEFT 
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_TRNL
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOUNTED MOVING TURN_RIGHT 
			Animation				=	TurnRight
				AnimationName		=	RUHHs_Theo_TRNR
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOUNTED MOVING ACCELERATE
			Animation				=	Accelerate
				AnimationName		=	RUHHs_Theo_ACCL
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOUNTED MOVING DECELERATE
			Animation				=	Decelerate
				AnimationName		=	RUHHs_Theo_DECL
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 0.6 0.6
			End
		End
		AnimationState				=	MOUNTED MOVING WALKING
			Animation				=	Walk
				AnimationName		=	RUHHs_Theo_WLKA
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOUNTED MOVING BACKING_UP
			Animation				=	BackingUp
				AnimationName		=	RUHHs_Theo_BAKA
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOUNTED MOVING
			Animation				=	RunA
				AnimationName		=	RUHHs_Theo_RUNA
				AnimationMode		=	LOOP
			End
		End
		AnimationState						=	PACKING_TYPE_2 MOUNTED
			StateName						=	SPELL
			Animation						=	SPCC
				AnimationName				=	RUHHs_Theo_SPCA
				AnimationMode				=	ONCE
				AnimationBlendTime	=	20
			End
		End
		AnimationState						=	PACKING_TYPE_1 MOUNTED
			StateName						=	SPELL
			Animation						=	SPCC
				AnimationName				=	RUHHs_Theo_IDLC
				AnimationSpeedFactorRange	=	0.842 0.842
				AnimationMode				=	ONCE
			End		
		End
		AnimationState				=	MOUNTED FIRING_OR_PREATTACK_A
			Animation				=	AttackA
				AnimationName		=	RUHHs_Theo_ATKA
				AnimationMode		=	ONCE
				UseWeaponTiming		=	Yes
			End
			Animation				=	AttackB
				AnimationName		=	RUHHs_Theo_ATKB
				AnimationMode		=	ONCE
				UseWeaponTiming		=	Yes
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				=	MOUNTED ATTACKING
			Animation				=	AttackA
				AnimationName		=	RUHHs_Theo_ATKA
				AnimationMode		=	MANUAL
			End
		End
		AnimationState				= MOUNTED LEVELED
			StateName				= Idle
			Animation				= LevelUp
				AnimationName		= RUHHs_Theo_IDLC
				AnimationMode		= ONCE
				AnimationSpeedFactorRange	=	0.666 0.666
			End
		End
		AnimationState				=	RAISING_FLAG MOUNTED
				Animation           =	CHRA
					AnimationName   =	RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End
		End
		AnimationState				=	EMOTION_TAUNTING MOUNTED
				Animation           =	CHRA
					AnimationName   =	RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End
		End
		AnimationState				= MOUNTED EMOTION_CELEBRATING
			Animation				= LevelUp
				AnimationName		= RUHHs_Theo_IDLC
				AnimationMode		= LOOP
			End
		End
		AnimationState				=	MOUNTED SELECTED
			SimilarRestart			=   Yes			
			StateName				=	AtAttentionIdle
			Animation				=	ATNB
				AnimationName		=	RUHHs_Theo_IDLH
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
			EndScript
		End
		TransitionState				=	TRANS_MountedSelect
			Animation				=	ATNA
				AnimationName		=	RUHHs_Theo_ATNA
				AnimationMode		=	ONCE
			End
		End
		AnimationState			= MOUNTED
			StateName = Idle
			Animation	=	IdleA
				AnimationName		=	RUHHs_Theo_IDLA
				AnimationPriority	=	20
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Animation				=	IdleB
				AnimationName		=	RUHHs_Theo_IDLB
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Animation				=	IdleC
				AnimationName		=	RUHHs_Theo_IDLC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

;;================== ANIMATIONS =================================================================

		; ------ Flying ------- ;
		
		AnimationState					= PASSENGER
			StateName				= STATE_Grabbed
			Animation           		= Sword
				AnimationName       	= RUElfWar_FLLA
				AnimationMode       	= LOOP
			End
		End
		
		
		AnimationState					= FREEFALL
			StateName				= STATE_Falling
			Animation           		= Sword
				AnimationName       	= RUElfWar_FLYB
				AnimationMode       	= LOOP
			End
		End
		
		AnimationState					= FREEFALL
			StateName				= STATE_Falling
			Animation           		= Sword
				AnimationName       	= RUElfWar_FLYB
				AnimationMode       	= LOOP
			End
		End
		
		AnimationState        				= STUNNED_FLAILING
			StateName				= STATE_Fly
			Animation           		= Sword
				AnimationName       	= RUElfWar_FLYB
				AnimationMode       	= LOOP
			End
			Flags					= MAINTAIN_FRAME_ACROSS_STATES2
		End

		AnimationState        				= STUNNED_FLAILING
			StateName				= STATE_Fly
			Animation           		= Sword
				AnimationName       	= RUElfWar_FLYB
				AnimationMode       	= LOOP
			End
			Flags					= MAINTAIN_FRAME_ACROSS_STATES2
		End
		
		AnimationState					= DYING BURNINGDEATH
			Animation           		= Sword1
				AnimationName       	= RUElfWar_DIESv5
				AnimationMode       	= ONCE
			End
			Animation           		= Sword2
				AnimationName       	= RUElfWar_DIESV4
				AnimationMode       	= ONCE
			End
		End
		
		AnimationState					= BURNINGDEATH
			Animation			= Terror
				AnimationName		= RUElfWar_RUNN
				AnimationMode		= LOOP
			End
		End

		AnimationState					= DYING DEATH_1 SPLATTED
			StateName				= STATE_Dead
			Animation				= Sword
				AnimationName			= RUElfWar_LNDB
				AnimationMode			= ONCE
			End
		End
		
		
				; ------ Dying ------- ;

		AnimationState        			= DYING DEATH_1
			Animation           		= Sword1
				AnimationName       	= RUElfWar_DIESv5
				AnimationMode       	= ONCE
			End
			Animation           		= Sword2
				AnimationName       	= RUElfWar_DIESV4
				AnimationMode       	= ONCE
			End
			
		End
		
		AnimationState        			= DYING DEATH_2
			Animation				= Alert_1
				AnimationName			= RUElfWar_IDLST1
				AnimationMode			= LOOP
			End
		End
		
		AnimationState				= PARALYZED
			Animation				= Alert_1
				AnimationName			= RUElfWar_IDLST1
				AnimationMode			= LOOP
			End
		End


		AnimationState        			= STUNNED_STANDING_UP
			StateName			= STATE_GetUp
			Animation           		= Sword
				AnimationName       	= RUElfWar_GTPSX1
				AnimationMode       	= ONCE
			End
			Flags				= MAINTAIN_FRAME_ACROSS_STATES4
		End

		AnimationState        			= STUNNED
			StateName			= STATE_Land
			Animation           		= Sword
				AnimationName       	= RUElfWar_LNDB
				AnimationMode       	= ONCE
			End
		End

				
;;======== TERROR

		AnimationState					= MOVING EMOTION_TERROR
			StateName				= Moving_Sword
			Animation			= Terror
				AnimationName		= RUElfWar_RUNN
				AnimationMode		= LOOP
			End
		End



		; ------ Attacking ------- ;
		
		AnimationState        			= FIRING_OR_PREATTACK_A
			StateName					= Ready_Sword
			Animation           		= AttackWithSwordA
				AnimationName       	= RUElfWar_ATKSV2
				AnimationMode       	= ONCE
				UseWeaponTiming			= Yes
			End
			Animation           		= AttackWithSwordB
				AnimationName       	= RUElfWar_ATKS
				AnimationMode       	= ONCE
				UseWeaponTiming		= Yes
			End
			Animation           		= AttackWithSwordD
				AnimationName       	= RUElfWar_ATKSV4
				AnimationMode       	= ONCE
				UseWeaponTiming		= Yes
			End
		End
		
		AnimationState					= SPECIAL_WEAPON_ONE
			StateName					= STATE_Emotion_Sword
			Animation					= Sword
				AnimationName			= RUElfWar_PNTB
				AnimationMode			= ONCE
			End
			FXEvent	= Frame:10 Name: FX_VahRusCurseOftheBlackDragonStart
			FXEvent	= Frame:15	Name: FX_CurseOfTheBlackDragonAura
			Flags						= MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState        			= SPECIAL_WEAPON_TWO
			StateName					= Ready_Sword
			Animation           		= AttackWithSwordA
				AnimationName       	= RUElfWar_ATKSV2
				AnimationMode       	= ONCE
			End
			ParticleSysBone     = B_SWORDBONE VahRusMightyBlowGlowFX FollowBone:yes
			ParticleSysBone     = B_SWORDBONE VahRusMightyBlowSparksFX FollowBone:yes
			FXEvent	= Frame:29 Name: FX_VahRusMightyBlowImpact
		End

		
;;------------------------- BACKUP --------------------------------------------------------------------


		AnimationState					= MOVING BACKING_UP
			StateName				= STATE_BackingUp
			Animation				= Sword
				AnimationName			= RUElfWar_BAKS
				AnimationMode			= LOOP
			End
			Flags					= MAINTAIN_FRAME_ACROSS_STATES4
		End

	
		; ------------ Moving ------------- ;

		AnimationState        				= MOVING ATTACKING
			StateName				= Moving_Sword
			SimilarRestart				= Yes
			Animation           		= run_s
				AnimationName       	= RUElfWar_RUNS
				AnimationMode       	= LOOP
			End
		End
				
		AnimationState        				= MOVING ALTERNATE_FORMATION
			StateName				= Moving_Sword
			SimilarRestart				= Yes
			Animation           		= run_s
				AnimationName       	= RUElfWar_RUNS
				AnimationMode       	= LOOP
			End
		End				
		
		AnimationState        				= MOVING
			StateName				= Moving_Sword
			SimilarRestart				= Yes
			Animation           		= run_s
				AnimationName       	= RUElfWar_RUNS
				AnimationMode       	= LOOP
			End
		End
		
		AnimationState					= EMOTION_ALERT
			StateName					= Ready_Sword
			Animation				= Alert_1
				AnimationName			= RUElfWar_IDLST1
				AnimationMode			= LOOP
			End
			Flags						= RANDOMSTART
		End		
		
		AnimationState					= ALTERNATE_FORMATION
			StateName					= Ready_Sword
			Animation				= Alert_1
				AnimationName			= RUElfWar_IDLST1
				AnimationMode			= LOOP
			End
			Flags						= RANDOMSTART
		End

		AnimationState					= ENGAGED
			StateName					= Ready_Sword
			Animation				= Alert_1
				AnimationName			= RUElfWar_IDLST1
				AnimationMode			= LOOP
			End
		End

		AnimationState					= ATTACKING
			StateName					= Ready_Sword
			Animation				= Alert_1
				AnimationName			= RUElfWar_IDLST1
				AnimationMode			= LOOP
			End
		End
		
	
		
;;------------ EMOTIONS ------------------------------------------------------------------
		
;;====== CELEBRATING		

		AnimationState					= EMOTION_CELEBRATING
			StateName					= STATE_Emotion_Sword
			Animation					= Sword
				AnimationName			= RUElfWar_CHRST2
				AnimationMode			= ONCE
			End
			Flags						= MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
		End


;;====== TAUNTING

		AnimationState					= EMOTION_TAUNTING
			StateName					= STATE_Emotion_Sword
			Animation					= Sword
				AnimationName			= RUElfWar_TNTSV1
				AnimationMode			= ONCE
			End
			Animation					= Sword
				AnimationName			= RUElfWar_CHRST2
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE ;MAINTAIN_FRAME_ACROSS_STATES
		End


;;====== POINTING

		AnimationState					= EMOTION_POINTING
			StateName					= STATE_Emotion_Sword
			Animation					= Sword
				AnimationName			= RUElfWar_PNTB
				AnimationMode			= ONCE
			End
			Flags						= MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState					= RAISING_FLAG
			StateName					= STATE_Emotion_Sword
			Animation					= Sword
				AnimationName			= RUElfWar_CHRST2
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End
		; ------ Selected ------ ;

		AnimationState				=	SELECTED
			StateName				=	STATE_Selected
			Animation
				AnimationName		=	RUElfWar_ATNS
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then
					CurDrawableSetTransitionAnimState("TRANS_IdleToSelected")
				end
			EndScript
		End

		
		; --------- Hit Reactions ---------- ;
		
;		AnimationState						= HIT_REACTION HIT_LEVEL_1
;			StateName						= Bored_Sword
;			Animation						= Hit_Level_1_a
;				AnimationName				= RUElfWar_HITE
;				AnimationMode				= ONCE
;			End
;		End
		
		
		; ------- Bored -------- ;
		
		IdleAnimationState
			StateName					= STATE_Idle
			Animation           		= Idle_Sword1
				AnimationName       	= RUElfWar_IDLG
				AnimationMode       	= ONCE
			End
			Animation           		= Idle_Sword2
				AnimationName       	= RUElfWar_IDLCT1
				AnimationMode       	= ONCE
			End
			Animation           		= Idle_Sword3
				AnimationName       	= RUElfWar_IDLCT3
				AnimationMode       	= ONCE
			End
			Animation			= IdleNoFidget
				AnimationName		= RUElfWar_IDLF
				AnimationMode		= ONCE
				AnimationPriority	= 20
			End
			Animation			= IdleNoFidget2
				AnimationName		= RUElfWar_IDLF
				AnimationMode		= ONCE
				AnimationPriority	= 0
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then
					CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle")
				end
			EndScript
		End
		
		TransitionState = TRANS_IdleToSelected
			Animation
				AnimationName     = RUElfWar_ATNA
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.8 0.8
			End
		End
		TransitionState = TRANS_SelectedToIdle
			Flags = START_FRAME_LAST		
			Animation
				AnimationName	= RUElfWar_ATNA
				AnimationMode	= ONCE_BACKWARDS
				AnimationSpeedFactorRange = 0.8 0.8
			End
		End		
		
	End
	
	Draw = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model = None
	    End
	    IdleAnimationState
	    End
	    AnimationState = MOUNTED MOVING WADING
			ParticleSysBone = None FootstepSlash
	    End
	    AnimationState = MOUNTED MOVING ACCELERATE
			ParticleSysBone = None InfantryDustTrails
	    End
	    AnimationState = MOUNTED MOVING ACCELERATE
			ParticleSysBone = None InfantryDustTrails
	    End
	    AnimationState = MOUNTED MOVING
			ParticleSysBone = None InfantryDustTrails
	    End
	End	

    #include "..\..\..\includes\StunDrawModuleSmall.inc"
	
		; ***DESIGN parameters ***
	Side = Mordor
	EditorSorting = UNIT
	ThreatLevel = ELROND_THREAT
	ThingClass = CHARACTER_UNIT

	TransportSlotCount = TRANSPORTSLOTCOUNT_HERO
	WeaponSet
		Conditions = None
		Weapon = PRIMARY    VahRusSword
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions		= WEAPONSET_HERO_MODE
		Weapon			= PRIMARY    VahRusSwordChosenGreatKhan
	End
	ArmorSet
		Conditions      = None
		Armor           = ToughHeroArmor
		DamageFX        = NormalDamageFX
	End
	
	VisionRange = VISION_HERO_STANDARD
	ShroudClearingRange = SHROUD_CLEAR_HERO	
	
	MaxVisionBonusPercent = 300%
	VisionBonusTestRadius = 200
	VisionBonusPercentPerFoot = 1.0%
	MountedCrusherLevel = 1	
	BountyValue = 300 ;ELVEN_ELROND_BOUNTY_VALUE
	RecruitText 					= CONTROLBAR:VahRusRecruit
	ReviveText					= CONTROLBAR:VahRusRevive
	Hotkey		= CONTROLBAR:VahRusHotkey
	DisplayName = OBJECT:RhunVahRus
	CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	MountedCrushableLevel = 2
	CommandSet = VahRusCommandSet 
	CommandPoints = 0 ;HERO_COMMAND_POINTS_TIER_4 ;,; HERO_COMMAND_POINTS_TIER_5 ;HERO_COMMAND_POINTS_TIER_4 ;;,;; 50

	; *** AUTO RESOLVE DATA *** 
	AutoResolveUnitType = AutoResolveUnit_Hero
	AutoResolveCombatChain = AutoResolve_HeroCombatChain

	AutoResolveBody = Aotr_AutoResolve_LeaderLargeHeroBody
	
	AutoResolveArmor
		Armor = Aotr_AutoResolve_HeroLeaderArmor
	End

	AutoResolveWeapon
		Weapon = AutoResolve_LeaderHeroStrongWeapon
	End
	
	AutoResolveLeadership = AutoResolve_GothmogBonus


	; *** AUDIO Parameters ***;

			VoiceAttack 							= VahRusVoiceAttack
			VoiceAttackAir							= VahRusVoiceAttack
			VoiceAttackCharge 						= VahRusVoiceAttackCharge
			VoiceAttackMachine 						= VahRusVoiceAttackBuilding
			VoiceAttackStructure 					= VahRusVoiceAttackBuilding
			VoiceFear								= VahRusVoiceFear
			VoiceGuard								= VahRusVoiceMove
			VoiceMove 								= VahRusVoiceMove
			VoiceMoveToCamp 						= VahRusVoiceMoveCamp
			VoiceMoveWhileAttacking 				= VahRusVoiceDisengage
			VoicePriority							= 95
			VoiceRetreatToCastle 					= VahRusVoiceDisengage
			VoiceSelect 							= VahRusVoiceSelect
			VoiceSelectBattle  						= VahRusVoiceSelectBattle
		
			SoundImpact								= ImpactHorse
		
			UnitSpecificSounds
				VoiceEnterUnitElvenTransportShip	= VahRusVoiceMove
				VoiceEnterUnitMordorMumakil			= VahRusVoiceMove
				VoiceEnterUnitSlaughterHouse		= VahRusVoiceMove
				VoiceEnterUnitTransportShip			= VahRusVoiceMove
				VoiceGarrison						= VahRusVoiceMove
				VoiceInitiateCaptureBuilding		= VahRusVoiceMove
			End

	CrowdResponseKey = EvilMen1

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
;	EvaEventDieOwner			= ElrondDie		;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths

	; Tie into LargeGroupAudio system
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key	= Humanoid_Male Man Man_Male Easterling_Infantry			;Human
		;UnitWeight = 2
	End
	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior ;;,;; ;;;
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:ArrowDrawBow					Animation:RUElfWar_SKL.RUElfWar_ATKA1	Frames:6
		AnimationSound = Sound:ArrowDrawBow					Animation:RUElfWar_SKL.RUElfWar_ATKA2	Frames:18

		AnimationSound = Sound:SwordShingClean1ForHordes 		Animation:RUElfWar_SKL.RUElfWar_STHA 	Frames:24
		AnimationSound = Sound:SwordIntoScabbard1ForHordes		Animation:RUElfWar_SKL.RUElfWar_STHB 	Frames:9
		AnimationSound = Sound:WeaponSwitchBowForHordes		 	Animation:RUElfWar_SKL.RUElfWar_STHB 	Frames:15

		AnimationSound = Sound:SwordShingClean1ForHordes 		Animation:RUElfWar_SKL.RUElfWar_STHC 	Frames:20
		AnimationSound = Sound:SwordIntoScabbard1ForHordes		Animation:RUElfWar_SKL.RUElfWar_STHD 	Frames:5
		AnimationSound = Sound:WeaponSwitchBowForHordes 		Animation:RUElfWar_SKL.RUElfWar_STHD 	Frames:8

		AnimationSound = Sound:SwordShingClean1ForHordes 		Animation:RUElfWar_SKL.RUElfWar_RUNC 	Frames:14
		AnimationSound = Sound:SwordIntoScabbard1ForHordes 		Animation:RUElfWar_SKL.RUElfWar_RUNT 	Frames:4
		AnimationSound = Sound:WeaponSwitchBowForHordes 		Animation:RUElfWar_SKL.RUElfWar_RUNT 	Frames:16

		AnimationSound = Sound:BodyFallSoldier				Animation:RUElfWar_SKL.RUElfWar_LNDA	Frames:9
		AnimationSound = Sound:BodyFallSoldier				Animation:RUElfWar_SKL.RUElfWar_LNDB	Frames:1

		AnimationSound = Sound:BodyFallGenericNoArmor			Animation:RUElfWar_SKL.RUElfWar_DIEB 	Frames:82
		AnimationSound = Sound:BodyFallSoldier				Animation:RUElfWar_SKL.RUElfWar_DIEBV5 	Frames:25
		AnimationSound = Sound:BodyFallSoldier				Animation:RUElfWar_SKL.RUElfWar_DIESV4 	Frames:26
		AnimationSound = Sound:BodyFallGenericNoArmor			Animation:RUElfWar_SKL.RUElfWar_DIESV5	Frames:100		
	End
	
		; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY HERO HEAVY_MELEE_HITTER
	PathfindDiameter = 25 ; = 40.0
	CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_MEDIUM
	BuildCost = 3000  ;3500 ;ELROND_BUILDCOST				
	BuildTime = HERO_BUILDTIME_TIER_4 ;,; HERO_BUILDTIME_TIER_5 ;HERO_BUILDTIME_TIER_4 ;;,;; ELROND_BUILDTIME				
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
	
	;//DisplayMeleeDamage = ELROND_DAMAGE
	Body = RespawnBody ModuleTag_RespawnBody
		CheerRadius 				= EMOTION_CHEER_RADIUS
		MaxHealth         			= ELROND_HEALTH ; balance
		PermanentlyKilledByFilter	= NONE
   		DodgePercent      			= HERO_DODGE_PERCENT
	End
	Behavior = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim					= DYING
		DeathFX						= FX_VahRusDieToRespawn
		DeathAnimationTime			= 4000
		InitialSpawnFX				= FX_VahRusInitialSpawn
		RespawnAnim					= LEVELED
		RespawnFX					= FX_VahRusRespawn
		RespawnAnimationTime		= 2000
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP
		ButtonImage					= uivahrusres
		
		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
;;,;;		RespawnRules =	AutoSpawn:No	Cost:1875  Time:60000	Health:100%

		;RespawnRules =			AutoSpawn:No	Cost:1875		Time:HERO_RESPAWNTIME_TIER_4		Health:100%		;DEFAULT VALUES	;;,;; Version 2.1 Respawn Rules
;,;		RespawnRules =			AutoSpawn:No	Cost:2250		Time:HERO_RESPAWNTIME_TIER_5		Health:100%		;DEFAULT VALUES	;;,;; Version 3.0.0 Respawn Rules
        RespawnRules =			AutoSpawn:No	Cost:2400		Time:HERO_RESPAWNTIME_TIER_4		Health:100% ;Cost:1200
		RespawnEntry =	Level:2				Cost:2550		Time:HERO_RESPAWNTIME_TIER_4
		RespawnEntry =	Level:3				Cost:2700		Time:HERO_RESPAWNTIME_TIER_4
		RespawnEntry =	Level:4				Cost:2850		Time:HERO_RESPAWNTIME_TIER_4
		RespawnEntry =	Level:5				Cost:3000		Time:HERO_RESPAWNTIME_TIER_4
		RespawnEntry =	Level:6				Cost:3150		Time:HERO_RESPAWNTIME_TIER_4
		RespawnEntry =	Level:7				Cost:3300		Time:HERO_RESPAWNTIME_TIER_4
		RespawnEntry =	Level:8				Cost:3450		Time:HERO_RESPAWNTIME_TIER_4
		RespawnEntry =	Level:9				Cost:3600		Time:HERO_RESPAWNTIME_TIER_4
		RespawnEntry =	Level:10			Cost:3750		Time:HERO_RESPAWNTIME_TIER_4
	End
	
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End
	
	Behavior = AutoHealBehavior ModuleTag_ElrondHealing
		StartsActive = Yes
		HealingAmount = HERO_HEAL_AMOUNT
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
	
	#include "..\..\..\includes\CaptureBuilding.inc"
	
		Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		MoodAttackCheckRate        = 500
;		CanAttackWhileContained	   = Yes ;;.;; Removed
		AILuaEventsList			   = HeroScriptFunctions
	End

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	250		; max distance to taunted/pointed objet
 		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
 		
		AddEmotion			=	Doom_Base
		//	AddEmotion			=   BraceForBeingCrushed_Base
		//	AddEmotion			=	FearIdle_Base
		//	AddEmotion			=	FearBusy_Base
		AddEmotion			=	Point_Base
		AddEmotion			=	Taunt_Base
 		AddEmotion			=	CheerIdle_Base
		AddEmotion			=	CheerBusy_Base
		//	AddEmotion			=	HeroCheerIdle_Base
		//	AddEmotion			=	HeroCheerBusy_Base
		AddEmotion			=	Alert_Base
		AddEmotion			=	CheerForAboutToCrush_Base
 	End

	LocomotorSet
		Locomotor = HeroHumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_EVIL_HERO_SPEED
	End

	LocomotorSet
		Locomotor = HeroHorseLocomotor
		Condition = SET_MOUNTED
		Speed     = NORMAL_MOUNTED_MED_HORDE_SPEED
	End	
	
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult			= 1.0
		ShockStandingTime	= 3000
		ShockStunnedTimeLow	= 1000
		ShockStunnedTimeHigh= 1200
	End
	
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL 
		SinkDelay = 4300
		SinkRate = 3.0     ; in Dist/Sec
		DestructionDelay = 8000
		Sound = INITIAL	VahRusVoiceDie
        DeathFlags = DEATH_1
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 7 ; level 1 (light  damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer2 = 15 ; level 2 (medium damage)  hit reaction animations in frames (5 per sec)
		HitReactionLifeTimer3 = 10 ; level 3 (heavy  damage)  hit reaction animations in frames (5 per sec)

		HitReactionThreshold1 = 0.0   ; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 25.0  ; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 50.0  ; level 3 (heavy  damage) threshold trigger
	End
	
	;==============================
	;	Ran's Authority
	;==============================
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_DenethorLeadershipLvl1
		StartsActive	= No
		BonusName		= VahRusLeadershipLvl1
		TriggeredBy		= Upgrade_ObjectLevel1
		RefreshDelay	= 2000
		Range			= 200
		ObjectFilter	= AOTR_GENERIC_BUFF_RECIPIENT_OBJECT_FILTER
	End
    Behavior = ObjectCreationUpgrade ModuleTag_RemoveUpgrades1
		TriggeredBy = Upgrade_ObjectLevel3
		RemoveUpgrade = Upgrade_ObjectLevel1
    End
	Behavior = AttributeModifierAuraUpdate ModuleTag_DenethorLeadershipLvl3
		StartsActive	= No
		BonusName		= VahRusLeadershipLvl3
		TriggeredBy		= Upgrade_ObjectLevel3
		RefreshDelay	= 2000
		Range			= 200
		ObjectFilter	= AOTR_GENERIC_BUFF_RECIPIENT_OBJECT_FILTER
	End
	Behavior = ObjectCreationUpgrade ModuleTag_RemoveUpgrades2
		TriggeredBy = Upgrade_ObjectLevel6
		RemoveUpgrade = Upgrade_ObjectLevel3
    End
	Behavior = AttributeModifierAuraUpdate ModuleTag_DenethorLeadershipLvl6
		StartsActive	= No
		BonusName		= VahRusLeadershipLvl6
		TriggeredBy		= Upgrade_ObjectLevel6
		RefreshDelay	= 2000
		Range			= 200
		ObjectFilter	= AOTR_GENERIC_BUFF_RECIPIENT_OBJECT_FILTER
	End
	
	;=================================
	;	Weighted Blow
	;=================================
	
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BlowEnabler
		SpecialPowerTemplate 	= SpecialAbilityHewerofRanks
		TriggeredBy 			= Upgrade_ObjectLevel2
	End
	Behavior = SpecialPowerModule ModuleTag_BlowStarter                      
		SpecialPowerTemplate      = SpecialAbilityHewerofRanks
		UpdateModuleStartsAttack  = Yes
		StartsPaused 			  = Yes
		InitiateSound = VahRusVoiceWeightedBlow
	End
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_BlowUpdate   
		SpecialPowerTemplate    = SpecialAbilityHewerofRanks
		SkipContinue			= Yes
		UnpackTime				= 1100
		PreparationTime			= 1
		PersistentPrepTime		= 500 
		PackTime				= 500
		MustFinishAbility		= Yes		
		AwardXPForTriggering	= 0		
		StartAbilityRange		= 35.0		;a bit above actual weapon range
		SpecialWeapon			= WeightedBlowWeapon
		WhichSpecialWeapon		= 2
	End
	Behavior = AutoAbilityBehavior ModuleTag_BlademasterAutoAbility
		SpecialAbility				= SpecialAbilityHewerofRanks
		ForbiddenStatus 			= INSIDE_GARRISON
		MaxScanRange				= 200
		Query						= 1 ALL ENEMIES -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL
	End
	
	
	;--------------------------------------------------------------------------------------------
	;//-------------------------Warlord's Demand-------------------------------------------------    ;Dain's Mighty Rage: Mighty Rage
	;--------------------------------------------------------------------------------------------
		Behavior = UnpauseSpecialPowerUpgrade ModuleTag_MightyRageStarter
		SpecialPowerTemplate			= SpecialAbilityDainMightyRage
		TriggeredBy						= Upgrade_ObjectLevel5 ;Upgrade_DainMightyRage
	End
	Behavior = SpecialPowerModule ModuleTag_DainMightyRageDummy
		SpecialPowerTemplate			= SpecialAbilityDainMightyRage
		StartsPaused					= Yes
		UpdateModuleStartsAttack		= Yes
		InitiateSound					= VahRusVoiceWarlordsDemand
	End

	Behavior = ActivateModuleSpecialPower ModuleTag_CloseTheGap
		SpecialPowerTemplate			= SpecialAbilityDainMightyRage
		StartAbilityRange				= 200
;;,;;		TriggerSpecialPower				= ModuleTag_MightyRageHeal		TARGETPOS
		UnpackTime              = 1000
		UnpackingVariation		= 1
 		PreparationTime         = 0
 		PersistentPrepTime      = 0
 		PackTime                = 1330
		TriggerSpecialPower				= ModuleTag_MightyRageBuff		TARGETPOS
		TriggerSpecialPower				= ModuleTag_MightyRageDebuff	TARGETPOS
	End

	Behavior = SpecialPowerModule ModuleTag_MightyRageBuff
		SpecialPowerTemplate			= SpecialAbilityActivateeDummy
		AttributeModifier				= VahRusDemandBuff
		AttributeModifierRange			= DAIN_MIGHTYRAGE_EFFECT_RADIUS
		AttributeModifierAffects		= AOTR_GENERIC_BUFF_RECIPIENT_OBJECT_FILTER
	End

	Behavior = SpecialPowerModule ModuleTag_MightyRageDebuff
		SpecialPowerTemplate			= SpecialAbilityActivateeDummy
		AttributeModifier				= VahRusDemandDebuff
		AttributeModifierRange			= DAIN_MIGHTYRAGE_EFFECT_RADIUS
		AttributeModifierAffects		= AOTR_GENERIC_BUFF_RECIPIENT_OBJECT_FILTER
		;AntiCategory					= LEADERSHIP ;;,;; removed BUFF
		TargetEnemy	= Yes
	End

;;.;; Removed
;	Behavior = PlayerHealSpecialPower ModuleTag_MightyRageHeal
;		SpecialPowerTemplate			= SpecialAbilityActivateeDummy
;		HealAmount						= 1.0
;		HealAsPercent					= Yes
;		HealAffects						= INFANTRY CAVALRY HERO DOZER MONSTER
;		HealRadius						= DAIN_MIGHTYRAGE_EFFECT_RADIUS
;		HealFX							= FX_SpellHealUnitHealBuff
;		InitiateSound					= DainMightyRage
;		TriggerFX						= FX_DainMightyRage02
;	End

	Behavior = AutoAbilityBehavior ModuleTag_StarlightAutoAbilityBehavior ;;,;;
		SpecialAbility	= SpecialAbilityDainMightyRage
		ForbiddenStatus = INSIDE_GARRISON ;;,;; This seems to prevent the ability from being used inside a tower
		MaxScanRange	= DAIN_MIGHTYRAGE_EFFECT_RADIUS
		Query			= 2 ANY ALLIES +HORDE						; 2 friendly hordes or an enemy
		Query			= 1 ALL ENEMIES -STRUCTURE -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL -FS_BASE_DEFENSE ;;,;;
;;,;;		Query			= 1 ALL ENEMIES
	End
	; ;=====================================
	; ;	CHOSEN OF THE GREAT KHAN - WIP
	; ;=====================================
	; Behavior = UnpauseSpecialPowerUpgrade ModuleTag_KnifeEnabler
		; SpecialPowerTemplate = SpecialAbilityGimliHeroMode
		; TriggeredBy = Upgrade_ObjectLevel8 ;Upgrade_GimliSlayerTrigger
	; End
	; Behavior = WeaponModeSpecialPowerUpdate ModuleTag_KnifeFighterPowerUpdate
		; SpecialPowerTemplate	= SpecialAbilityGimliHeroMode
		; Duration				= 30000												; Needs to match SpecialAbilityGimliHeroMode
		; AttributeModifier		= ChosenGreatKhan ;FoeHammer
		; ;LockWeaponSlot			= SECONDARY
		; ;WeaponSetFlags			= WEAPONSET_HERO_MODE
		; StartsPaused			= Yes
		; ;InitiateSound 			= AragornBladeMaster		;this doesn't work
	; End
	; Behavior = AutoAbilityBehavior ModuleTag_SlayerAutoAbility ;;,;; ;;;
		; SpecialAbility	= SpecialAbilityGimliHeroMode
		; ForbiddenStatus = INSIDE_GARRISON ;;,;; This seems to prevent the ability from being used inside a tower
		; MaxScanRange				= 100
		; Query						= 1 ANY ENEMIES +INFANTRY +CAVALRY +MONSTER +STRUCTURE -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL -FS_BASE_DEFENSE
	; End
; ;--------------------------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------
//	CHOSEN OF THE GREAT KHAN
//--------------------------------------------------------------------------
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenGloriousChargeEnabler
		SpecialPowerTemplate = SpecialAbilityTheodenGloriousCharge
		TriggeredBy = Upgrade_ObjectLevel8
	End
	Behavior = SpecialPowerModule ModuleTag_DainMightyRageDummyGreatKhan
		SpecialPowerTemplate			= SpecialAbilityTheodenGloriousCharge
		StartsPaused					= Yes
		UpdateModuleStartsAttack		= Yes
		;InitiateSound					= VahRusVoiceOnyxEmperor
	End
	Behavior = ActivateModuleSpecialPower ModuleTag_CloseTheGapGreatKhan
		SpecialPowerTemplate			= SpecialAbilityTheodenGloriousCharge
		StartAbilityRange				= 200
		UnpackTime              = 1000
		UnpackingVariation		= 1
 		PreparationTime         = 0
 		PersistentPrepTime      = 0
 		PackTime                = 1330
		TriggerSpecialPower				= ModuleTag_BlackEasterling_OCL	OBJECTPOS
		TriggerSpecialPower				= ModuleTag_AragornBladeMasterUpdater		OBJECTPOS
	End
	Behavior = OCLSpecialPower ModuleTag_BlackEasterling_OCL
		SpecialPowerTemplate = SpecialAbilityActivateeDummy
		OCL                  = OCL_ChosenGreatKhanSummonEgg
		CreateLocation       = USE_OWNER_OBJECT
		StartsPaused		 = Yes
        SetModelCondition        = ModelConditionState:USER_1
        SetModelConditionTime    = 8.1
	End
	Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterUpdater
		SpecialPowerTemplate			= SpecialAbilityActivateeDummy2
		StartsPaused			= No
		UpdateModuleStartsAttack		= Yes
	End
	Behavior = WeaponModeSpecialPowerUpdate ModuleTag_KnifeFighterPowerUpdate
		SpecialPowerTemplate	= SpecialAbilityActivateeDummy2
		Duration		= 30000				; RotWK originally 30000
		AttributeModifier		= ChosenGreatKhan
		WeaponSetFlags			= WEAPONSET_HERO_MODE
 	End	
	Behavior = AutoAbilityBehavior ModuleTag_BlackEasterling_AutoAbility
		SpecialAbility	= SpecialAbilityTheodenGloriousCharge
		ForbiddenStatus = INSIDE_GARRISON
		MaxScanRange	= 300
		Query		= 30 ANY ENEMIES +INFANTRY +CAVALRY -STRUCTURE -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL -FS_BASE_DEFENSE
	End
//--------------------------------------------------------------------------
	
	;========================================
	;	Curse of the Black Dragon
	;========================================
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_InfernoEnabler	;;,;; Added for 2.4
		SpecialPowerTemplate = SpecialAbilityGiveNothingBack
		TriggeredBy = Upgrade_ObjectLevel10
	End

	Behavior = SpecialPowerModule ModuleTag_InfernoStarter
		SpecialPowerTemplate		= SpecialAbilityGiveNothingBack
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= VahRusVoiceBlackDragon
		StartsPaused			= Yes ;;,;; Added for 2.4
	End

	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_InfernoUpdate
		SpecialPowerTemplate    = SpecialAbilityGiveNothingBack

		UnpackTime              = 1300 ; Drawing the horn
;		PreparationTime         = 1   ; nothing
;		PersistentPrepTime      = 1600 ; Blowing
		PackTime                = 1600 ; Putting horn away

		TriggerSound				= GiveNothingBack
		;TriggerSound				= FireDrakeInfernoMS		;too much delay
		;UnpackSound				= FireDrakeInfernoMS	;didn't play at all
		;PackSound					= FireDrakeInfernoMS		;too much delay
;    PrepSoundLoop           =
		AwardXPForTriggering    = 0

		StartAbilityRange = 120.0

		SpecialWeapon = CurseoftheBlackDragonWeapon
		WhichSpecialWeapon = 1
	End

	Behavior = AutoAbilityBehavior ModuleTag_WoPAutoAbility ;;,;;
		SpecialAbility				= SpecialAbilityGiveNothingBack
		ForbiddenStatus = INSIDE_GARRISON ;;,;; This seems to prevent the ability from being used inside a tower
		MaxScanRange				= FIREDRAKE_INFERNO_RADIUS
		Query						= 30 ALL ENEMIES -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL
	End
	
	; ;-------------------------------------------------------------------------
	; ; Terror of the North
	; ;-------------------------------------------------------------------------
	; Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DainSummonEnabler
		; SpecialPowerTemplate = SpecialAbilityMightofRhunSummon
		; TriggeredBy = Upgrade_ObjectLevel10 ;Upgrade_DainRoyalGuard
	; End

	; Behavior = OCLSpecialPower ModuleTag_OCLSpecialPower
		; SpecialPowerTemplate	= SpecialAbilityMightofRhunSummon
		; OCL						= OCL_MightofRhunSummon
		; CreateLocation			= CREATE_AT_LOCATION
		; StartsPaused			= Yes
		; TriggerFX			 = FX_SummonHaradEasterlings
		; ;SetModelCondition		= ModelConditionState:USER_1
		; ;SetModelConditionTime	= 8.1
	; End
	; Behavior = AutoAbilityBehavior ModuleTag_AotDAutoAbility ;;,;;
		; SpecialAbility	= SpecialAbilityMightofRhunSummon
		; ForbiddenStatus = INSIDE_GARRISON ;;,;; This seems to prevent the ability from being used inside a tower
		; MaxScanRange	= 300
		; Query	= 30 ANY ENEMIES +INFANTRY +CAVALRY +STRUCTURE -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL
		; Query	= 1 ANY ENEMIES +STRUCTURE -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL -UNATTACKABLE
	; End	
	;///////////////////
	; AISpecialPowers
	;///////////////////
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive ;;,;; Changed for 3.0.1
		CommandButtonName = Command_AttackMove ;;,;; Command_SetStanceAggressive ;;,;; Changed for 3.0.1
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End
	
	
	Scale = 1.13

	Geometry = CYLINDER
	GeometryMajorRadius = 8.0
	GeometryMinorRadius = 8.0
	GeometryHeight = 19.2
	GeometryIsSmall = Yes
	Shadow = SHADOW_DECAL
	ShadowSizeX = 20;
	ShadowSizeY = 20;
	ShadowTexture = ShadowI;
End

Object CurseoftheBlackDragonFX

	Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model = None
		End
	End

	KindOf = IMMOBILE UNATTACKABLE

	Body = ActiveBody ModuleTag_MakesKillWork
		MaxHealth = 1
	End

	Behavior = LifetimeUpdate ModuleTag_HatchTrigger
		MinLifetime = 1000
		MaxLifetime = 1000
	End

	Behavior = SlowDeathBehavior ModuleTag_HatchProcess
		DestructionDelay = 0
		FX		= INITIAL FX_SummonRhunDragon ; FX_BurodapanGiveNothingBack
		Weapon	= INITIAL BlackDragonFearWeapon
	End

End

Object ChosenOfTheGreatKhanEgg

	Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model = None
		End
	End

	KindOf = IMMOBILE UNATTACKABLE

	Body = ActiveBody ModuleTag_MakesKillWork
		MaxHealth = 1
	End

	Behavior = LifetimeUpdate ModuleTag_HatchTrigger
		MinLifetime = 1000
		MaxLifetime = 1000
	End

	Behavior = SlowDeathBehavior ModuleTag_HatchProcess
		DestructionDelay = 0
		FX		= INITIAL FX_SummonHaradEasterlings ; FX_BurodapanGiveNothingBack
	;	Weapon	= INITIAL BlackDragonFearWeapon
		OCL = FINAL OCL_ChosenGreatKhanSummon
	End

End

ChildObject RhunVahRus_WOTR RhunVahRus
	;CommandPoints = 1
	Behavior = GrantUpgradeCreate ModuleTag_GiveUpgrade
		UpgradeToGrant			= Upgrade_WOTRHero11
	End
	Behavior = AttributeModifierAuraUpdate ModuleTag_SerfActivation
		StartsActive	= Yes
		BonusName		= VahRusSerfActivation
		RefreshDelay	= 2000
		Range			= 999999999
		ObjectFilter	= ANY +MordorOrcPit_WotR +MordorOrcPitFoundation_WotR +MordorTrollCage_WotR +MordorTrollCageFoundation_WotR +MordorSiegeWorks_WotR +MordorSiegeWorksFoundation_WotR SAME_PLAYER
	End
End