;------------------------------------------------------------------------------
; aka Witch King, WitchKingMordor, MordorFellBeast
Object MordorWitchKing                         ;BALANCE WitchKing
	; *** ART Parameters ***

    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
	SelectPortrait = HeWitchKingNew

    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
	ButtonImage = HiWitchKingNew

	DescriptionStrategic = CONTROLBAR:LW_ToolTip_WitchKing

	Draw = W3DScriptedModelDraw ModuleTag_DRAW

	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD

		OkToChangeModelColor = Yes

;		ExtraPublicBone = arrrow

		DefaultModelConditionState
			Model               = muNwikiRW_skn
		End

		ModelConditionState = MOUNTED USER_3
			Model			= muNwikiHR_mnt
        ;    Skeleton        = RUHHs_Theo_SKL
		End

		ModelConditionState = MOUNTED USER_5
			Model			= muNwiki_mnt
        ;    Skeleton        = RUHHs_Theo_SKL
		End

		ModelConditionState = MOUNTED
			Model			= muNwikiRW_mnt
       ;     Skeleton        =    RUHHs_Theo_SKL
		End

		ModelConditionState = USER_3
			Model			= muNwikiHR_skn
		End

		ModelConditionState = USER_5
			Model			= muNwiki_skn
		End


		ModelConditionState = WEAPONSET_HERO_MODE
			;ParticleSysBone = BAT_RIBS BladeMaster FollowBone:Yes
		End

			;-------------------------- MOUNTED VERSION ---------------------------------------------------------

		AnimationState        = PASSENGER MOUNTED
			Animation           = grabbed
				AnimationName       = MUBlkRider_SKL.MUBlkRider_GBDA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART
		End

		; --- stunned anims
		AnimationState        = FREEFALL MOUNTED
			Animation           = freefall
				AnimationName       = MUBlkRider_SKL.MUBlkRider_FLYB
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART
		End

		AnimationState        = STUNNED_FLAILING MOUNTED
			Animation           = JustDie
				AnimationName       = MUBlkRider_SKL.MUBlkRider_FLYB
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART
		End

		AnimationState				=	DYING SPLATTED MOUNTED
			Animation				=	splatted
				AnimationName		=	MUBlkRider_SKL.MUBlkRider_LNDA
				AnimationMode		=	ONCE
			End
		End

		AnimationState				=	BURNINGDEATH MOUNTED DYING
			Animation
				AnimationName		=	MUBlkRider_SKL.MUBlkRider_DIEA
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
			End
			Animation
				AnimationName		=	MUBlkRider_SKL.MUBlkRider_DIEC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
			End
		End

		AnimationState				=	BURNINGDEATH MOUNTED
			Animation
				AnimationName		=	MUBlkRider_SKL.MUBlkRider_MFDA
				AnimationMode		=	LOOP
				AnimationBlendTime	=	10
				Distance			=	80
			End
		End

		AnimationState				= DYING MOUNTED     ; DEATH_2 Normally has DEATH_2, but just as a backup don't insist
			Animation
				AnimationName       = MUBlkRider_SKL.MUBlkRider_DIEA
				AnimationMode       = ONCE
			End
			Animation
				AnimationName		= MUBlkRider_SKL.MUBlkRider_DIEC
				AnimationMode		= ONCE
			End
		End

		AnimationState        = STUNNED_STANDING_UP MOUNTED
			Animation           = StandUp
				AnimationName       = MUBlkRider_SKL.MUBlkRider_GTPA
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End

		AnimationState        = STUNNED MOUNTED
			Animation           = Land
				AnimationName       = MUBlkRider_SKL.MUBlkRider_LNDA
				AnimationMode       = ONCE
			End
		End

		AnimationState        = MOVING FIRING_OR_PREATTACK_A MOUNTED
			ShareAnimation		= Yes
			Animation           = TrotAndFire
				AnimationName       = MUBlkRider_SKL.MUBlkRider_ATRA
				AnimationMode       = LOOP
				Distance			= 70; 35
			End
			Flags               = RANDOMSTART
		End

		AnimationState				=	TURN_LEFT_HIGH_SPEED MOUNTED
			Animation				=	TurnLeft
				AnimationName		=	MUBlkRider_SKL.MUBlkRider_RUNA
				AnimationMode		=	LOOP
				AnimationBlendTime	=	20
			End
		End

		AnimationState				=	TURN_RIGHT_HIGH_SPEED MOUNTED
			Animation				=	TurnLeft
				AnimationName		=	MUBlkRider_SKL.MUBlkRider_RUNA
				AnimationMode		=	LOOP
				AnimationBlendTime	=	20
			End
		End

;;======= TERROR
		AnimationState				= MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY MOUNTED
			Animation				= RUNB
				AnimationName		= MUBlkRider_SKL.mublkrider_runa
				AnimationMode		= LOOP
			End
		End
		AnimationState				= MOVING EMOTION_TERROR MOUNTED
			Animation				= RUNB
				AnimationName		= MUBlkRider_SKL.mublkrider_runa
				AnimationMode		= LOOP
			End
		End
;;===== BACKUP
		AnimationState				=	MOVING BACKING_UP MOUNTED
			Animation				=	BackingUp
				AnimationName		=	MUBlkRider_SKL.MUBlkRider_BAKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End

		AnimationState        = MOVING TURN_LEFT MOUNTED
			Animation				=	TurnLeft
				AnimationName		=	MUBlkRider_SKL.MUBlkRider_TRNL
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= .8 .8
			End
		End

		AnimationState        = MOVING TURN_RIGHT MOUNTED
			Animation				=	TurnLeft
				AnimationName		=	MUBlkRider_SKL.MUBlkRider_TRNR
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= .8 .8
			End
		End

		AnimationState			= MOVING ACCELERATE MOUNTED
			Animation           = Accelerate
				AnimationName   = MUBlkRider_SKL.MUBlkRider_ACCL
				AnimationMode   = ONCE ; was LOOP
			End
		End

		AnimationState			= MOVING DECELERATE MOUNTED
			Animation           = Decelerate
				AnimationName   = MUBlkRider_SKL.MUBlkRider_DECL
				AnimationMode   = ONCE
				AnimationSpeedFactorRange = 0.6 0.6
			End
		End

		AnimationState        = MOVING MOUNTED
			ShareAnimation		= Yes
			Animation           = RunA
				AnimationName       = MUBlkRider_SKL.MUBlkRider_RUNA
				AnimationMode       = LOOP
			End
			Animation           = RunB
				AnimationName       = MUBlkRider_SKL.mublkrider_runa
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART
		End


		AnimationState        = FIRING_OR_PREATTACK_A MOUNTED
			Animation           = ATKA
				AnimationName       = MUBlkRider_SKL.MUBlkRider_ATKA
				AnimationMode       = ONCE
			End
			Animation           = ATKB
				AnimationName       = MUBlkRider_SKL.MUBlkRider_ATKB
				AnimationMode       = ONCE
			End
			Animation           = Defend
				AnimationName       = MUBlkRider_SKL.MUBlkRider_DFDA
				AnimationMode       = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End

		; --- Morgul Blade Weapon anim
		AnimationState					= SPECIAL_WEAPON_ONE MOUNTED
		StateName						= SPELL
			Animation					= SPCC
				AnimationName			= MUBlkRider_SKL.MUBlkRider_CHRA
				AnimationMode			= ONCE
			End
			FXEvent	= Frame:10 Name: FX_WitchKingHour
		End

		AnimationState        = SPECIAL_WEAPON_TWO MOUNTED
			Animation             = ATKA
				AnimationName       = MUBlkRider_SKL.MUBlkRider_SPCB
				AnimationMode       = ONCE
			End
		End

		AnimationState					= SPECIAL_WEAPON_THREE MOUNTED
		StateName						= SPELL
			Animation					= SPCC
				AnimationName			= MUBlkRider_SKL.MUBlkRider_CHRA
				AnimationMode			= ONCE
			End
			FXEvent	= Frame:10 Name: FX_WitchKingOpenMordorSelf
		End

		AnimationState					= SPECIAL_POWER_1 MOUNTED
		StateName						= SPELL
			Animation					= SPCC
				AnimationName			= MUBlkRider_SKL.MUBlkRider_SPCA
				AnimationMode			= ONCE
			End
			;Flags						= RESTART_ANIM_WHEN_COMPLETE
			FXEvent	= Frame:5 Name: FX_NazgulScreechBlast
		End

		AnimationState					= SPECIAL_POWER_2 MOUNTED
		StateName						= SPELL
			Animation					= SPCC
				AnimationName			= MUBlkRider_SKL.MUBlkRider_SPCC
				AnimationMode			= ONCE
			End
			;Flags						= RESTART_ANIM_WHEN_COMPLETE
			FXEvent	= Frame:8 Name: FX_WitchKingHourChill
		End

		AnimationState = PACKING_TYPE_2 MOUNTED ;RIDER7 MOUNTED
		StateName						=	SPELL
			Animation							= TNTA
				AnimationName					= MUBlkRider_SKL.MUBlkRider_SPCA
				AnimationMode					= ONCE
				AnimationSpeedFactorRange		= 0.8 0.8
			End
			FXEvent	= Frame:10 Name: FX_ChillofAngmar
		End

		; --------- Click and Hit Reactions ------------
		AnimationState = HIT_REACTION HIT_LEVEL_1 MOUNTED
			Animation = Hit_Level_1_a
				AnimationName = MUBlkRider_SKL.MUBlkRider_HFMA
				AnimationMode = ONCE
			End
		End
	;;------------- EMOTIONS ---------------------------------------------
//		AnimationState					=	EMOTION_ALERT EMOTION_AFRAID MOUNTED
//			ShareAnimation				= Yes
//			Animation					=	Apprehensive
//				AnimationName			=	MUBlkRider_SKL.MUBlkRider_APPA
//				AnimationMode			=	LOOP	;Change this to ONCE if adding additional anims
//			End
//		End
//
//		AnimationState					= EMOTION_AFRAID MOUNTED
//			ShareAnimation				= Yes
//			Animation					= FERA
//				AnimationName			= MUBlkRider_SKL.MUBlkRider_FERA
//				AnimationMode			= LOOP
//			End
//			Animation					= FERB
//				AnimationName			= MUBlkRider_SKL.MUBlkRider_FERB
//				AnimationMode			= LOOP
//			End
//		End

		AnimationState					= EMOTION_TAUNTING MOUNTED
			ShareAnimation				= Yes
			Animation					= Taunting
				AnimationName			= MUBlkRider_SKL.MUBlkRider_TNTA
				AnimationMode			= ONCE
			End
			Animation					= Taunting
				AnimationName			= MUBlkRider_SKL.MUBlkRider_TNTB
				AnimationMode			= ONCE
			End
			Animation					= Taunting2
				AnimationName			= MUBlkRider_SKL.MUBlkRider_TNTC
				AnimationMode			= ONCE
			End
			Flags						= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState					= EMOTION_POINTING MOUNTED
			Animation					= Pointing1
				AnimationName			= MUBlkRider_SKL.MUBlkRider_PNTA
				AnimationMode			= LOOP
			End
		End

		AnimationState					= EMOTION_CELEBRATING MOUNTED
			ShareAnimation				= Yes
			Animation					= CHRA
				AnimationName			= MUBlkRider_SKL.MUBlkRider_CHRA
				AnimationMode			= ONCE
			End
			Animation					= CHRB
				AnimationName			= MUBlkRider_SKL.MUBlkRider_CHRB
				AnimationMode			= ONCE
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState					= EMOTION_ALERT MOUNTED
			Animation					= IDLA
				AnimationName			= MUBlkRider_SKL.MUBlkRider_IDLA
				AnimationMode			= LOOP
			End
		End

		AnimationState					= RAISING_FLAG MOUNTED
			ShareAnimation				= Yes
			Animation					= CHRA
				AnimationName			= MUBlkRider_SKL.MUBlkRider_CHRA
				AnimationMode			= ONCE
				AnimationSpeedFactorRange		= 0.9 1.1
			End
			Animation					= CHRB
				AnimationName			= MUBlkRider_SKL.MUBlkRider_CHRB
				AnimationMode			= ONCE
				AnimationSpeedFactorRange		= 0.9 1.1
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState				=	SELECTED MOUNTED
			StateName				=	State_Selected
			Animation				=	AtAttention
				AnimationName		=	MUBlkRider_SKL.MUBlkRider_IDLG
				AnimationMode		=	Loop
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected") end
			EndScript
		End

		AnimationState = MOUNTED
			StateName				= Idle
			Animation				= IdleA
				AnimationName       = MUBlkRider_SKL.MUBlkRider_IDLA
				AnimationPriority   = 20
				AnimationMode       = ONCE
				; AnimationBlendTime  = 15
			End
			Animation           = IdleB
				AnimationName       = MUBlkRider_SKL.MUBlkRider_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 1
				; AnimationBlendTime  = 15
			End
			Animation           = IdleC
				AnimationName       = MUBlkRider_SKL.MUBlkRider_IDLC
				AnimationMode       = ONCE
				AnimationPriority   = 1
				; AnimationBlendTime  = 15
			End
			Flags						= RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "State_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
			EndScript
		End


		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	MUBlkRider_SKL.MUBlkRider_ATNA
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.8 1.2
			End
		End


		TransitionState					=	TRANS_Selected_to_Idle
			Animation					=	ATNA
				AnimationName			=	MUBlkRider_SKL.MUBlkRider_ATNA
				AnimationMode			=	ONCE_BACKWARDS
				AnimationSpeedFactorRange = 0.8 1.2
			End
			Flags						= START_FRAME_LAST
		End

		AnimationState			= PACKING_TYPE_1
			StateName		= SPELL
			Animation
				AnimationName     = KUKng_SKL.KUKng_SPCA
				AnimationMode     = ONCE
			End
		End

		AnimationState = PACKING_TYPE_2 ;RIDER7
		StateName						=	SPELL
			Animation							= TNTA
				AnimationName					= KUKng_SKL.KUKng_SPCC
				AnimationMode					= ONCE
				; AnimationSpeedFactorRange		= 1.2 1.2
			End
			FXEvent	= Frame:10 Name: FX_ChillofAngmar
		End

		IdleAnimationState
			StateName				= Idle
			Animation
				AnimationName       = KUKng_SKL.KUKng_IDLB
				AnimationPriority	= 4
				AnimationBlendTime	= 10
				AnimationMode       = ONCE
			End
			Animation
				AnimationName       = KUKng_SKL.KUKng_IDLC
				AnimationPriority	= 1
				AnimationBlendTime	= 10
				AnimationMode       = ONCE
			End
			Animation
				AnimationName       = KUKng_SKL.KUKng_IDLC
				AnimationPriority = 1
				AnimationBlendTime	= 10
				AnimationMode       = ONCE
			End
			Animation
				AnimationName       = KUKng_SKL.KUKng_IDLE
				AnimationPriority = 1
				AnimationBlendTime	= 10
				AnimationMode       = ONCE
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") end
			EndScript
		End

;		AnimationState				=	DYING BURNINGDEATH
;			Animation
;				AnimationName		=	KUKng_SKL.KUKng_DTHA
;				AnimationMode		=	ONCE
;				AnimationBlendTime	=	10
;			End
;		End


		AnimationState = DYING
			Animation
				AnimationName       = KUKng_SKL.KUKng_DTHA
				AnimationMode       = ONCE
			End
		End

;		AnimationState				=	BURNINGDEATH
;			Animation
;				AnimationName		=	KUKng_SKL.KUKng_MFDA
;				AnimationMode		=	LOOP
;				Distance			=	90
;			End
;		End

		AnimationState = FREEFALL
			Animation
				AnimationName = KUKng_SKL.KUKng_FLYA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
		End

		AnimationState = STUNNED_FLAILING
			Animation
				AnimationName = KUKng_SKL.KUKng_FLYA
				AnimationMode = LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags = RANDOMSTART
		End

		AnimationState				=	DYING SPLATTED
			Animation
				AnimationName		=	KUKng_SKL.KUKng_LNDA
				AnimationMode		=	ONCE
			End
		End

		AnimationState = STUNNED_STANDING_UP
			Animation
				AnimationName = KUKng_SKL.KUKng_GTPA
				AnimationMode = ONCE
			End
		End

		AnimationState			= STUNNED
			Animation
				AnimationName   = KUKng_SKL.KUKng_LNDA
				AnimationMode   = ONCE
			End
		End

		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation
				AnimationName = KUKng_SKL.kukng_runc
				AnimationMode = LOOP
			End

			Flags = RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState = FIRING_OR_PREATTACK_A
			Animation
				AnimationName = KUKng_SKL.KUKng_ATKA
				AnimationMode = ONCE
			End
			Animation
				AnimationName = KUKng_SKL.KUKng_ATKB
				AnimationMode = ONCE
			End
			Animation
				AnimationName = KUKng_SKL.KUKng_ATKC
				AnimationMode = ONCE
			End
			Animation
				AnimationName = KUKng_SKL.KUKng_SPCB
				AnimationMode = ONCE
			End
		End

		AnimationState = MOVING
			Animation
				AnimationName = KUKng_SKL.kukng_runc
				AnimationMode = LOOP
			End
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End

		; --------- Click and Hit Reactions ------------
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = KUKng_SKL.KUKng_HITA
				AnimationMode = ONCE
			End
		End

		AnimationState = LEVELED
			Animation = Hit_Level_1_a
				AnimationName = KUKng_SKL.KUKng_LVLA
				AnimationMode = ONCE
			End
		End

		AnimationState        = SPECIAL_WEAPON_ONE
			StateName		= Attacking
			Animation             = SPCB
				AnimationName       = KUKng_SKL.KUKng_SPCE
				AnimationMode       = ONCE
			End
			FXEvent	= Frame:12 Name: FX_WitchKingHour
		End
		AnimationState        = SPECIAL_WEAPON_TWO
			StateName		= Attacking
			Animation             = SPCB
				AnimationName       = KUKng_SKL.KUKng_SPCB
				AnimationMode       = ONCE
			End
		End
		AnimationState			= SPECIAL_WEAPON_THREE
			StateName		= SPECIAL_POWER_1
			Animation
				AnimationName     = KUKng_SKL.KUKng_SPCE
				AnimationMode     = ONCE
			End
			FXEvent	= Frame:10 Name: FX_WitchKingOpenMordorSelf
		End

		AnimationState			= SPECIAL_POWER_1
			StateName		= SPECIAL_POWER_1
			Animation
				AnimationName     = KUKng_SKL.KUKng_SPCC
				AnimationMode     = ONCE
			End
			FXEvent	= Frame:5 Name: FX_NazgulScreechBlast
		End

		AnimationState			= SPECIAL_POWER_2
			StateName		= SPECIAL_POWER_2
			Animation
				AnimationName     = KUKng_SKL.KUKng_SPCA
				AnimationMode     = ONCE
			End
			FXEvent	= Frame:12 Name: FX_WitchKingHourChill
		End

;		AnimationState = ENGAGED
;			Animation
;				AnimationName = KUKng_SKL.KUKng_APPA
;				AnimationMode = LOOP
;			End
;		End


		AnimationState = EMOTION_CELEBRATING
			Animation
				AnimationName = KUKng_SKL.KUKng_CHRA
				AnimationMode = LOOP
			End
		End

		AnimationState							= EMOTION_TAUNTING
			Animation							= TNTA
				AnimationName					= KUKng_SKL.KUKng_TNTA
				AnimationMode					= ONCE
				AnimationSpeedFactorRange		= 0.8 1.2
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
		End

		AnimationState = RAISING_FLAG
			Animation
				AnimationName = KUKng_SKL.KUKng_CHRA
				AnimationMode = LOOP
			End
		End

		AnimationState = SELECTED
			Animation
				AnimationName = KUKng_SKL.KUKng_ATNB
				AnimationMode = LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
			EndScript
		End

    	TransitionState = TRANS_Idle_to_Selected
		Animation = ATNA
			AnimationName		= KUKng_SKL.KUKng_ATNA
			AnimationMode		= ONCE
			AnimationBlendTime	= 10
		End
    	End

    	TransitionState = TRANS_Selected_to_Idle
		Animation = ATNF
			AnimationName		= KUKng_SKL.KUKng_ATNC
			AnimationMode		= ONCE
			AnimationBlendTime	= 10
		End
    	End

	End

	Draw = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model = None
	    End
	    IdleAnimationState
	    End
	    AnimationState = MOVING WADING MOUNTED
			ParticleSysBone = None FootstepSlash
	    End
	    AnimationState = MOVING ACCELERATE MOUNTED
			ParticleSysBone = None InfantryDustTrails
	    End
	    AnimationState = MOVING DECELERATE MOUNTED
			ParticleSysBone = None InfantryDustTrails
	    End
	    AnimationState = MOVING MOUNTED
	    End
	End

	; ***DESIGN parameters ***
	Side				= Mordor
	EditorSorting		= UNIT
	ThreatLevel			= WITCHKING_THREAT_LEVEL
	ThingClass			= MEDIUM_MONSTER
	BuildCost			= 5000
	BuildTime			= HERO_BUILDTIME_TIER_5 ;;,;; WITCHKING_ON_FELLBEAST_BUILDTIME
	TransportSlotCount	= TRANSPORTSLOTCOUNT_HERO
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
	CommandSet			= MordorWitchKingCommandSet
	CommandPoints		= 0 ;HERO_COMMAND_POINTS_TIER_5 ;;,;; WITCHKING_COMMAND_POINTS
	VisionRange			= VISION_HERO_STANDARD ;;,;; VISION_FLIER
	ShroudClearingRange = SHROUD_CLEAR_HERO ;;,;; SHROUD_CLEAR_FLIER
	Scale				= 1.1 ;,; 1.5

	BountyValue = 500

	DisplayName			= OBJECT:MordorWitchKing
	DisplayNameStrategic = OBJECT:MordorWitchKing
	RecruitText			= CONTROLBAR:MordorWitchKingOnFellBeastRecruit
	ReviveText			= CONTROLBAR:MordorWitchKingOnFellBeastRevive
	Hotkey				= CONTROLBAR:MordorWitchKingOnFellBeastHotkey
	CrushableLevel		= 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	MountedCrusherLevel		= 1
	MountedCrushableLevel		= 2
	CrushWeapon			= MordorBlackRiderCrush   ;;;;KnightCrush
	MinCrushVelocityPercent 	= 56 ;58 ;62 ; ;50 ; Has to be moving at at least 50% of full speed.
	CrushDecelerationPercent	= 5 ;6 ;4 ;20 ; Lose 80 percent of max velocity when crushing.
	CrushKnockback				= 50 ; ; how hard we knock back crushed units.
	CrushZFactor				= 1.2 ; ; How much we knock upwards.
    MaxSimultaneousOfType = 1

	WeaponSet
		Conditions 			= None
		Weapon              = PRIMARY     WitchKingSword   ;WitchKingMorgulBlade
		Weapon				= TERTIARY	  MordorWitchkingMorgulBlade ;,; WitchKingMorgulBladeSpecialPower
	    AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	    AutoChooseSources	= SECONDARY FROM_PLAYER
	    AutoChooseSources	= TERTIARY NONE
	End

	WeaponSet
		Conditions = MOUNTED
		Weapon = PRIMARY    WitchKingMountedSword
	End

	WeaponSet
		Conditions 			= PLAYER_UPGRADE
		Weapon              = PRIMARY     WitchKingWarMace   ;WitchKingMorgulBlade
		Weapon				= TERTIARY	  MordorWitchkingMorgulBlade ;,; WitchKingMorgulBladeSpecialPower
	    AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	    AutoChooseSources	= SECONDARY FROM_PLAYER
	    AutoChooseSources	= TERTIARY NONE
	End

	;WeaponSet
	;	Conditions			= WEAPONSET_TOGGLE_1
	;	Weapon				= PRIMARY	  WitchKingWarMace
	;	Weapon				= TERTIARY	  WitchKingMorgulBladeSpecialPower
	 ;   AutoChooseSources	= TERTIARY NONE
	;End

	ArmorSet
		Conditions      = None
		Armor           = DismountedWitchkingArmor ;;,;; HeroArmor ;2.02 balance ;;.;; WitchKingArmor
		DamageFX        = None
	End
	ArmorSet
        Conditions      = MOUNTED
        Armor           = MountedHorseWitchkingArmor ;;; ResilientHeroArmor
        DamageFX        = NormalDamageFX
    End


	; *** AUTO RESOLVE DATA ***
	AutoResolveUnitType = AutoResolveUnit_Hero
	AutoResolveCombatChain = AutoResolve_HeroCombatChain

	AutoResolveBody = Aotr_AutoResolve_LeaderLargeHeroBody

	AutoResolveArmor
		Armor = Aotr_AutoResolve_HeroLeaderArmor
	End

	AutoResolveWeapon
		Weapon = AutoResolve_LeaderHeroStrongWeapon
	End

	;AutoResolveLeadership = AutoResolve_MouthOfSauronBonus

	AutoResolveLeadership = AutoResolve_WitchKingBonus ;;,;; added for 2.02e


	; *** AUDIO Parameters ***;

	VoiceAttack								= WitchKingVoiceAttackMS
	VoiceAttackCharge						= WitchKingVoiceAttackChargeMS
	VoiceAttackMachine						= WitchKingVoiceAttackMS
	VoiceAttackStructure					= WitchKingVoiceAttackBuildingMS
	;VoiceCreated				= EVA:WitchKingCreated
	;VoiceFullyCreated 			= EVA:WitchKingCreated
	VoiceFear 								= WitchKingVoiceHelpMeMS
	VoiceGuard								= WitchKingVoiceMoveMS
	VoiceMove								= WitchKingVoiceMoveMS
	VoiceMoveToCamp							= WitchKingVoiceMoveCampMS
	VoiceMoveWhileAttacking					= WitchKingVoiceDisengageMS
	VoicePriority							= 88
	VoiceRetreatToCastle					= WitchKingVoiceRetreatMS
	VoiceSelect								= WitchKingVoiceSelectMS
	VoiceSelectBattle 						= WitchKingVoiceSelectBattleMS

	SoundImpact					= ImpactHorse

	; VoiceAttack					= FellBeastVoiceAttack
	; VoiceAttackCharge			= FellBeastVoiceAttack
	; VoiceAttackMachine			= FellBeastVoiceAttack
	; VoiceAttackStructure		= FellBeastVoiceAttack
	; ;VoiceCreated				= EVA:WitchKingCreated
	; ;VoiceFullyCreated 			= EVA:WitchKingCreated
	; VoiceMove					= FellBeastVoiceMove
	; VoiceMoveToCamp				= FellBeastVoiceMove
	; VoiceMoveWhileAttacking		= FellBeastVoiceMove
	; VoicePriority				= 88
	; VoiceRetreatToCastle		= FellBeastVoiceMove
	; VoiceSelect					= FellBeastVoiceSelect
	; VoiceSelectBattle 			= FellBeastVoiceSelect
	; VoiceGuard					= FellBeastVoiceMove

	; SoundImpact					= ImpactHorse

	; UnitSpecificSounds
		; VoiceEnterUnitEvilMenTransportShip	= FellBeastVoiceMove
		; VoiceEnterUnitMordorMumakil			= FellBeastVoiceMove
		; VoiceEnterUnitSlaughterHouse		= FellBeastVoiceMove
		; VoiceGarrison						= FellBeastVoiceMove
		; VoiceInitiateCaptureBuilding		= FellBeastVoiceMove
		; VoiceSpecialAbilityCurseEnemy		= WitchKingHourOfTheWitchKing
	; End

	UnitSpecificSounds
		VoiceEnterUnitEvilMenTransportShip	= WitchKingVoiceMoveMS
		VoiceEnterUnitMordorMumakil		= WitchKingVoiceMoveMS
		VoiceEnterUnitSlaughterHouse		= WitchKingVoiceMoveMS
		VoiceGarrison				= WitchKingVoiceMoveGarrisonMS
		VoiceInitiateCaptureBuilding		= WitchKingVoiceCaptureBuildingMS
		VoiceSpecialAbilityCurseEnemy		= WitchKingHourOfTheWitchKing
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:SauronFootstep			Animation:KUKng_SKL.kukng_runc		Frames:4 15			;;,;; ;;; Previously FootstepDirtA
		AnimationSound = Sound:TauntHumanHitShield		Animation:KUKng_SKL.KUKng_CHRB		Frames:22 32
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:KUKng_SKL.KUKng_DIEA		Frames:48
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:KUKng_SKL.KUKng_DIEB		Frames:18
		AnimationSound = Sound:BodyFallSoldier			Animation:KUKng_SKL.KUKng_LNDA		Frames:4
		AnimationSound = Sound:FootstepDirtA				Animation:MUBLKRIDER_SKL.MUBLKRIDER_CHRA	Frames:26 38
		AnimationSound = Sound:HorseMoveFootstepsLoose		Animation:MUBlkRider_SKL.MUBlkRider_ACCL	Frames:8 30
		AnimationSound = Sound:HorseMoveFootstepsLoose		Animation:MUBlkRider_SKL.MUBlkRider_RUNA	Frames:0
		AnimationSound = Sound:HorseMoveFootstepsLoose		Animation:MUBlkRider_SKL.MUBlkRider_RUNB	Frames:0
		AnimationSound = Sound:HorseMoveFootstepsLoose		Animation:MUBlkRider_SKL.MUBlkRider_TNL1	Frames:0
		AnimationSound = Sound:HorseMoveFootstepsLoose		Animation:MUBlkRider_SKL.MUBlkRider_TNR1	Frames:0
		AnimationSound = Sound:HorseMoveFootstepsLoose		Animation:MUBlkRider_SKL.MUBlkRider_TRNL	Frames:0
		AnimationSound = Sound:HorseMoveFootstepsLoose		Animation:MUBlkRider_SKL.MUBlkRider_TRNR	Frames:0
		AnimationSound = Sound:HorseWhinny			Animation:MUBlkRider_SKL.MUBlkRider_DIEA	Frames:0
		;AnimationSound = Sound:HorseWhinny			Animation:MUBlkRider_SKL.MUBlkRider_DIEB	Frames:0
		AnimationSound = Sound:HorseWhinny			Animation:MUBlkRider_SKL.MUBlkRider_DIEC	Frames:0
		;AnimationSound = Sound:HorseWhinny			Animation:MUBlkRider_SKL.MUBlkRider_DIED	Frames:0
		AnimationSound = Sound:HorseWhinny			Animation:MUBlkRider_SKL.MUBlkRider_IDLC	Frames:9
		AnimationSound = Sound:HorseWhinny			Animation:MUBlkRider_SKL.MUBlkRider_TNTB	Frames:9
		AnimationSound = Sound:BodyFallGeneric1			Animation:MUBlkRider_SKL.MUBlkRider_DIEA	Frames:10 46
		AnimationSound = Sound:BodyFallGeneric1			Animation:MUBlkRider_SKL.MUBlkRider_DIEC	Frames:20 43
		AnimationSound = Sound:BodyFallGenericNoArmor		Animation:MUBlkRider_SKL.MUBlkRider_DIEC	Frames:70
		AnimationSound = Sound:BodyFallGeneric1			Animation:MUBlkRider_SKL.MUBlkRider_LNDA	Frames:3 11
		AnimationSound = Sound:HorseWhinny			Animation:MUBlkRider_SKL.MUBlkRider_LNDA	Frames:0
	End

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU			;Tie into LargeGroupAudio system
		Key = Nazgul ;;,;; ;;; Human Unit Cavalry Knight
	End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

	EvaEventDieOwner		= WitchKingDie			;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
							;For deaths you can respawn from, use the DeathFX


	; *** ENGINEERING Parameters ***
	RadarPriority	= UNIT
	KindOf			= PRELOAD SELECTABLE CAN_CAST_REFLECTIONS SCARY ARMY_SUMMARY HERO PATH_THROUGH_EACH_OTHER HEAVY_MELEE_HITTER SCORE ;MONSTER PATH_THROUGH_INFANTRY

	Body = RespawnBody ModuleTag_02
		CheerRadius 				= EMOTION_CHEER_RADIUS
		MaxHealth         			= 4000			;BALANCE Witchking Health
		MaxHealthReallyDamaged = 2000
		PermanentlyKilledByFilter	= NONE	;//	+RohanEowyn		Nope, that's BFME1.  This is BFME2
		BurningDeathBehavior		= Yes
		BurningDeathFX				= FX_InfantryBurningFlame
	End

	Behavior = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim					= USER_1				;Model condition to play when killed-to-respawn
		DeathFX						= FX_WitchKingDeath		;FXList to play when killed-to-respawn
		DeathAnimationTime			= 5133					;How long DeathAnim will take.
		InitialSpawnFX				= FX_WitchKingInitialSpawn
		RespawnFX					= FX_WitchKingRespawn		;FXList to play when respawning.
		RespawnAnim					= LEVELED				;Animation to play when respawning.
		RespawnFX					= FX_Resurrection		;FXList to play when respawning.
		RespawnAnimationTime		= 2000					;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage					= HiWitchKingResNew
		RespawnAsTemplate			= MordorWitchKing

		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
;;,;;		RespawnRules =	AutoSpawn:No	Cost:3500	Time:120000	Health:100%		;DEFAULT VALUES     ;Cost:3750

;;,;; Version 2.1 Respawn Rules
		RespawnRules =			AutoSpawn:No	Cost:4000		Time:HERO_RESPAWNTIME_TIER_5		Health:100% ;Cost:1200
		RespawnEntry =	Level:2				Cost:4250		Time:HERO_RESPAWNTIME_TIER_5
		RespawnEntry =	Level:3				Cost:4500		Time:HERO_RESPAWNTIME_TIER_5
		RespawnEntry =	Level:4				Cost:4750		Time:HERO_RESPAWNTIME_TIER_5
		RespawnEntry =	Level:5				Cost:5000		Time:HERO_RESPAWNTIME_TIER_5
		RespawnEntry =	Level:6				Cost:5250		Time:HERO_RESPAWNTIME_TIER_5
		RespawnEntry =	Level:7				Cost:5500		Time:HERO_RESPAWNTIME_TIER_5
		RespawnEntry =	Level:8				Cost:5750		Time:HERO_RESPAWNTIME_TIER_5
		RespawnEntry =	Level:9				Cost:6000		Time:HERO_RESPAWNTIME_TIER_5
		RespawnEntry =	Level:10			Cost:6250		Time:HERO_RESPAWNTIME_TIER_5
	End

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance				= 300
		TauntAndPointUpdateDelay			= 10000
		AddEmotion			=	Doom_Base
		//	AddEmotion			=   BraceForBeingCrushed_Base
		//	AddEmotion			=	FearIdle_Base
		//	AddEmotion			=	FearBusy_Base
		AddEmotion			=	Point_Base
		AddEmotion			=	Taunt_Base
 		AddEmotion			=	CheerIdle_Base
		AddEmotion			=	CheerBusy_Base
		//	AddEmotion			=	HeroCheerIdle_Base
		//	AddEmotion			=	HeroCheerBusy_Base
		AddEmotion			=	Alert_Base
		AddEmotion			=	CheerForAboutToCrush_Base
	End

	Behavior = AutoHealBehavior ModuleTag_WitchKingHealing
		StartsActive			= Yes
		HealingAmount			= NAZGUL_HEAL_AMOUNT ;;,;; 100 ;;.;; 20
		HealingDelay			= 1000
		StartHealingDelay		= 15000 ;;,;; 10000 ;;.;; 15000
		HealOnlyIfNotInCombat	= Yes
	End

	Behavior = ModelConditionUpgrade ModuleTag_AmonHen
		TriggeredBy			= Upgrade_ObjectLevel5
		AddConditionFlags	= USER_5
		Permanent			= Yes
	End

	Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTag
		TriggeredBy		= Upgrade_ObjectLevel5
	End

	;---------DREAD VISAGE------------------------------------------------------------------------
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DreadVisage
		SpecialPowerTemplate		= SpecialAbilityFakeLeadership
		TriggeredBy					= Upgrade_ObjectLevel1 ;Upgrade_DreadVisage
	End
	Behavior = SpecialPowerModule ModuleTag_DreadVisageUpdate
		SpecialPowerTemplate		= SpecialAbilityFakeLeadership
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
	End
	Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura
		StartsActive	= No														;If no, requires upgrade to turn on.
		TriggeredBy		= Upgrade_ObjectLevel1 ;Upgrade_DreadVisage
		RefreshDelay	= 2000
		Range			= WITCHKING_DREADVISAGE_EFFECT_RADIUS
		TargetEnemy		= Yes
		AntiCategory	= LEADERSHIP ;DEBUFF ;;,;; Removed BUFF, added DEBUFF
		BonusName		= DreadWrathModifier ;;,;; GenericDebuff
		ObjectFilter	= AOTR_GENERIC_BUFF_RECIPIENT_OBJECT_FILTER ;
	End
	Behavior = RadiateFearUpdate ModuleTag_DreadVisageFear
		InitiallyActive						= No
		TriggeredBy							= Upgrade_ObjectLevel1 ;Upgrade_DreadVisage
		WhichSpecialPower					= 1
		GenerateFear						= Yes
		EmotionPulseRadius					= WITCHKING_DREADVISAGE_EFFECT_RADIUS
		EmotionPulseInterval				= 2000
	End

	;---------MOUNT------------------------------------------------------------------------
	Behavior = SpecialPowerModule ModuleTag_HorseToggleStarter
 		SpecialPowerTemplate		= SpecialAbilityToggleMounted
		UpdateModuleStartsAttack	= Yes
 		StartsPaused				= No
	End

	Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
 		SpecialPowerTemplate    = SpecialAbilityToggleMounted
		TriggerInstantlyOnCreate = Yes
		SynchronizeTimerOnSpecialPower = SpecialAbilityCurseEnemy ElrondRingOfAir SpecialAbilityDwarvenGloinShakeFoundation SpecialAbilityScreech SpecialAbilityMordorWitchkingMorgulBlade SpecialAbilityWordOfPower SpecialAbilityWitchKingBlackDart
 		UnpackTime              = 2000
 		PreparationTime         = 1
 		PersistentPrepTime      = 250
 		PackTime                = 2000					; none, cause we hop onto our mount in no time at all :)
 		OpacityTarget			= .3					; How see-thru to be at peak of change
 		AwardXPForTriggering    	= 0
 		IgnoreFacingCheck		= Yes
	End

	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_WitchkingFellBeastMountLegalizer
		SpecialPowerTemplate = SpecialAbilityToggleMountedTwo
		TriggeredBy = Upgrade_DwarvenMithrilMail ;Upgrade_WitchkingMorgulBlade
	;	ObeyRechageOnTrigger		= Yes
	End

		Behavior = SpecialPowerModule ModuleTag_FellbeastToggleStarter
 		SpecialPowerTemplate		= SpecialAbilityToggleMountedTwo
		UpdateModuleStartsAttack	= Yes
 		StartsPaused				= Yes
	End

	Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_FellbeastToggle
 		SpecialPowerTemplate    = SpecialAbilityToggleMountedTwo
		MountedTemplate = MordorWitchKingOnFellBeastUpgrade
		SynchronizeTimerOnSpecialPower = SpecialAbilityCurseEnemy ElrondRingOfAir SpecialAbilityDwarvenGloinShakeFoundation SpecialAbilityScreech SpecialAbilityMordorWitchkingMorgulBlade SpecialAbilityWordOfPower SpecialAbilityWitchKingBlackDart
 		UnpackTime             		= 2000
 		PreparationTime         	= 0					; none, cause we hop onto our mount in no time at all :)
 		PackTime                	= 0 					; none, cause we hop onto our mount in no time at all :)
 		OpacityTarget			= .0					; How see-thru to be at peak of change
 		AwardXPForTriggering    	= 0
 		IgnoreFacingCheck		= Yes
	End

	Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy                     = Upgrade_DwarvenMithrilMail
        GetUpgradeCommandButtonName     = Command_WitchKingToggleMounted
    End
	;--------- MORGUL BLADE -----------------------------------------------------------------------------------
	;,; Added in v5.1

	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_WitchkingMorgulBlade
		SpecialPowerTemplate = SpecialAbilityMordorWitchkingMorgulBlade
		TriggeredBy = Upgrade_ObjectLevel4 ;Upgrade_WitchkingMorgulBlade
		ObeyRechageOnTrigger		= Yes
	End
	Behavior = SpecialPowerModule ModuleTag_WitchkingMorgulBladeStarter
		SpecialPowerTemplate		= SpecialAbilityMordorWitchkingMorgulBlade
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
		InitiateSound				= FellBeastVoiceAttack		;LurtzVoiceAttackCripplingStrike
		OnTriggerRechargeSpecialPower = SpecialAbilityWitchKingBlackDart
	End
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WitchkingMorgulBladeUpdate
		SpecialPowerTemplate    = SpecialAbilityMordorWitchkingMorgulBlade
		SkipContinue			= Yes

		UnpackTime				= 250
		PreparationTime			= 1
		PersistentPrepTime		= 500
		PackTime				= 100
		WhichSpecialWeapon		= 2

		AwardXPForTriggering	= 0
		StartAbilityRange		= 15.0
		MustFinishAbility	 = Yes

		SpecialWeapon			= MordorWitchkingMorgulBlade
	End
	Behavior = AutoAbilityBehavior ModuleTag_MorgulBladeAutoAbility
		SpecialAbility	= SpecialAbilityMordorWitchkingMorgulBlade
		ForbiddenStatus = INSIDE_GARRISON
		AllowSelf		= No
		Query			= 1 AOTR_MORGULBLADE_OBJECT_FILTER
	End
	;---------BLACK DART------------------------------------------------------------------------

	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BlackDartEnabler
		SpecialPowerTemplate	= SpecialAbilityWitchKingBlackDart
		TriggeredBy				= Upgrade_ObjectLevel4 ;Upgrade_LurtzCrippleTrigger
		ObeyRechageOnTrigger		= Yes
	End

	Behavior = SpecialPowerModule ModuleTag_BlackDartStarter
		SpecialPowerTemplate		= SpecialAbilityWitchKingBlackDart
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
;		InitiateSound				= LurtzVoiceAttackCripplingStrike
		OnTriggerRechargeSpecialPower = SpecialAbilityMordorWitchkingMorgulBlade
	End
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_BlackDartUpdate
		SpecialPowerTemplate    = SpecialAbilityWitchKingBlackDart
		SkipContinue			= Yes

		UnpackTime				= 1100	; Pull out arrow
		PreparationTime			= 1		; Quick shot
		PersistentPrepTime		= 500	; looping the quick shot
		PackTime				= 500	; back to idle
		MustFinishAbility		= Yes

		AwardXPForTriggering	= 0
		StartAbilityRange		= 200

		SpecialWeapon			= WitchKingBlackDart
		WhichSpecialWeapon		= 4
	;		RejectedConditions		= WEAPON_TOGGLE
	End

	;;; AUTO ABILITY MODULE ;;;
	Behavior = AutoAbilityBehavior ModuleTag_BlackDartAutoAbility
		SpecialAbility	= SpecialAbilityWitchKingBlackDart
		ForbiddenStatus = INSIDE_GARRISON ;;,;; This seems to prevent the ability from being used inside a tower
		MaxScanRange	= LURTZ_CRIPPLE_RANGE_ABILTY_START
		Query			= 1 AOTR_CRIPPLE_STRIKE_SPECIAL_OBJECT_FILTER ENEMIES ;;,;; CRIPPLE_STRIKE_OBJECT_FILTER ENEMIES
	End

	;---------SCREECH------------------------------------------------------------------------
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ScreechUnPause
		SpecialPowerTemplate		= SpecialAbilityScreech
		TriggeredBy					= Upgrade_ObjectLevel6 ;Upgrade_Screech
		ObeyRechageOnTrigger		= Yes
	End
	Behavior = SpecialPowerModule ModuleTag_Screech
		SpecialPowerTemplate		= SpecialAbilityScreech
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
	End
	Behavior = SpecialAbilityUpdate ModuleTag_ScreechUpdate
		SpecialPowerTemplate		= SpecialAbilityScreech
		UnpackTime					= 1000 ;;,;; 0
    PreparationTime			= 1 ;;,;;
		PackTime			= 1200  ;;,;;
		TriggerSound				= WitchKingScreechMS
	;;,;;	Instant						= Yes
		EffectRange					= 180
    CustomAnimAndDuration		= AnimState:SPECIAL_POWER_1 AnimTime:2200 ;;.;; Added for special power animation
	End
	Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityBehavior
  	SpecialAbility				= SpecialAbilityScreech ;;,;;
		ForbiddenStatus = INSIDE_GARRISON ;;,;;
		MaxScanRange				= 90  ;;,;;
		Query					= 10 ANY ENEMIES -STRUCTURE -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL -FS_BASE_DEFENSE	;;,;;
	End
;---------------------------------------------------------------------------------------------------------
;--------- CHILL OF ANGMAR ----------------------------------------------------


	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_RingOfAirEnabler
		SpecialPowerTemplate	= ElrondRingOfAir
		TriggeredBy				= Upgrade_ObjectLevel1
		ObeyRechageOnTrigger		= Yes
	End

	Behavior = SpecialPowerModule ModuleTag_CreateAHeroAthelas
		SpecialPowerTemplate	 = ElrondRingOfAir
		UpdateModuleStartsAttack = Yes
		StartsPaused			 = Yes
;	//		SetModelCondition		 = ModelConditionState:USER_2
		;SetModelConditionTime	 = 2.1
	End

	Behavior = ActivateModuleSpecialPower ModuleTag_CreateAHeroAthelasUpdate
		SpecialPowerTemplate = ElrondRingOfAir

		UnpackingVariation	 = 2

		StartAbilityRange	 = 200
		UnpackTime			 = 800 ;2000	 // Nothing to touching it
		PreparationTime		 = 0 ;0	 // touching	it to grabbing it
		PersistentPrepTime   = 0
		PackTime			 = 2600 ;1330	 // whacking	it to holding it nice
		; FreezeAfterTriggerDuration = 800
		AwardXPForTriggering = 0
		TriggerSpecialPower = ModuleTag_StrengthRemembered_OCL
	End

	Behavior = OCLSpecialPower ModuleTag_StrengthRemembered_OCL
		SpecialPowerTemplate = ElrondRingOfAir2
		OCL                  = OCL_WKChillofAngmar
		; TriggerFX			 = FX_TheodenShockwave ;FX_GenericGoodSummon
		CreateLocation       = USE_OWNER_OBJECT
		StartsPaused		 = Yes
		SetModelCondition        = ModelConditionState:USER_1
        SetModelConditionTime    = 8.1
	End

	; Behavior = OCLSpecialPower		ModuleTag_RingOfAir
		; SpecialPowerTemplate		= ElrondRingOfAir2
		; TriggerFX					= FX_ChillofAngmar
		; OCL							= OCL_WKChillofAngmar
		; CreateLocation				= CREATE_AT_LOCATION
		; UpdateModuleStartsAttack	= No
		; StartsPaused				= Yes
		; SetModelCondition		= ModelConditionState:RIDER7
		; SetModelConditionTime		= 2
	; End
	Behavior = AutoAbilityBehavior ModuleTag_RingofAirAutoAbility
		SpecialAbility	= ElrondRingOfAir
		ForbiddenStatus = INSIDE_GARRISON
		MaxScanRange	= 200
		Query		= 15 ANY +CAVALRY +INFANTRY -STRUCTURE -CASTLE_KEEP -BASE_FOUNDATION -MOVE_ONLY -DOZER -SUMMONED ALLIES
	End
;------------ OPEN IN THE NAME OF MORDOR --------------------------------------------------
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ShakeFoundationEnabler
		SpecialPowerTemplate = SpecialAbilityDwarvenGloinShakeFoundation
		TriggeredBy = Upgrade_ObjectLevel6
		ObeyRechageOnTrigger		= Yes
	End
	Behavior = SpecialPowerModule ModuleTag_ShakeFoundationStarter
		SpecialPowerTemplate      = SpecialAbilityDwarvenGloinShakeFoundation
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
;		InitiateSound				= UrshakVoiceCaveIn
	End
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_ShakeFoundationWeaponFireUpdate
		SpecialPowerTemplate    = SpecialAbilityDwarvenGloinShakeFoundation
		SpecialWeapon			= OpenInTheNameOfMordor
		WhichSpecialWeapon		= 3			; Corresponds to SPECIAL_WEAPON_TWO
		StartAbilityRange		= 100.0 ;15.0

		SkipContinue			= Yes
		UnpackTime				= 1000		;
		PackTime				= 2433		;
		MustFinishAbility		= Yes
	End
	Behavior = AutoAbilityBehavior ModuleTag_ShakeFoundationAutoAbility
		SpecialAbility			= SpecialAbilityDwarvenGloinShakeFoundation
		ForbiddenStatus = INSIDE_GARRISON ;;,;; This seems to prevent the ability from being used inside a tower
		Query					= 1 ANY ENEMIES +STRUCTURE -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL -UNATTACKABLE ;;,;; 1 ANY ENEMIES +STRUCTURE -UNATTACKABLE
		MaxScanRange			= 100
	End
	;---------HOUR OF THE WITCH KING---------------------------------------------------------
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_HOFTWEnabler
		SpecialPowerTemplate		= SpecialAbilityCurseEnemy
		TriggeredBy					= Upgrade_ObjectLevel8 ;Upgrade_HourOfTheWitchKing
 		ObeyRechageOnTrigger		= Yes
	End
	Behavior = SpecialPowerModule ModuleTag_HOFTW
		SpecialPowerTemplate		= SpecialAbilityCurseEnemy
		StartsPaused				= Yes
		UpdateModuleStartsAttack	= Yes
		InitiateSound				= FellBeastVoiceAttack
		AttributeModifier		= MordorWitchKingHotWK  ;;,;;
		AttributeModifierAffectsSelf	= Yes ;;,;;
	End

 	Behavior = CurseSpecialPower ModuleTag_HOFTWUPdate
    SpecialPowerTemplate		= SpecialAbilityCurseEnemy

    CursePercentage				= 100.0% ;//Curse the target's power by this amount (will not exceed maximum charge time)

		StartAbilityRange			= 300.0 ;;,;; 200.0
		CursedFX					= FX_SarumanDominateTargets
		TriggerFX					= FX_HotWKTriggerGlow ;;,;; FX_CreateaHeroCurse
		UnpackTime					= 1 ;,; 833 ;;,;; 2000
		PackTime              = 832 ;,; Added in v5.1
		PreparationTime				= 1 ;;,;; 1000
    PackTime			= 1233  ;;,;;
;;,;;		FreezeAfterTriggerDuration	= 2500 ; Hold AI for this long after we fire.
    CustomAnimAndDuration		= AnimState:SPECIAL_POWER_2 AnimTime:2067 ;;,;;
  End

	Behavior = AutoAbilityBehavior ModuleTag_HotWKAutoAbility ;;,;;
		SpecialAbility				= SpecialAbilityCurseEnemy
		MaxScanRange				= 280
    ForbiddenStatus = INSIDE_GARRISON
		Query						= 1 ANY ENEMIES +HERO -MONSTER -STRUCTURE -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL -FS_BASE_DEFENSE
	End
	;---------THIS IS MY HOUR---------------------------------------------------------
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_UnpauseLeadership2
        SpecialPowerTemplate = SpecialAbilityWordOfPower
        TriggeredBy = Upgrade_ObjectLevel10
		ObeyRechageOnTrigger		= Yes
    End
    Behavior = SpecialPowerModule ModuleTag_ThisIsMyHour
        SpecialPowerTemplate      = SpecialAbilityWordOfPower
        StartsPaused			= Yes
        AttributeModifier = ThisIsMyHour
        AttributeModifierRange = 50
        AttributeModifierAffectsSelf = Yes
    End
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_WordEnabler
		SpecialPowerTemplate = SpecialAbilityWordOfPower
		TriggeredBy = Upgrade_ObjectLevel10
		ObeyRechageOnTrigger		= Yes
	End
	Behavior = SpecialPowerModule ModuleTag_WordStarter
		SpecialPowerTemplate      = SpecialAbilityWordOfPower
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  	  = Yes
	End
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WordWeaponFireUpdate
		SpecialPowerTemplate    = SpecialAbilityWordOfPower
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes
		UnpackTime              = 600 ;1700
		PackTime                = 1700
		FreezeAfterTriggerDuration = 2500 ;2500
		AwardXPForTriggering    = 0
		StartAbilityRange		= 80.0
		SpecialWeapon			= WitchKingWordOfPower
	End
	Behavior = AutoAbilityBehavior ModuleTag_WoPAutoAbility
		SpecialAbility				= SpecialAbilityWordOfPower
		ForbiddenStatus = INSIDE_GARRISON
		MaxScanRange				= GANDALF_WORD_OF_POWER_RANGE
		Query						= 30 ALL ENEMIES -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL -FS_BASE_DEFENSE
	End
	
	Behavior = FireWeaponWhenDamagedBehavior ModuleTag_ReflectDamage
		StartsActive				= Yes
		Permanent 					= Yes
		ReactionWeaponPristine 		= WitchKingReflectWeapon
		ReactionWeaponDamaged		= WitchKingReflectWeapon
		ReactionWeaponReallyDamaged	= WitchKingReflectWeapon
		DamageTypes					= ALL -PIERCE -FLAME -MAGIC -FROST -STRUCTURAL -UNDEFINED -HERO_RANGED -POISON
		DamageAmount				= 1
	End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

	#include "..\..\..\includes\CaptureBuilding.inc"
	#include "..\..\..\aicoding\autoretreat6.inc"

	Behavior = AIUpdateInterface ModuleTag_AI
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		;AILuaEventsList = TrollFunctions
		AILuaEventsList = MordorWitchKingFunctions ;;.;; Added for 2.02
		BurningDeathTime = BURNINGDEATH_DURATION_INFANTRY
	End

	LocomotorSet
		Locomotor = NazgulLocomotor
		Condition = SET_NORMAL
		Speed     = NORMAL_EVIL_HERO_SPEED
	End

	LocomotorSet
		Locomotor = HeroHorseLocomotor
		Condition = SET_MOUNTED
		Speed     = NORMAL_MOUNTED_FAST_HORDE_SPEED
	End

	LocomotorSet
		Locomotor = BurningDeathLocomotorInfantry
		Condition = SET_BURNINGDEATH
		Speed	  = 75
	End

	Behavior = PhysicsBehavior ModuleTag_Physics
	End

	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes			= ALL 					;-KNOCKBACK
		SinkDelay			= 3000
		SinkRate			= 1.20     ; in Dist/Sec
		DestructionDelay	= 15000
		Sound 				= INITIAL FellBeastDieExplode
	End

;	Behavior = SlowDeathBehavior ModuleTag_07
;		; Same as normal death, but no sound (sound already played by SoundImpact = ... )
;		DeathTypes			= NONE +KNOCKBACK
;		SinkDelay			= 3000
;		SinkRate			= 1.20     ; in Dist/Sec
;		DestructionDelay	= 15000
;	End

	;--------- Ring Hunt -----------------------------------------------------------------------------------
	Behavior = SpecialEnemySenseUpdate ModuleTag_Ringhunters
        SpecialEnemyFilter = NONE +NeutralGollum_RingHero ENEMIES
        ScanRange          = 400
        ScanInterval       = 2000
    End

	Behavior = AttributeModifierAuraUpdate ModuleTag_LeadershipNine
		StartsActive	= Yes
		BonusName		= WKNazgulNineBonus
		RefreshDelay	= 2000
		Range			= 150
		ObjectFilter	= AOTR_NAZGUL_OBJECTFILTER ;NONE +MordorNazgul +MordorWitchKing +MordorFellBeast
	End

	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadershipCombinded
		SpecialPowerTemplate = SpecialAbilityFakeLeadership3
		TriggeredBy = Upgrade_ObjectLevel1
	End

	Behavior = SpecialPowerModule ModuleTag_MainLeadershipUpdateCombinded
		SpecialPowerTemplate      = SpecialAbilityFakeLeadership3
		UpdateModuleStartsAttack  = No
		StartsPaused = Yes
	End

	;///////////////////
	; AISpecialPowers
	;///////////////////

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive ;;,;; Changed for 3.0.1
		CommandButtonName = Command_SetStanceAggressive ;;,;; Changed for 3.0.1
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End


	Behavior = AISpecialPowerUpdate ToggleMountedAI
		CommandButtonName = Command_MountHorseBlackRider
		SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
	End

	Behavior = AISpecialPowerUpdate OpenInTheNameOfMordorAI
		CommandButtonName = Command_SpecialAbilityOpenInTheNameOfMordor
		SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER_STRUCTURES
	End

	Behavior = AISpecialPowerUpdate HourOfTheWitchKingAI
		CommandButtonName = Command_HourOfTheWitchKing
		SpecialPowerAIType = AI_SPECIAL_POWER_RANGED_AOE_ATTACK ;;,;; AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
		SpecialPowerAIType = AI_SPELLBOOK_ARMY_BREAKER ;;,;; Added for 2.5
		SpecialPowerRadius = 200 ;;,;; Added for 3.0.1
	End

	Behavior = AISpecialPowerUpdate HourOfTheWitchKingAI2
		CommandButtonName = Command_SpecialAbilityWitchKingWordOfPower
		SpecialPowerAIType = AI_SPECIAL_POWER_RANGED_AOE_ATTACK ;;,;; AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
		SpecialPowerAIType = AI_SPELLBOOK_ARMY_BREAKER ;;,;; Added for 2.5
		SpecialPowerRadius = 200 ;;,;; Added for 3.0.1
	End
	
	Behavior = AISpecialPowerUpdate ChillOfAngmarAI
		CommandButtonName = Command_HourOfTheWitchKingDualButton
		SpecialPowerAIType = AI_SPELLBOOK_ASSIST_BATTLE_BUFF
		SpecialPowerRadius = 100
	End	

	Behavior = AISpecialPowerUpdate MorgulBladeAI
		CommandButtonName = Command_MordorWitchkingMorgulBlade
		SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
	End

	;Behavior = ExperienceLevelCreate ModuleTag_LevelBonus
	;	LevelToGrant	= 5
	;	MPOnly			= Yes
	;End

	Geometry			= CYLINDER
	GeometryMajorRadius = 8.0
	GeometryHeight		= 16.0
	GeometryIsSmall		= Yes

	Shadow				= SHADOW_DECAL
	ShadowSizeX			= 19
	ShadowSizeY			= 19
	ShadowTexture		= ShadowI
End

;------------------------------------------------------------------------
ChildObject MordorWitchKingOnFellBeastUpgrade MordorWitchKing

	CommandSet = MordorWitchKingFBUpgradeCommandSet

 	Behavior = SpecialPowerModule ModuleTag_HorseToggleStarter
 		SpecialPowerTemplate		= SpecialAbilityToggleMounted
 		UpdateModuleStartsAttack	= Yes
 		StartsPaused			= No
		;InitiateSound			= FellBeastVoiceMove
 	End

	Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
 		SpecialPowerTemplate    	= SpecialAbilityToggleMounted
		MountedTemplate = MordorWitchKingOnFellBeast
		SynchronizeTimerOnSpecialPower = SpecialAbilityCurseEnemy ElrondRingOfAir SpecialAbilityDwarvenGloinShakeFoundation SpecialAbilityScreech SpecialAbilityMordorWitchkingMorgulBlade SpecialAbilityWordOfPower SpecialAbilityWitchKingBlackDart
 		;SynchronizeTimerOnSpecialPower 	= SpecialAbilityBlackRiderMorgulBlade SpecialAbilityScreech
 		UnpackTime             		= 2000
 		PreparationTime         	= 0					; none, cause we hop onto our mount in no time at all :)
 		PackTime                	= 0 					; none, cause we hop onto our mount in no time at all :)
 		OpacityTarget			= .0					; How see-thru to be at peak of change
 		AwardXPForTriggering    	= 0
 		IgnoreFacingCheck		= Yes
		;TriggerSound			= FellBeastVoiceMove
	End

	Behavior = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim					= USER_1				;Model condition to play when killed-to-respawn
		DeathFX						= FX_WitchKingDeath		;FXList to play when killed-to-respawn
		DeathAnimationTime			= 5133					;How long DeathAnim will take.
;		InitialSpawnFX				= FX_WitchKingInitialSpawn
		RespawnFX					= FX_WitchKingRespawn		;FXList to play when respawning.
		RespawnAnim					= LEVELED				;Animation to play when respawning.
		RespawnFX					= FX_Resurrection		;FXList to play when respawning.
		RespawnAnimationTime		= 2000					;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage					= HiWitchKingResNew
		RespawnAsTemplate			= MordorWitchKing

		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
;;,;;		RespawnRules =	AutoSpawn:No	Cost:2250	Time:120000	Health:100%	; DEFAULT VALUES

;;,;; Version 2.1 Respawn Rules
		RespawnRules =			AutoSpawn:No	Cost:4000		Time:HERO_RESPAWNTIME_TIER_5		Health:100% ;Cost:1200
		RespawnEntry =	Level:2				Cost:4250		Time:HERO_RESPAWNTIME_TIER_5
		RespawnEntry =	Level:3				Cost:4500		Time:HERO_RESPAWNTIME_TIER_5
		RespawnEntry =	Level:4				Cost:4750		Time:HERO_RESPAWNTIME_TIER_5
		RespawnEntry =	Level:5				Cost:5000		Time:HERO_RESPAWNTIME_TIER_5
		RespawnEntry =	Level:6				Cost:5250		Time:HERO_RESPAWNTIME_TIER_5
		RespawnEntry =	Level:7				Cost:5500		Time:HERO_RESPAWNTIME_TIER_5
		RespawnEntry =	Level:8				Cost:5750		Time:HERO_RESPAWNTIME_TIER_5
		RespawnEntry =	Level:9				Cost:6000		Time:HERO_RESPAWNTIME_TIER_5
		RespawnEntry =	Level:10			Cost:6250		Time:HERO_RESPAWNTIME_TIER_5
		End

End
;--------------------

ChildObject MordorWitchKing_Mounted MordorWitchKing

	; Same except without HERO
	KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY MONSTER  SCARY ARMY_SUMMARY ; PATH_THROUGH_INFANTRY

End

;------------------------------------------------------------------------------
; aka Witch King, WitchKingMordor, MordorFellBeast
ChildObject MordorWitchKing_WOTR MordorWitchKing
	;CommandSet = MordorWitchKingCommandSet_WOTR
	;Behavior = CommandSetUpgrade ModuleTag_LevelUpforPower
	;	TriggeredBy		= Upgrade_ObjectLevel8
	;	CommandSet		= MordorWitchKingLevel8CommandSet_WOTR
	;End
	;RemoveModule ModuleTag_HorseToggleStarter
	;RemoveModule ModuleTag_HorseToggle
	Behavior = GrantUpgradeCreate ModuleTag_GiveUpgrade
		UpgradeToGrant			= Upgrade_WOTRHero8
	End
	Behavior = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim					= DYING					;Model condition to play when killed-to-respawn
		DeathFX						= FX_WitchKingDeath		;FXList to play when killed-to-respawn
		DeathAnimationTime			= 5133					;How long DeathAnim will take.
		RespawnAnim					= LEVELED				;Animation to play when respawning.
		RespawnFX					= FX_Resurrection		;FXList to play when respawning.
		RespawnAnimationTime		= 2000					;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage					= HiWitchKingResNew

		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
;;,;;		RespawnRules =	AutoSpawn:No	Cost:3500	Time:120000	Health:100%		;DEFAULT VALUES     ;Cost:3750

;;,;; Version 2.1 Respawn Rules
		RespawnRules =			AutoSpawn:No	Cost:3750		Time:HERO_RESPAWNTIME_TIER_5		Health:100%		;DEFAULT VALUES
	End
	Behavior = ExperienceLevelCreate ModuleTag_LevelBonus
		LevelToGrant	= 1
		MPOnly			= Yes
	End
End

ChildObject MordorWitchKing_WOTR_LAS MordorWitchKing
	CommandPoints = 30
	KindOf = +MP_COUNT_FOR_VICTORY
	Behavior = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim					= DYING					;Model condition to play when killed-to-respawn
		DeathFX						= FX_WitchKingDeath		;FXList to play when killed-to-respawn
		DeathAnimationTime			= 5133					;How long DeathAnim will take.
		RespawnAnim					= LEVELED				;Animation to play when respawning.
		RespawnFX					= FX_Resurrection		;FXList to play when respawning.
		RespawnAnimationTime		= 2000					;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage					= HiWitchKingResNew

		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
;;,;;		RespawnRules =	AutoSpawn:No	Cost:3500	Time:120000	Health:100%		;DEFAULT VALUES     ;Cost:3750

;;,;; Version 2.1 Respawn Rules
		RespawnRules =			AutoSpawn:No	Cost:3750		Time:HERO_RESPAWNTIME_TIER_5		Health:100%		;DEFAULT VALUES
	End
	Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
 		SpecialPowerTemplate    = SpecialAbilityToggleMounted
		TriggerInstantlyOnCreate = No
		SynchronizeTimerOnSpecialPower = SpecialAbilityCurseEnemy ElrondRingOfAir SpecialAbilityDwarvenGloinShakeFoundation SpecialAbilityScreech SpecialAbilityMordorWitchkingMorgulBlade SpecialAbilityWordOfPower SpecialAbilityWitchKingBlackDart
 		UnpackTime              = 2000
 		PreparationTime         = 1
 		PersistentPrepTime      = 250
 		PackTime                = 2000					; none, cause we hop onto our mount in no time at all :)
 		OpacityTarget			= .3					; How see-thru to be at peak of change
 		AwardXPForTriggering    	= 0
 		IgnoreFacingCheck		= Yes
	End
	Behavior = ExperienceLevelCreate ModuleTag_LevelBonus
		LevelToGrant	= 10
		MPOnly			= No
	End
End

ChildObject MordorWitchKingOnFellBeast_WOTR MordorWitchKingOnFellBeast
	;---------DISMOUNT------------------------------------------------------------------------
 	Behavior = SpecialPowerModule ModuleTag_DismountStarter
 		SpecialPowerTemplate		= SpecialAbilityToggleMountedFromFellBeast
 		UpdateModuleStartsAttack	= Yes
 		StartsPaused				= No
		InitiateSound				= FellBeastVoiceMove
 	End
	Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Dismount
 		SpecialPowerTemplate    = SpecialAbilityToggleMountedFromFellBeast
 		StartAbilityRange		= 50.0									; pretty small so we are forced to the right place.
 		MountedTemplate			= MordorWitchKing_WOTR
 		SynchronizeTimerOnSpecialPower = SpecialAbilityCurseEnemy ElrondRingOfAir SpecialAbilityDwarvenGloinShakeFoundation SpecialAbilityScreech SpecialAbilityWitchKingBlackDart
 		UnpackTime              = 0
 		PreparationTime         = 1
; 		PersistentPrepTime      = 250
 		PackTime                = 0
 		OpacityTarget			= 1										; How see-thru to be at peak of change
 		AwardXPForTriggering    = 0
 		IgnoreFacingCheck		= Yes
	End
	Behavior = GrantUpgradeCreate ModuleTag_GiveUpgrade
		UpgradeToGrant			= Upgrade_WOTRHero8
	End
	Behavior = ExperienceLevelCreate ModuleTag_LevelBonus
		LevelToGrant	= 1
		MPOnly			= Yes
	End
End


Object ChillofAngmarPing

	Draw = W3DScriptedModelDraw ModuleTag_DrawMist
		DefaultModelConditionState
			Model				= exfrost2_skn
			ParticleSysBone		= NONE ChillofAngmarWhirl Offset = X:0.0 Y:0.0 Z:0.0
			; ParticleSysBone		= NONE RingofAirWindPulseFX Offset = X:0.0 Y:0.0 Z:0.0

			ParticleSysBone     = NONE ChillofAngmarTrailEmbers
			; ParticleSysBone		= NONE ChillofAngmarMist
			ParticleSysBone     = NONE ChillofAngmarStartEmbers

			ParticleSysBone     = NONE ChillofAngmarIceWallMist
			ParticleSysBone		= NONE ChillofAngmarIceWallMist02
		End
	End


	EvaEnemyObjectSightedEvent = None  ; Not a real unit

	; ***DESIGN parameters ***
	VisionRange     = 0.0
	EditorSorting   = SYSTEM
	KindOf			= NO_COLLIDE UNATTACKABLE IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION MOVE_ONLY
	ThreatLevel		= 0

	SoundAmbient 			= ChillofAngmarAmbientWind

	; *** ENGINEERING Parameters ***
	Body = ActiveBody ModuleTag_01
		MaxHealth		= 999999
		InitialHealth	= 999999
	End

	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= 30000						; 60 seconds
		MaxLifetime		= 30000
	End

	Behavior = AIUpdateInterface	ModuleTag_AIUpdateInterface
		AutoAcquireEnemiesWhenIdle = No
		;// MoodAttackCheckRate		= 250
	End

	; LocomotorSet
	; 	Locomotor = InvisiblePingLocomotor
	; 	Condition = SET_NORMAL
	; 	Speed	 = 1000
	; End

	Behavior = AttachUpdate ModuleTag_Attach
		ObjectFilter = NONE +MordorWitchKing +MordorWitchKingOnFellBeastUpgrade +MordorWitchKing_WOTR +MordorWitchKing_WOTR_LAS SAME_PLAYER
		ScanRange = 300
		AlwaysTeleport = No
		AnchorToTopOfGeometry = Yes
	End

	Behavior = FireWeaponUpdate ModuleTag_KhamulField
			FireWeaponNugget
				WeaponName = ChillofAngmarWeapon
				FireDelay = 0
				OneShot = No
			End
	End

End

Object ChillofAngmarPingLvl5

	Draw = W3DScriptedModelDraw ModuleTag_DrawMist
		DefaultModelConditionState
			Model				= exfrost2_skn
			ParticleSysBone		= NONE ChillofAngmarWhirl Offset = X:0.0 Y:0.0 Z:0.0
			; ParticleSysBone		= NONE RingofAirWindPulseFX Offset = X:0.0 Y:0.0 Z:0.0

			ParticleSysBone     = NONE ChillofAngmarTrailEmbers
			; ParticleSysBone		= NONE ChillofAngmarMist
			ParticleSysBone     = NONE ChillofAngmarStartEmbers

			ParticleSysBone     = NONE ChillofAngmarIceWallMist
			ParticleSysBone		= NONE ChillofAngmarIceWallMist02
		End
	End


	EvaEnemyObjectSightedEvent = None  ; Not a real unit

	; ***DESIGN parameters ***
	VisionRange     = 0.0
	EditorSorting   = SYSTEM
	KindOf			= NO_COLLIDE UNATTACKABLE IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION MOVE_ONLY
	ThreatLevel		= 0

	SoundAmbient 			= ChillofAngmarAmbientWind

	; *** ENGINEERING Parameters ***
	Body = ActiveBody ModuleTag_01
		MaxHealth		= 999999
		InitialHealth	= 999999
	End

	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= 30000						; 60 seconds
		MaxLifetime		= 30000
	End

	Behavior = AIUpdateInterface	ModuleTag_AIUpdateInterface
		AutoAcquireEnemiesWhenIdle = No
		;// MoodAttackCheckRate		= 250
	End

	; LocomotorSet
	; 	Locomotor = InvisiblePingLocomotor
	; 	Condition = SET_NORMAL
	; 	Speed	 = 1000
	; End

	Behavior = AttachUpdate ModuleTag_Attach
		ObjectFilter = NONE +MordorWitchKing +MordorWitchKingOnFellBeastUpgrade +MordorWitchKing_WOTR +MordorWitchKing_WOTR_LAS SAME_PLAYER
		ScanRange = 300
		AlwaysTeleport = No
		AnchorToTopOfGeometry = Yes
	End

	Behavior = FireWeaponUpdate ModuleTag_KhamulField
			FireWeaponNugget
				WeaponName = ChillofAngmarWeaponLvl5
				FireDelay = 0
				OneShot = No
			End
	End

End

Object ChillofAngmarFear

	Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model = None
		End
	End

	KindOf = IMMOBILE UNATTACKABLE

	Body = ActiveBody ModuleTag_MakesKillWork
		MaxHealth = 1
	End

	Behavior = LifetimeUpdate ModuleTag_HatchTrigger
		MinLifetime = 10000
		MaxLifetime = 10000
	End

	Behavior = AIUpdateInterface ModuleTag_03
		AILuaEventsList				= WKTerrorEggFunctions
	End

	Behavior = SpecialPowerModule ModuleTag_HornStarter
		SpecialPowerTemplate		= SpecialAbilityHornOfGondor
		UpdateModuleStartsAttack	= Yes
		AntiCategory			= LEADERSHIP
		AttributeModifier		= BoromirGondorHornAntiCategory
		AttributeModifierRange		= 70.0
		StartsPaused			= No
		TriggerFX				= FX_ChillOfAngmarScreechBlast
	End
	Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_HornUpdate
		SpecialPowerTemplate    = SpecialAbilityHornOfGondor
		UnpackTime              = 100
		PreparationTime         = 1
		PersistentPrepTime      = 160
		PackTime                = 1666
		AwardXPForTriggering    = 0
	End

	;Behavior = RadiateFearUpdate ModuleTag_DreadVisageFear
	;;	InitiallyActive						= Yes
	;	GenerateTerror						= Yes
		;GenerateFear						= Yes
	;	EmotionPulseRadius					= 150
	;	EmotionPulseInterval				= 100
	;End

	Behavior = SlowDeathBehavior ModuleTag_HatchProcess
		DestructionDelay = 0
		;FX = INITIAL FX_ChillOfAngmarScreechBlast
	End

End

Object OpenInTheNameOfMordorPing

	Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model = None
			; ParticleSysBone		= NONE HarbingerRotMist
			; ParticleSysBone		= NONE HarbingerRotBlightSwampCloud
			; ParticleSysBone		= NONE HarbingerRotBlightSwampCloud02
			; ParticleSysBone		= NONE HarbingerRotBlightFlies
		End
	End

	KindOf = INERT IMMOBILE UNATTACKABLE

	Body = ImmortalBody ModuleTag_MakesKillWork
		MaxHealth = 1
	End

	Behavior = DeletionUpdate ModuleTag_HatchTrigger
		MinLifetime = 20000
		MaxLifetime = 20000
	End

  	Behavior = SlowDeathBehavior ModuleTag_FadeDeath
		DeathTypes = ALL
		FadeDelay = 0
		FadeTime = 0
		DestructionDelay = 0
	End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP		= Yes
	End

	Behavior = QueueProductionExitUpdate QueueProductionModuleTag
		UnitCreatePoint			= X:0.0 Y:0.0 Z:0.0
		NaturalRallyPoint		= X:0.0 Y:0.0 Z:0.0
		ExitDelay				= STANDARD_HORDE_EXIT_DELAY
		UseReturnToFormation	= No
	End

	Behavior = FireWeaponUpdate ModuleTag_KhamulField
			FireWeaponNugget
				WeaponName = OpenInTheNameOfMordorDOT ; KhamulFieldWeapon
				FireDelay = 200
				OneShot = No
			End
	End

	Behavior = SpawnBehavior ModuleTag_SpawnWraiths
		SpawnNumber			= 3
		InitialBurst		= 3
		SpawnTemplateName	= OpenInTheNameOfMordorWraith
		SpawnReplaceDelay	= 10000
		CanReclaimOrphans	= No
	End


End

Object MorgulBladeCurse

	Draw = W3DScriptedModelDraw ModuleTag_Draw
		DefaultModelConditionState
			Model = None
		End
	End

	KindOf = UNATTACKABLE

	Body = ActiveBody ModuleTag_MakesKillWork
		MaxHealth = 1
	End

	CommandSet			= WKBladeCommandSet

	Behavior = LifetimeUpdate ModuleTag_HatchTrigger
		MinLifetime = 2000
		MaxLifetime = 2000
	End

	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes
		MoodAttackCheckRate        = 100
	End
	LocomotorSet
		Locomotor = PatrolLocomotor
		Condition = SET_NORMAL
		Speed     = 60
	End
	Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityBehavior
		SpecialAbility = SpecialAbilityCurseEnemy_Wormtongue
		ForbiddenStatus = INSIDE_GARRISON
		Query = 1 ANY -MordorFellBeast -MordorFellBeastInterface -UvathaFellBeast -AkhorahilFellBeast -GondorGwaihir -ElvenGwaihir_Summoned -GondorGwaihir_Summoned -ElvenFortressEagle -Drogoth -DwarvenRoac -DwarvenArcah -MordorWitchKingOnFellBeast -SpellBookDragonStrikeDragon -KhamulFellBeast -MorgomirFellBeast -EagleSummoned_NotGwaihir -GondorGwaihirHero_Summoned -MordorFellBeast_Summoned -KhamulMounted -MordorMorgromirMounted -MordorWitchKingOnFellBeast_WOTR -WildSmaug +HERO ENEMIES
		MaxScanRange = 50
		StartsActive = Yes
	End
	Behavior = SpecialPowerModule ModuleTag_CurseEnemySpecialPowerModule_Level1
		SpecialPowerTemplate	 = SpecialAbilityCurseEnemy_Wormtongue
		StartsPaused			 = No
		UpdateModuleStartsAttack = Yes
	;	//InitiateSound			 = CaH_CurseEnemy
	End

	Behavior = CurseSpecialPower ModuleTag_CurseEnemySpecialPower_Level1
		SpecialPowerTemplate		= SpecialAbilityCurseEnemy_Wormtongue

		CursePercentage				= 100.0% ;33.33% //Curse the target's power by this amount (will not exceed maximum charge time)

		UnpackingVariation			= 2
		StartAbilityRange			= 50.0 ;;,;; 200.0

		;CursedFX					= FX_BorderGuardJudgementTargets
		;TriggerFX					= FX_BorderGuardJudgementHeroCurse

		UnpackTime					= 1
		PreparationTime				= 1
		FreezeAfterTriggerDuration	= 2500 // Hold AI for this long after we fire.
	End


	Behavior = SlowDeathBehavior ModuleTag_HatchProcess
		DestructionDelay = 0
	End

End

;-----------------------------------------------------------------

Object OpenInTheNameOfMordorWraith
	; *** ART Parameters ***

	SelectPortrait = UPLesserWight
	ButtonImage  =  BCWightLair_BarrowWight

	Draw = W3DScriptedModelDraw ModuleTag_Draw
  	  OkToChangeModelColor = Yes
			GlowEnabled = Yes;
			GlowEmissive = No;
		DefaultModelConditionState
			Model               = mubwight_skn
			Skeleton            = KUKarsh_SKL
            ParticleSysBone = NONE WTrails02 FollowBone:no
			ParticleSysBone     = None RingWraithFlare
			ParticleSysBone     = None RingWraithWindIdle
 		End


 		; ------------------------ Wight Anims -------------------------

		AnimationState							= FREEFALL
			Animation							= FLYA
				AnimationName					= KUKarsh_FLYA
				AnimationMode					= LOOP
				AnimationBlendTime				= 5
			End
		End

		;//Normal Swipe Attack
		AnimationState        = FIRING_OR_PREATTACK_A
			Animation           = ATKA
				AnimationName     = KUKarsh_ATKA
				AnimationMode     = ONCE
				UseWeaponTiming	  = Yes
			End
			Animation           = ATKB
				AnimationName     = KUKarsh_ATKB
				AnimationMode     = ONCE
				UseWeaponTiming	  = Yes
			End
			Animation           = ATKC
				AnimationName     = KUKarsh_ATKC
				AnimationMode     = ONCE
				UseWeaponTiming	  = Yes
			End
			StateName           = Attack
		End

		AnimationState        = MOVING
			Animation           = RUNA
				AnimationName     = KUKarsh_RUNA
				AnimationMode     = LOOP
			End
			Flags               = RANDOMSTART
		End

		AnimationState        = SPECIAL_WEAPON_ONE
			Animation           = Whisper
				AnimationName     = KUKarsh_SPCA
				AnimationMode     = ONCE
;				UseWeaponTiming	  = Yes
			End
		End
		AnimationState							= SPLATTED
			Animation							= LNDA
				AnimationName					= KUKarsh_LNDA
				AnimationMode					= ONCE
			End
		End

		AnimationState        = DYING DEATH_3
			Animation           = GUBoromir_DTHA
				AnimationName     = KUKarsh_IDLB
				AnimationMode     = ONCE
			End
		End

		AnimationState = DYING
			Animation
				AnimationName = KUKarsh_DTHA
			    AnimationMode = ONCE
				AnimationPriority = 1
			End

			Animation
				AnimationName = KUKarsh_DTHB
			    AnimationMode = ONCE
				AnimationPriority = 1
			End
		End

		AnimationState        = STUNNED_STANDING_UP
			Animation           = GTPA
				AnimationName     = KUKarsh_GTPA
				AnimationMode     = ONCE
			End
		End

		AnimationState        = STUNNED
			Animation           = LNDA
				AnimationName     = KUKarsh_LNDA
				AnimationMode     = ONCE
			End
		End

		; READY IDLE
		AnimationState        = EMOTION_ALERT
			Animation           = ALERT_1
				AnimationName     = KUKarsh_IDLA
				AnimationMode     = LOOP ;ONCE
			End
;			Flags               = RESTART_ANIM_WHEN_COMPLETE ; acts like an idle animation & keeps running the animations.
		End

		; --------- Selected Anims and Transitions
		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	KUKarsh_ATNA
				AnimationMode			=	ONCE
			End
		End

		TransitionState					=	TRANS_Selected_To_Idle
			Animation					=	ATNC
				AnimationName			=	KUKarsh_ATNC
				AnimationMode			=	ONCE
			End
		End

		AnimationState				= LEVELED 						; This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= KUKarsh_CHRA
				AnimationMode		= ONCE
			End
		End

        AnimationState = RAISING_FLAG ;;,;; fixes freeze
            ShareAnimation = Yes
            Animation = CHRA
                AnimationName = KUKarsh_CHRA
                AnimationMode = ONCE
                AnimationSpeedFactorRange = 0.9 1.1
            End
            Animation = CHRB
                AnimationName = KUKarsh_CHRB
                AnimationMode = ONCE
                AnimationSpeedFactorRange = 0.9 1.1
            End
            Flags = RESTART_ANIM_WHEN_COMPLETE
        End

		AnimationState				=	SELECTED
			StateName				=	Selected
			SimilarRestart			=   Yes
			Animation				=	ATNB
				AnimationName		=	KUKarsh_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
			EndScript
		End

		; --------- Hit Reactions ------------
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = KUKarsh_HITA
				AnimationMode = ONCE
			End
		End

		;-emotions--

		AnimationState							= EMOTION_TAUNTING
			Animation							= TNTA
				AnimationName					= KUKarsh_TNTA
				AnimationMode					= LOOP
			End
		End

		AnimationState							= EMOTION_CELEBRATING
			Animation                           = CHRA
				AnimationName					= KUKarsh_CHRA
				AnimationMode					= ONCE
			End
		End

 		IdleAnimationState
			StateName				= Idle
			Animation
				AnimationName       = KUKarsh_IDLB
				AnimationPriority	= 4
				AnimationBlendTime	= 15
				AnimationMode       = ONCE
			End
			Animation
				AnimationName       = KUKarsh_IDLC
				AnimationPriority	= 1
				AnimationBlendTime	= 15
				AnimationMode       = ONCE
			End
			Animation
				AnimationName       = KUKarsh_IDLD
				AnimationPriority = 1
				AnimationBlendTime	= 15
				AnimationMode       = ONCE
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") end
			EndScript
		End

	End

	; ---------------------------- End Wight Anims --------------------------------

	; ***DESIGN parameters ***
	Side				= Neutral
	EditorSorting		= UNIT
	ThreatLevel			= 1.0
	VisionRange			= 175.0
	ShroudClearingRange	= 200.0
	DisplayName			= OBJECT:BarrowWight
	CrushableLevel		= 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	BuildCost			= 0
	BuildTime			= 0
	CommandPoints 		= 0
	TransportSlotCount	= TRANSPORTSLOTCOUNT_UNIT

	WeaponSet
		Conditions			= None
		Weapon				= PRIMARY    OpenInTheNameOfMordorWraithWeapon
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	ArmorSet
		Conditions      = None
		Armor           = CreepArmor
		DamageFX        = NormalDamageFX
	End

	; *** AUDIO Parameters ***;

	VoiceAttack				= BarrowWightVoxAttack
	VoiceGuard				= BarrowWightVoxAttack
	VoiceCreated			= EVA:BarrowWightCreated
	VoiceCreated			= +SOUND:BarrowWightVoxCreated
	VoiceFullyCreated		= EVA:BarrowWightCreated
	VoiceFullyCreated		= +SOUND:BarrowWightVoxCreated
	VoiceMove				= BarrowWightVoxSelect
	VoicePriority			= 15
	VoiceSelect				= BarrowWightVoxSelect

	SoundAmbient			= BarrowWightAmbienceMS
	SoundImpact				= ImpactHorse
	;SoundMoveStart			= BarrowWightMoveStart

	UnitSpecificSounds
		VoiceGarrison						= BarrowWightVoxSelect
		VoiceEnterUnitElvenTransportShip	= BarrowWightVoxSelect
		VoiceEnterUnitEvilMenTransportShip	= BarrowWightVoxSelect
		VoiceEnterUnitMordorMumakil			= BarrowWightVoxSelect
		VoiceEnterUnitSlaughterHouse		= BarrowWightVoxSelect
		VoiceInitiateCaptureBuilding		= BarrowWightVoxSelect
	End

	#include "..\..\..\includes\StandardHordeEvaEvents.inc"

	; *** ENGINEERING Parameters ***

	RadarPriority	= UNIT
	KindOf			= PRELOAD MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT ENVIRONMENT SELECTABLE SCARY SUMMONED
	CommandSet		= CreepCommandSet

	Behavior = RadiateFearUpdate ModuleTag_GoldenArrowDaylightUpdate
		EmotionPulseRadius			= 200
		EmotionPulseInterval		= 1000
		GenerateFear				= Yes
		InitiallyActive				= Yes
		VictimFilter				= ALL ENEMIES
	End

	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = FighterHorde
    End

	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate			= 500
		MaxCowerTime				= 7500
		MinCowerTime				= 5000
		AILuaEventsList				= BarrowWightFunctions
	End

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		AddEmotion	=	Terror_Base
		AlwaysAfraidOf			= NONE +CloudBreakSunbeam +SunflareSunbeam
		AddEmotion	=	Alert_Base
		IgnoreVeterancy			= Yes
	End

	Behavior = SlavedUpdate ModuleTag_Slave
		GuardMaxRange		= 200.0
		GuardWanderRange	= 100.0
		DieOnMastersDeath		= Yes
		MarkUnselectable		= Yes
	End

	LocomotorSet
		Locomotor = PatrolLocomotor
		Condition = SET_NORMAL
		Speed     = 50 ;;,;; 25
	End

	Body = ActiveBody ModuleTag_Body
		MaxHealth = 300
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End

	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes			= ALL
		SinkDelay			= 0
		SinkRate			= -2.0     ; in Dist/Sec
		DestructionDelay	= 3000
		FX					= INITIAL FX_SmallSpiderDie
		Sound				= INITIAL BarrowWightVoxDie
	End

	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
	// This one displays the timer, but the one in the uint does the work
		MinLifetime		= 15000
		MaxLifetime		= 15000
		DeathType		= FADED
	End

	Behavior = SlowDeathBehavior ModuleTag_FadeDeath
		DeathTypes			= NONE +FADED
		FadeDelay			= 0
		FadeTime			= 5000
		DestructionDelay	= 5000
        DeathFlags			= DEATH_3
		Sound = INITIAL SpellGenericUnsummonFasterMS
	End


	Behavior = SquishCollide ModuleTag_06
		;nothing
	End

	Geometry			= CYLINDER
	GeometryMajorRadius = 10.0
	GeometryHeight		= 30.0
	GeometryIsSmall		= No

	Shadow				= SHADOW_VOLUME
	  Shadow = SHADOW_DECAL
	  ShadowSizeX = 55
	  ShadowSizeY = 30
	  ShadowOffsetX = -8
	  ShadowTexture = ShadowI

End
