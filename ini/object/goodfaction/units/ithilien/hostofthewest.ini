;------------------------------------------------------------------------------
; Angmar Thrall Master
Object HostOfTheWestGandalf
  ; *** ART Parameters ***

	SelectPortrait = UPGondorGandalfNew
	ButtonImage = HIGandalfnew

	Draw = W3DScriptedModelDraw ModuleTag_01
		GlowEnabled = No
		GlowEmissive = No
		OkToChangeModelColor = Yes
		StaticModelLODMode = No
		ExtraPublicBone = STAFF
		ExtraPublicBone = B_SWORDBONE
		ExtraPublicBone = PASSENGERBONE
		DependencySharedModelFlags = TURN_LEFT_HIGH_SPEED TURN_RIGHT_HIGH_SPEED MOVING ACCELERATE DECELERATE TURN_LEFT TURN_RIGHT ATTACKING BACKING_UP
		DefaultModelConditionState
			Model               = gugandalfn_skna
			WeaponLaunchBone    = TERTIARY STAFF
		End
		IdleAnimationState
			StateName = Idle
			Animation = Foot_IDLB
				AnimationName       = GUGandalfG_SKL.gugandalfN_idlb
				AnimationMode       = ONCE
				AnimationPriority   = 20
			End
			Animation = Foot_IDLC
				AnimationName       = GUGandalfG_SKL.gugandalfN_idlc
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			; Animation = Foot_IDLD
				; AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLD
				; AnimationMode       = ONCE
				; AnimationPriority   = 1
			; End
			; Animation = Foot_IDLE
				; AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLE
				; AnimationMode       = ONCE
				; AnimationPriority   = 2
			; End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
				CurDrawableHideSubObject("STAFF_LIGHT")
			EndScript
		End
		AnimationState				=	MOUNTED STUNNED_FLAILING
			Animation				=	JustDie
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_FLYB
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	MOUNTED DYING SPLATTED
			Animation				=	Land
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_LNDA
				AnimationMode		=	ONCE
			End
		End
		AnimationState				=	MOUNTED DYING
			Animation				=	JustDie
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_DIEA
				AnimationMode		=	ONCE
			End
		End
		AnimationState				=	MOUNTED STUNNED_STANDING_UP
			Animation				=	StandUp
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_GTPA
				AnimationMode		=	ONCE
			End
		End
		AnimationState				=	MOUNTED STUNNED
			Animation				=	Land
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_LNDA
				AnimationMode		=	ONCE
			End
		End
		AnimationState						= PARALYZED MOUNTED
			Animation
				AnimationName				= GUGdfHrs_SKL.GUGdfHrs_IDLA
				AnimationMode				= LOOP
			End
		End
		AnimationState      = STUNNED_FLAILING
			Animation = StunnedFlail
				AnimationName         = GUGandalfG_SKL.GUGandalfG_FLYA
				AnimationMode     = LOOP
			End
		End
		AnimationState      = DYING SPLATTED
			Animation = Stunned
				AnimationName         = GUGandalfG_SKL.GUGandalfG_LNDA
				AnimationMode     = ONCE
			End
		End
		AnimationState        = DYING AFLAME
			Animation = DieAflame
				AnimationName           = GUGandalfG_SKL.GUGandalfG_MFDA
				AnimationMode       = LOOP
			End
		End
		AnimationState        = DYING
			Animation = Die
				AnimationName           = GUGandalfG_SKL.GUGandalfG_DIEB
				AnimationMode       = ONCE
			End
		End
		AnimationState        = STUNNED_STANDING_UP
			Animation           = GUGandalfG_GTPA
				AnimationName     = GUGandalfG_SKL.GUGandalfG_GTPA
				AnimationMode     = ONCE
			End
		End
		AnimationState      = STUNNED
			Animation = Stunned
				AnimationName         = GUGandalfG_SKL.GUGandalfG_LNDA
				AnimationMode     = ONCE
			End
		End
		AnimationState						= PARALYZED
			Animation
				AnimationName				= GUGandalfG_SKL.gugandalfN_idlb
				AnimationMode				= LOOP
			End
		End
		AnimationState        =  PASSENGER EATING
			StateName = BeingEaten
			Animation
				AnimationName           = GUGandalfG_SKL.GUGandalfG_EATA
				AnimationMode       = ONCE
				AnimationBlendTime	=	4
			End
		End
		AnimationState        =  PASSENGER
		StateName = BeingEaten
			Animation
				AnimationName           = GUGandalfG_SKL.GUGandalfG_FLLA
				AnimationMode       = LOOP
				AnimationBlendTime	=	4
			End
		End
		AnimationState        =  SPECIAL_WEAPON_ONE MOUNTED
			StateName = Attacking
			Animation
				AnimationName		= GUGdfHrs_SKL.GUGdfHrs_SPLA
				AnimationMode       = ONCE
				AnimationBlendTime	=	4
			End
			FXEvent			= Frame:5 Name:FX_GandalfPreAttackBlastRealNEW
		End
		AnimationState        =  SPECIAL_WEAPON_ONE
			StateName = Attacking
			Animation
				AnimationName           = GUGandalfG_SKL.GUGandalfG_SPCK
				AnimationMode       = ONCE
			End
			FXEvent			= Frame:5 Name:FX_GandalfPreAttackBlastRealNEW
		End
		AnimationState        =  SPECIAL_WEAPON_TWO MOUNTED
			StateName = Attacking
			Animation
				AnimationName		= GUGdfHrs_SKL.GUGdfHrs_SPLD
				AnimationMode       = ONCE
			End
		End
		AnimationState        =  SPECIAL_WEAPON_TWO
			StateName = Attacking
			Animation
				AnimationName       = GUGandalfG_SKL.GUGandalfG_SPCL
				AnimationMode       = ONCE
			End
		End
		AnimationState        =  PACKING_TYPE_2 MOUNTED
			StateName = Attacking
			Animation
				AnimationName		= GUGdfHrs_SKL.GUGdfHrs_LVLA
				AnimationMode       = ONCE
			End
			FXEvent			= Frame:10 Name:FX_RekindledHeartsSelf
		End
		AnimationState        =  PACKING_TYPE_2
			StateName = Attacking
			Animation
				AnimationName       = GUGandalfG_SKL.GUGandalfG_LVLA
				AnimationMode       = ONCE
			End
			FXEvent			= Frame:10 Name:FX_RekindledHeartsSelf
		End
		AnimationState        =  MOUNTED PACKING_TYPE_1 UNPACKING
			StateName = Attacking
			Animation = LightningSwordStart
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_SPE1
				AnimationMode       = ONCE
			End
			FXEvent			= Frame:14 Name:FX_GandalfLightningCharge
			FXEvent			= Frame:14 Name:FX_GandalfLightningSword  FrameStop:70
		End
		AnimationState        =  MOUNTED PACKING_TYPE_1 PREPARING
			StateName = Attacking
			Animation = LightningSwordLoop
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_SPE2
				AnimationMode       = LOOP
			End
		End
		AnimationState        =  MOUNTED PACKING_TYPE_1 PACKING
			StateName = Attacking
			Animation = LightningSwordPutAway
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_SPE3
				AnimationMode       = ONCE
			End
		End
		AnimationState        =  PACKING_TYPE_1 UNPACKING
			StateName = Attacking
			Animation = LightningSwordStart
				AnimationName           = GUGandalfG_SKL.GUGandalfG_SPE3
				AnimationMode       = ONCE
			End
			FXEvent			= Frame:14 Name:FX_GandalfLightningCharge
			FXEvent			= Frame:14 Name:FX_GandalfLightningSword  FrameStop:70
		End
		AnimationState        =  PACKING_TYPE_1 PREPARING
			StateName = Attacking
			Animation = LightningSwordLoop
				AnimationName           = GUGandalfG_SKL.GUGandalfG_SPE2
				AnimationMode       = LOOP
			End
		End
		AnimationState        =  PACKING_TYPE_1 PACKING
			StateName = Attacking
			Animation = LightningSwordPutAway
				AnimationName           = GUGandalfG_SKL.GUGandalfG_SPE1
				AnimationMode       = ONCE
			End
		End
		AnimationState        =  MOUNTED SPECIAL_WEAPON_FIVE
			StateName = Attacking
			Animation = StaffLaser
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_SPLG
				AnimationMode       = ONCE
			End
			FXEvent			= Frame:15 Name:FX_GandalfWordOfCommandFlare
		End
		AnimationState        =  MOUNTED SPECIAL_WEAPON_THREE
			StateName = Attacking
			Animation = StaffLaser
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_SPLG
				AnimationMode       = ONCE
			End
			FXEvent			= Frame:30 Name:FX_GandalfStaffFlare
		End
		AnimationState        =  SPECIAL_WEAPON_THREE
			StateName = Attacking
			Animation = StaffLaser
				AnimationName           = GUGandalfG_SKL.GUGandalfG_SPCH
				AnimationMode       = ONCE
			End
			FXEvent			= Frame:30 Name:FX_GandalfStaffFlare
		End
		AnimationState				=	MOUNTED FIRING_OR_PREATTACK_A MOVING
			Animation				=	MountedRunAndFire
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_ATRA
				AnimationMode		=	LOOP
				Distance			=	60
			End
		End
		AnimationState				=	MOUNTED BETWEEN_FIRING_SHOTS_A MOVING
			Animation				=	TrotBetweenShotsMoving
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_WLKA
				AnimationMode		=	LOOP
				Distance			=	30
			End
		End
		AnimationState				=	MOUNTED FIRING_OR_PREATTACK_A
			Animation				=	MountedSlash
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_ATKA
				AnimationMode		=	ONCE
				UseWeaponTiming		= Yes
			End
			Animation				=	MountedStab
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_ATKB
				AnimationMode		=	ONCE
				UseWeaponTiming		= Yes
			End
		End
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = GUGandalfG_SKL.GUGandalfG_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART
		End
		AnimationState        =  FIRING_OR_PREATTACK_A
			Animation = StaffSwing
				AnimationName           = GUGandalfG_SKL.GUGandalfG_ATKA
				AnimationMode       = ONCE
				UseWeaponTiming		= Yes
			End
			Animation = SwordSwing
			  AnimationName           = GUGandalfG_SKL.GUGandalfG_ATKB
			  AnimationMode       = ONCE
			  UseWeaponTiming		= Yes
			End
			Animation = SpinningSwordStaff
			  AnimationName           = GUGandalfG_SKL.GUGandalfG_ATKC
			  AnimationMode       = ONCE
			  UseWeaponTiming		= Yes
			End
		End
		AnimationState				=	MOUNTED TURN_RIGHT_HIGH_SPEED
			Animation				=	TurnRight
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_TNR1
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOUNTED TURN_LEFT_HIGH_SPEED
			Animation				=	TurnRight
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_TNL1
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOUNTED TURN_LEFT
			Animation				=	TurnLeft
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_TRNL
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOUNTED TURN_RIGHT
			Animation				=	TurnRight
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_TRNR
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOUNTED MOVING ACCELERATE
			Animation				=	Accelerate
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_ACCL
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOUNTED MOVING DECELERATE
			Animation				=	Decelerate
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_DECL
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 0.6 0.6
			End
		End
		AnimationState				=	MOUNTED MOVING WALKING
			Animation				=	Walk
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_WLKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	MOUNTED MOVING BACKING_UP
			Animation				=	BackingUp
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_BAKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	MOUNTED MOVING
			Animation				=	RunA
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_RUNA
				AnimationMode		=	LOOP
			End
 			Flags					=	RANDOMSTART
		End
		AnimationState        = MOVING WANDER
			Animation = Wandering
				AnimationName           = GUGandalfG_SKL.GUGandalfG_WLKA
				AnimationMode       = LOOP
			End
		End
		AnimationState        = MOVING
			Animation = Moving
				AnimationName           = GUGandalfG_SKL.GUGandalfG_RUNB
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART
		End
		AnimationState        = MOUNTED LEVELED	USER_1
			Animation = Yippee
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_LVLA
				AnimationMode       = ONCE
			End
			BeginScript
				CurDrawableShowSubObject("STAFF_LIGHT")
			EndScript
		End
		AnimationState        = MOUNTED LEVELED
			Animation = Yippee
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_LVLA
				AnimationMode       = ONCE
			End
		End
		AnimationState        = MOUNTED EMOTION_ALERT
			Animation           = ALERT_1
				AnimationName     = GUGdfHrs_SKL.GUGdfHrs_IDLA
				AnimationMode     = LOOP
			End
		End
		AnimationState        = EMOTION_ALERT
			Animation           = ALERT_1
				AnimationName     = GUGandalfG_SKL.GUGandalfG_IDLA
				AnimationMode     = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState        = LEVELED	USER_1
			Animation = Yippee
				AnimationName           = GUGandalfG_SKL.GUGandalfG_LVLA
				AnimationMode       = ONCE
			End
			BeginScript
				CurDrawableShowSubObject("STAFF_LIGHT")
			EndScript
		End
		AnimationState        = LEVELED
			Animation = Yippee
				AnimationName           = GUGandalfG_SKL.GUGandalfG_LVLA
				AnimationMode       = ONCE
			End
		End
		AnimationState				=	MOUNTED SELECTED USER_1
			SimilarRestart			=   Yes
			StateName				=	AtAttentionIdle
			Animation				=	ATNB
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
			EndScript
		End
		AnimationState        = MOUNTED RAISING_FLAG
			Animation
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_LVLA
				AnimationMode       = LOOP
			End
		End
		AnimationState        = MOUNTED EMOTION_CELEBRATING
			Animation
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_LVLA
				AnimationMode       = LOOP
			End
		End
		AnimationState        = MOUNTED EMOTION_TAUNTING
			Animation
				AnimationName           = GUGdfHrs_SKL.GUGdfHrs_LVLA
				AnimationMode       = LOOP
			End
		End
		AnimationState				=	MOUNTED SELECTED
			SimilarRestart			=   Yes
			StateName				=	AtAttentionIdle
			Animation				=	ATNB
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
				CurDrawableHideSubObject("STAFF_LIGHT")
			EndScript
		End
		TransitionState				=	TRANS_MountedSelect
			Animation				=	ATNA
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_ATNA
				AnimationMode		=	ONCE
			End
		End
		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	GUGandalfG_SKL.GUGandalfG_ATNA
				AnimationMode			=	ONCE
			End
		End
		TransitionState					=	TRANS_Selected_To_Idle
			Animation					=	ATNE
				AnimationName			=	GUGandalfG_SKL.gugandalfN_atne
				AnimationMode			=	ONCE
			End
		End
		AnimationState				=	SELECTED USER_1
			StateName				=	Selected
			SimilarRestart			=   Yes
			Animation				=	ATNB
				AnimationName		=	GUGandalfG_SKL.GUGandalfG_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
			EndScript
		End
		AnimationState        = RAISING_FLAG
			Animation
				AnimationName           = GUGandalfG_SKL.GUGandalfG_LVLA
				AnimationMode       = LOOP
			End
		End
		AnimationState        = EMOTION_CELEBRATING
			Animation
				AnimationName           = GUGandalfG_SKL.GUGandalfG_LVLA
				AnimationMode       = LOOP
			End
		End
		AnimationState        = EMOTION_TAUNTING
			Animation
				AnimationName           = GUGandalfG_SKL.GUGandalfG_LVLA
				AnimationMode       = LOOP
			End
		End
		AnimationState				=	SELECTED
			StateName				=	Selected
			SimilarRestart			=   Yes
			Animation				=	ATNB
				AnimationName		=	GUGandalfG_SKL.GUGandalfG_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
				CurDrawableHideSubObject("STAFF_LIGHT")
			EndScript
		End
		AnimationState = MOUNTED HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = GUGdfHrs_SKL.GUGdfHrs_HITA
				AnimationMode = ONCE
			End
		End
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = GUGandalfG_SKL.GUGandalfG_HITA
				AnimationMode = ONCE
			End
		End
		AnimationState = MOUNTED
			StateName = Idle
			Animation	=	IdleA
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_IDLA
				AnimationPriority	=	30
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Animation				=	IdleC
				AnimationName		=	GUGdfHrs_SKL.GUGdfHrs_IDLC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState        =  USER_1
			StateName = user_1_idle
			Animation = Foot_IDLB
				AnimationName       = GUGandalfG_SKL.gugandalfN_idlb
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			Animation = Foot_IDLC
				AnimationName       = GUGandalfG_SKL.gugandalfN_idlc
				AnimationMode       = ONCE
				AnimationPriority   = 2
			End
			; Animation = Foot_IDLD
				; AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLD
				; AnimationMode       = ONCE
				; AnimationPriority   = 1
			; End
			; Animation = Foot_IDLE
				; AnimationName       = GUGandalfG_SKL.GUGandalfG_IDLE
				; AnimationMode       = ONCE
				; AnimationPriority   = 2
			; End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
				CurDrawableShowSubObject("STAFF_LIGHT")
			EndScript
		End
	End
  
    #include "..\..\..\includes\StunDrawModuleSmall.inc"



  ; ***DESIGN parameters ***
  Side = Men
  EditorSorting = UNIT
	ThreatLevel = 1.0
  TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT

  WeaponSet
    Conditions = None
    Weapon = PRIMARY    GandalfSword
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End

  ArmorSet
    Conditions      = None
    Armor           = HeroArmor
    DamageFX        = NormalDamageFX
  End
  BuildCost 		= ANGMAR_THRALL_MASTER_BUILDCOST
  BuildTime			= ANGMAR_THRALL_MASTER_BUILDTIME

  VisionRange = ANGMAR_RHUDAURSLING_VISION_RANGE
    	VisionSide = 35%
	VisionRear = 25%
  ShroudClearingRange = ANGMAR_RHUDAURSLING_SHROUD_RANGE ;;.;; SHROUD_CLEAR_STANDARD

  BountyValue       = ANGMAR_THRALL_MASTER_BOUNTY_VALUE
  DisplayName = OBJECT:GandalfTheWhite
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
  CrushRevengeWeapon = BasicInfantryCrushRevenge

  CommandSet = EmptyCommandSet
  CommandPoints = 0 ;;,;; 40


	; *** AUDIO Parameters ***;

	VoiceAttack				= GandalfGondorVoiceAttack
	VoiceAttackCharge		= GandalfVoiceAttackCharge
	VoiceAttackMachine		= GandalfGondorVoiceAttack
	VoiceAttackStructure	= GandalfVoiceAttack
	VoiceFear 				= GandalfVoiceHelpMe
	VoiceMove				= GandalfVoiceMove
	VoiceMoveToCamp			= GandalfVoiceMoveCamp
	VoiceMoveWhileAttacking	= GandalfVoiceDisengage
	VoicePriority			= 96
	VoiceRetreatToCastle	= GandalfGondorVoiceRetreat
	VoiceSelect				= GandalfVoiceSelectMS
	VoiceSelectBattle 		= GandalfGondorVoiceSelectBattle
	VoiceGuard				= GandalfVoiceMove
	SoundImpact				= ImpactHorse
	UnitSpecificSounds
		VoiceGarrison	= GandalfVoiceGarrison
		VoiceEnterUnitElvenTransportShip	= GandalfVoiceMove
		VoiceInitiateCaptureBuilding		= GandalfVoiceMove
	End
	CrowdResponseKey = GoodMen
   #include "..\..\..\includes\StandardUnitEvaEvents.inc"

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:FootstepDirtA			Animation:GUGandalfG_SKL.GUGandalfG_RUNA		Frames:10 20
		AnimationSound = Sound:FootstepDirtA			Animation:GUGandalfG_SKL.GUGandalfG_RUNB		Frames:10 22 33 45
		AnimationSound = Sound:BodyFallGenericNoArmor		Animation:GUGandalfG_SKL.GUGandalfG_DIEB		Frames:63
		AnimationSound = Sound:BodyFallGenericNoArmor		Animation:GUGandalfG_SKL.GUGandalfG_LNDA		Frames:2
		AnimationSound = Sound:HorseMoveFootsteps			Animation:GUGdfHrs_SKL.GUGdfHrs_ACCL		Frames:15 32
		AnimationSound = Sound:HorseMoveFootsteps			Animation:GUGdfHrs_SKL.GUGdfHrs_RUNA		Frames:0
		AnimationSound = Sound:HorseMoveFootsteps			Animation:GUGdfHrs_SKL.GUGdfHrs_TNL1		Frames:0
		AnimationSound = Sound:HorseMoveFootsteps			Animation:GUGdfHrs_SKL.GUGdfHrs_TNR1		Frames:0
		AnimationSound = Sound:HorseWhinny50Percent		Animation:GUGdfHrs_SKL.GUGdfHrs_IDLC		Frames:0
		AnimationSound = Sound:HorseWhinnyForEowynSmite		Animation:GUGdfHrs_SKL.GUGdfHrs_LVLA		Frames:64
		AnimationSound = Sound:HorseWhinnyForEowynSmite		Animation:GUGdfHrs_SKL.GUGdfHrs_SPLA		Frames:74
		AnimationSound = Sound:BodyFallGenericNoArmor		Animation:GUGdfHrs_SKL.GUGdfHrs_DIEA		Frames:2 42
		AnimationSound = Sound:HorseDieForHero			Animation:GUGdfHrs_SKL.GUGdfHrs_DIEA		Frames:1
	End

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Humanoid_Male Man Man_Male Unit Infantry Hero
	End

  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD INFANTRY SELECTABLE CAN_CAST_REFLECTIONS PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT BANNER  ; GRAB_AND_DROP INFANTRY Can't have this as I'll appear in the infantry bone of the mumak - Vengeful
  CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_MEDIUM

  Body = ActiveBody ModuleTag_02
    MaxHealth         = 1000
    MaxHealthDamaged  = 250
	BurningDeathBehavior = Yes
	BurningDeathFX       = FX_InfantryBurningFlame
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = No
    MoodAttackCheckRate        = 500
    HoldGroundCloseRangeDistance = 40
    AttackPriority				= 	AttackPriority_Infantry
    AILuaEventsList				=	MordorInfantryBannerFunctions
	BurningDeathTime			=	BURNINGDEATH_DURATION_INFANTRY
  End

;;.;; Added
    Behavior = AutoHealBehavior ModuleTag_ThrallMasterHealing
        StartsActive = No
        TriggeredBy = Upgrade_ObjectLevel2
        HealingAmount = 10
        HealingDelay = 1000
        StartHealingDelay = 10000
        HealOnlyIfNotInCombat = Yes
    End
;;.;;

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	350		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf					=	AOTR_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf				=	EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
		PointAt						=	EMOTION_POINTAT_OBJECTFILTER

		HeroScanDistance			=	150
		FearScanDistance			=	250

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=   BraceForBeingCrushed_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End

  	LocomotorSet
    		Locomotor = HumanLocomotor
    		Condition = SET_NORMAL
    		Speed     = NORMAL_FOOT_FAST_MEMBER_SPEED
  	End

	LocomotorSet
		Locomotor = BurningDeathLocomotorInfantry
		Condition = SET_BURNINGDEATH
		Speed	  = BURNINGDEATH_WANDERSPEED_INFANTRY
	End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
	ShockStunnedTimeLow		= 1400	;msec
	ShockStunnedTimeHigh	= 2400	;msec
	ShockStandingTime		= 2133	;msec
  End

	#include "..\..\..\includes\CaptureBuilding.inc"

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK -FADED
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
    Sound = INITIAL GandalfVoiceDie				;MordorBannerOrcVoiceDie
  End
  

  Behavior = SlowDeathBehavior ModuleTag_FadeDeath
    DeathTypes = ALL -FADED
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
	Sound = INITIAL SpellGenericUnsummonFasterMS
 End

  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
    Sound = INITIAL GandalfVoiceDie				;MordorBannerOrcVoiceDie
  End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End
	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 10000							; spawn a new member every n seconds when idle (in miliseconds)
		MeleeFreeUnitSpawnTime		= 20000							; n miliseconds units must not have been fighting to be able to spawn units when idle (in miliseconds)
		DiedRespawnTime			= 10000							; how much time must pass after Banner Carrier dies before horde can spawn another
		MeleeFreeBannerReSpawnTime	= 20000							; how much time since horde has been fighting before a new Banner Carrier can be respawned

		BannerMorphFX		= FX_BannerCarrierMorph					; name of particle FX to use when the BannerCarrier morphs into the dest unit type
		UnitSpawnFX			= FX_BannerCarrierSpawnUnit				; name of particle FX to use when the BannerCarrier spawns a new unit
	End

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; Angmar Thrall Master
Object HostOfTheWestLegolas
  ; *** ART Parameters ***

	SelectPortrait = HEMirkwoodLegolas
	ButtonImage = HIMirkwoodLegolas

	Draw = W3DScriptedModelDraw ModuleTag_01_
		OkToChangeModelColor = Yes
		StaticModelLODMode = yes
		DefaultModelConditionState
			Model               = TULegLor_Melee
			WeaponLaunchBone    = PRIMARY ARROW
		End
; --------- MOUNTED  ------------		

; --- Dying Anims
		AnimationState				=	MOUNTED FREEFALL 
			Animation				=	freefall
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End

		AnimationState				=	MOUNTED STUNNED_FLAILING 
			Animation				=	JustDie
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		
		AnimationState				=	MOUNTED DYING SPLATTED
			Animation				=	Land
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_LNDA
				AnimationMode		=	ONCE
			End
		End
	
	AnimationState				=	MOUNTED DYING DEATH_2
			Animation				=	JustDie
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLA
				AnimationMode		=	ONCE
			End
		End
		
		AnimationState				=	MOUNTED DYING
			Animation				=	JustDie
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_DIEA
				AnimationMode		=	ONCE
			End
		End
		
		AnimationState				=	MOUNTED STUNNED_STANDING_UP
			Animation				=	StandUp
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_GTPA
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End

		AnimationState				=	MOUNTED STUNNED
			Animation				=	Land
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_LNDA
				AnimationMode		=	ONCE
			End
		End
		

; --- Attacking Anims		
		AnimationState        =  MOUNTED FIRING_OR_PREATTACK_A ATTACKING_STRUCTURE
			StateName = Attacking
			Animation = attackinga  building while mounted.
				AnimationName           = RUHHs_Theo_SKL.RUHHs_Theo_ATKA  ;ATKB looked pretty silly.
				AnimationMode       = ONCE
				UseWeaponTiming = Yes
			End
		End
		
		
		
		AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = MountedRunAndFire
				AnimationName       = RUHHs_Theo_SKL.RUHHs_Theo_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART  
		End

		AnimationState				=	MOUNTED FIRING_OR_PREATTACK_A
			Animation				=	AttackA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATKA
				AnimationMode		=	ONCE
				UseWeaponTiming		= Yes
			End
			Animation				=	AttackB
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATKB
				AnimationMode		=	ONCE
				UseWeaponTiming		= Yes
			End
		End

; --- Moving Anims
		AnimationState				=	MOUNTED TURN_LEFT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TNL1
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.2 1.2
				AnimationBlendTime	=	20
			End
		End
		
		AnimationState				=	MOUNTED TURN_RIGHT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TNR1
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.2 1.2
				AnimationBlendTime	=	20
			End
		End

		AnimationState				=	MOUNTED MOVING TURN_LEFT 
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TRNL
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.5 1.5
			End
		End

		AnimationState				=	MOUNTED MOVING TURN_RIGHT 
			Animation				=	TurnRight
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TRNR
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.5 1.5
			End
		End

		AnimationState				=	MOUNTED MOVING ACCELERATE
			Animation				=	Accelerate
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ACCL
				AnimationMode		=	LOOP
			End
		End

		AnimationState				=	MOUNTED MOVING DECELERATE
			Animation				=	Decelerate
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_DECL
				AnimationMode		=	ONCE
			End
		End

		AnimationState				=	MOUNTED MOVING WALKING
			Animation				=	Walk
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_WLKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		
		AnimationState				=	MOUNTED MOVING BACKING_UP
			Animation				=	BackingUp
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_BAKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End


		AnimationState				=	MOUNTED MOVING
			Animation				=	RunA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_RUNA
				AnimationMode		=	LOOP
			End
 			Flags					=	RANDOMSTART
		End

; --- Selected Anims		
		AnimationState				=	MOUNTED SELECTED
			SimilarRestart			=   Yes			
			StateName				=	AtAttentionIdle
			Animation				=	ATNB
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLH
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
				if Prev == "STATE_CaptainMounted" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
			EndScript
		End

		TransitionState				=	TRANS_MountedSelect
			Animation				=	ATNA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATNA
				AnimationMode		=	ONCE
			End
		End

; --- Idle Anims		
		AnimationState = MOUNTED
			StateName = Idle
			Animation	=	IdleA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLA
				AnimationPriority	=	30
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Animation				=	IdleC
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
;--------------------------------------------------------------------------			
		AnimationState        = STUNNED_FLAILING
			Animation           = FLYA
				AnimationName     = WULegolas_SKL.WULegolas_FLYA
				AnimationMode     = LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags               = RANDOMSTART
			BeginScript
				CurDrawableHideSubObject("arrow")
			EndScript
		End
		AnimationState        = DYING
			Animation           = DIEC
				AnimationName     = WULegolas_SKL.WULegolas_DIEC
				AnimationMode     = ONCE
			End
			BeginScript
				CurDrawableHideSubObject("arrow")
			EndScript
		End	
		AnimationState        = STUNNED_STANDING_UP
			StateName           = STATE_Sword
			Animation           = GUFaramir_GTPC
				AnimationName     = WULegolas_SKL.WULegolas_GTPC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
			BeginScript
				CurDrawableHideSubObject("arrow")
			EndScript
		End
		AnimationState        = STUNNED WEAPONSET_TOGGLE_1
			StateName           = STATE_Sword
			Animation           = GUFaramir_LNDA
				AnimationName     = WULegolas_SKL.WULegolas_LNDA
				AnimationMode     = ONCE
			End
			BeginScript
				CurDrawableHideSubObject("arrow")
			EndScript
		End						
		AnimationState						= PARALYZED
			Animation
				AnimationName				= WULegolas_SKL.WULegolas_IDLA
				AnimationMode				= LOOP
			End
		End
		AnimationState        = UNPACKING PACKING_TYPE_1
			Animation           = ATKA1
				AnimationName     = WULegolas_SKL.WULegolas_ATKA1
				AnimationMode     = ONCE
			End
			StateName           = STATE_Bow
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
				CurDrawableHideSubObject("arrow")
			EndScript
		End
		AnimationState        = PREPARING PACKING_TYPE_1
			Animation           = ATKA2
				AnimationName     = WULegolas_SKL.WULegolas_ATKA2
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 1.328 1.328
			End
			StateName           = STATE_Bow
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
				CurDrawableHideSubObject("arrow")
			EndScript
		End
		AnimationState        = PACKING PACKING_TYPE_1
			Animation           = ATKA3
				AnimationName     = WULegolas_SKL.WULegolas_ATKA3
				AnimationMode     = LOOP
			End
			StateName           = STATE_Bow
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
				CurDrawableHideSubObject("arrow")
			EndScript
		End
		AnimationState        = PACKING_TYPE_2
			Animation           = CHRB
				AnimationName     = WULegolas_SKL.WULegolas_CHRB
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
			StateName           = STATE_TrainingStart
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
			EndScript
		End
		AnimationState        =  SPECIAL_WEAPON_ONE
			Animation           = ATKB
				AnimationName     = WULegolas_SKL.WULegolas_ATKB
				AnimationMode     = ONCE
			End
			FrameForPristineBonePositions = 45
			StateName           = STATE_Bow
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
				CurDrawableShowSubObject("arrow")
			EndScript
		End
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = WULegolas_SKL.WULegolas_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End
		AnimationState        =  FIRING_OR_PREATTACK_A
			Animation           = ATKD
				AnimationName     = WULegolas_SKL.WULegolas_ATKD
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			Animation           = ATKE
				AnimationName     = WULegolas_SKL.WULegolas_ATKE
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			Animation           = ATKJ
				AnimationName     = WULegolas_SKL.WULegolas_ATKJ
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			Animation           = ATKK
				AnimationName     = WULegolas_SKL.WULegolas_ATKK
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
            ;FXEvent	= Frame:17 Name: FX_BladeMasterHitOrient
    		StateName           = STATE_Sword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_SwitchToSwords") end
				CurDrawableHideSubObject("arrow")
			EndScript
		End
		AnimationState        = MOVING
			Animation           = RUNB
				AnimationName   = WULegolas_SKL.WULegolas_RUNB
				AnimationMode   = LOOP
				Distance		= 50
				AnimationBlendTime = 10
			End
			Flags               = RANDOMSTART
			StateName           = STATE_Sword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_SwitchToSwordsWhileMoving") end
				CurDrawableHideSubObject("arrow")
			EndScript
		End
		AnimationState = HIT_REACTION
			Animation = Hit_Level
				AnimationName = WULegolas_SKL.WULegolas_HITC
				AnimationMode = ONCE
			End
		End
		AnimationState				=	EMOTION_CELEBRATING
			Animation           =	CHRA
				AnimationName   =	WULegolas_SKL.WULegolas_CHRA
				AnimationMode   =	ONCE
				AnimationPriority	=	10
			End
			Animation           =	CHRB
				AnimationName   =	WULegolas_SKL.WULegolas_CHRB
				AnimationMode   =	ONCE
				AnimationPriority	=	5
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableHideSubObject("arrow")
			EndScript
		End
		AnimationState				=	EMOTION_TAUNTING
			Animation           =	CHRB
				AnimationName   =	WULegolas_SKL.WULegolas_CHRB
				AnimationMode   =	ONCE
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				CurDrawableHideSubObject("arrow")
			EndScript
		End
		AnimationState				= SELECTED
			StateName				=	KnifeFighterSelected
			Animation				=	ATNF
				AnimationName		=	WULegolas_SKL.WULegolas_IDLI
				AnimationMode		=	LOOP
			End
			StateName				= SwordsAttn
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" or Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_SwitchToAttentionSword") end
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrow02")				
			EndScript
		End
		AnimationState				=	RAISING_FLAG
			Animation           =	CHRA
				AnimationName   =	WULegolas_SKL.WULegolas_CHRA
				AnimationMode   =	ONCE
			End
			Animation           =	CHRB
				AnimationName   =	WULegolas_SKL.WULegolas_CHRB
				AnimationMode   =	ONCE
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
		End
		IdleAnimationState
			Animation           = IDLI
				AnimationName     = WULegolas_SKL.WULegolas_IDLI
				AnimationMode     = LOOP
			End
			StateName           = STATE_Sword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_SwitchToSwords") end
				CurDrawableHideSubObject("arrow")
				CurDrawableHideSubObject("arrow02")
			EndScript
		End
		TransitionState       = TRANS_SwitchToBow
			Animation           = STHB
				AnimationName     = WULegolas_SKL.WULegolas_STHB
				AnimationMode     = ONCE
			End
		End
		TransitionState       = TRANS_SwitchToSwords
			Animation           = STHA
				AnimationName     = WULegolas_SKL.WULegolas_STHA
				AnimationMode     = ONCE
			End
		End
		TransitionState       = TRANS_SwitchToBowWhileMoving
			Animation           = STHB
				AnimationName     = WULegolas_SKL.WULegolas_RUND
				AnimationMode     = ONCE
				Distance		= 50
			End
		End
		TransitionState       = TRANS_SwitchToSwordsWhileMoving
			Animation           = STHA
				AnimationName     = WULegolas_SKL.WULegolas_RUNE
				AnimationMode     = ONCE
				Distance		= 50
			End
		End
		TransitionState       = TRANS_SwitchToAttentionSword
			Animation           = ATNE
				AnimationName     = WULegolas_SKL.WULegolas_STHA
				AnimationMode     = ONCE
			End
		End
		TransitionState       = TRANS_SwitchToAttention
			Animation           = ATNA
				AnimationName     = WULegolas_SKL.WULegolas_ATNA
				AnimationMode     = ONCE
			End
		End
		TransitionState       = TRANS_SwitchFromAttention
			Animation           = ATND
				AnimationName     = WULegolas_SKL.WULegolas_ATND
				AnimationMode     = ONCE
			End
		End
	End
    #include "..\..\..\includes\StunDrawModuleSmall.inc"



  ; ***DESIGN parameters ***
  Side = Men
  EditorSorting = UNIT
	ThreatLevel = 1.0
  TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT

  WeaponSet
    Conditions = None
    Weapon = PRIMARY    LegolasSword
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End

  ArmorSet
    Conditions      = None
    Armor           = HeroArmor
    DamageFX        = NormalDamageFX
  End
  BuildCost 		= ANGMAR_THRALL_MASTER_BUILDCOST
  BuildTime			= ANGMAR_THRALL_MASTER_BUILDTIME

  VisionRange = ANGMAR_RHUDAURSLING_VISION_RANGE
    	VisionSide = 35%
	VisionRear = 25%
  ShroudClearingRange = ANGMAR_RHUDAURSLING_SHROUD_RANGE ;;.;; SHROUD_CLEAR_STANDARD

  BountyValue       = ANGMAR_THRALL_MASTER_BOUNTY_VALUE
  DisplayName = OBJECT:RohanLegolas
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
  CrushRevengeWeapon = BasicInfantryCrushRevenge

  CommandSet = EmptyCommandSet
  CommandPoints = 0 ;;,;; 40


	; *** AUDIO Parameters ***;

	VoiceAttack									= LegolasNewVoiceAttack    ;LegolasVoiceAttack
	VoiceAttackCharge							= LegolasNewVoiceAttack     ;LegolasVoiceAttackCharge
	VoiceAttackStructure						= LegolasNewVoiceAttack      ;LegolasVoiceAttack
	VoiceAttackMachine							= LegolasNewVoiceAttack      ;LegolasVoiceAttack
	VoiceFear 									= LegolasNewVoiceHelpMe      ;LegolasVoiceHelpMe
	VoiceMove 									= LegolasNewVoiceMove        ;LegolasVoiceMove
	VoiceMoveToCamp 							= LegolasNewVoiceMoveCamp    ;LegolasVoiceMoveCamp
	VoiceMoveWhileAttacking						= LegolasNewVoiceDisengage    ;LegolasVoiceDisengage
	VoicePriority 								= 68
	VoiceRetreatToCastle						= LegolasNewVoiceRetreat      ;LegolasVoiceMove
	VoiceSelect 								= LegolasNewVoiceSelect       ; ;LegolasVoiceSelectMS
	VoiceSelectBattle 							= LegolasNewVoiceSelectBattle  ;LegolasVoiceSelectBattle
	VoiceGuard									= LegolasNewVoiceMove           ;LegolasVoiceMove
	VoiceRetreatToCastle	                    = LegolasNewVoiceRetreat       ;LegolasVoiceRetreat
	SoundImpact 								= ImpactHorse
	UnitSpecificSounds
		VoiceAttackUnitMordorBalrog				= LegolasNewVoiceAttackBalrog
	    VoiceAttackUnitDwarvenThorin			= LegolasNewVoiceAttackThorin
		VoiceMoveToTrees						= LegolasNewVoiceMoveTrees
		VoiceEnterUnitElvenTransportShip		= LegolasNewVoiceMove       ;LegolasVoiceMove
		VoiceGarrison							= LegolasNewVoiceMove       ;LegolasVoiceGarrison
		VoiceInitiateCaptureBuilding			= LegolasNewVoiceMove       ;LegolasVoiceMove
	End
	CrowdResponseKey = ElfHero
   #include "..\..\..\includes\StandardUnitEvaEvents.inc"

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:FootstepDirtA 			Animation:WULegolas_SKL.WULegolas_RUNA	Frames:9 19
		AnimationSound = Sound:FootstepDirtA 			Animation:WULegolas_SKL.WULegolas_RUNB	Frames:9 19
		AnimationSound = Sound:FootstepDirtA 			Animation:WULegolas_SKL.WULegolas_RUND	Frames:9 20
		AnimationSound = Sound:FootstepDirtA 			Animation:WULegolas_SKL.WULegolas_RUNE	Frames:8 19
		AnimationSound = Sound:WeaponSwitchBowForLegolas 	Animation:WULegolas_SKL.WULegolas_ATKB	Frames:0
		AnimationSound = Sound:WeaponSwitchBowForLegolas	Animation:WULegolas_SKL.WULegolas_ATKA1	Frames:0
		AnimationSound = Sound:BodyFallSoldier			Animation:WULegolas_SKL.WULegolas_LNDA	Frames:0
		AnimationSound = Sound:BodyFallSoldier			Animation:WULegolas_SKL.WULegolas_LNDB	Frames:0
		AnimationSound = Sound:BodyFallGenericNoArmor 		Animation:WULegolas_SKL.WULegolas_DIEA	Frames:48
		AnimationSound = Sound:BodyFallGenericNoArmor 		Animation:WULegolas_SKL.WULegolas_DIEB	Frames:89
		AnimationSound = Sound:BodyFallGenericNoArmor 		Animation:WULegolas_SKL.WULegolas_DIEC	Frames:64
	End

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Humanoid_Male Elf Elf_Male Unit Infantry Hero
	End

  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD INFANTRY SELECTABLE CAN_CAST_REFLECTIONS PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT BANNER  ; GRAB_AND_DROP INFANTRY Can't have this as I'll appear in the infantry bone of the mumak - Vengeful
  CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_MEDIUM

  Body = ActiveBody ModuleTag_02
    MaxHealth         = 1000
    MaxHealthDamaged  = 250
	BurningDeathBehavior = Yes
	BurningDeathFX       = FX_InfantryBurningFlame
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = No
    MoodAttackCheckRate        = 500
    HoldGroundCloseRangeDistance = 40
    AttackPriority				= 	AttackPriority_Infantry
    AILuaEventsList				=	MordorInfantryBannerFunctions
	BurningDeathTime			=	BURNINGDEATH_DURATION_INFANTRY
  End

;;.;; Added
    Behavior = AutoHealBehavior ModuleTag_ThrallMasterHealing
        StartsActive = No
        TriggeredBy = Upgrade_ObjectLevel2
        HealingAmount = 10
        HealingDelay = 1000
        StartHealingDelay = 10000
        HealOnlyIfNotInCombat = Yes
    End
;;.;;

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	350		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf					=	AOTR_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf				=	EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
		PointAt						=	EMOTION_POINTAT_OBJECTFILTER

		HeroScanDistance			=	150
		FearScanDistance			=	250

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=   BraceForBeingCrushed_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End

  	LocomotorSet
    		Locomotor = HumanLocomotor
    		Condition = SET_NORMAL
    		Speed     = NORMAL_FOOT_FAST_MEMBER_SPEED
  	End

	LocomotorSet
		Locomotor = BurningDeathLocomotorInfantry
		Condition = SET_BURNINGDEATH
		Speed	  = BURNINGDEATH_WANDERSPEED_INFANTRY
	End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
	ShockStunnedTimeLow		= 1400	;msec
	ShockStunnedTimeHigh	= 2400	;msec
	ShockStandingTime		= 2133	;msec
  End

	#include "..\..\..\includes\CaptureBuilding.inc"

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK -FADED
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
    Sound = INITIAL ElvenWarriorVoiceDie				;MordorBannerOrcVoiceDie
  End
  

  Behavior = SlowDeathBehavior ModuleTag_FadeDeath
    DeathTypes = ALL -FADED
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
	Sound = INITIAL SpellGenericUnsummonFasterMS
 End

  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
    Sound = INITIAL ElvenWarriorVoiceDie				;MordorBannerOrcVoiceDie
  End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End
	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 10000							; spawn a new member every n seconds when idle (in miliseconds)
		MeleeFreeUnitSpawnTime		= 20000							; n miliseconds units must not have been fighting to be able to spawn units when idle (in miliseconds)
		DiedRespawnTime			= 10000							; how much time must pass after Banner Carrier dies before horde can spawn another
		MeleeFreeBannerReSpawnTime	= 20000							; how much time since horde has been fighting before a new Banner Carrier can be respawned

		BannerMorphFX		= FX_BannerCarrierMorph					; name of particle FX to use when the BannerCarrier morphs into the dest unit type
		UnitSpawnFX			= FX_BannerCarrierSpawnUnit				; name of particle FX to use when the BannerCarrier spawns a new unit
	End

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; Angmar Thrall Master
Object HostOfTheWestGimli
  ; *** ART Parameters ***
	SelectPortrait = HPGimliLotrEra
	ButtonImage = higimlilotrera

	Draw = W3DScriptedModelDraw ModuleTag_01_
		OkToChangeModelColor = Yes
		StaticModelLODMode = yes
		DefaultModelConditionState
			Model               = rugimli3H_skn
			Skeleton            = RUGimli_SKL
			WeaponLaunchBone    = TERTIARY AXE02
		End
		
		ModelConditionState = WEAPONSET_TOGGLE_1
			Model               = rugimli3H_skn
			Skeleton            = RUGimli_SKL
			ParticleSysBone =  BAT_HEAD Slayer FollowBone:Yes
		End

		ModelConditionState		= PASSENGER
			Model               = rugimli_fro
			Skeleton			= RUFrodo_SKL
			WeaponLaunchBone	= PRIMARY B_HANDR
			WeaponLaunchBone	= SECONDARY B_HANDR
		End
;;================== ANIMATIONS =================================================================

;;---------------------------------------------------------------------------------------------;;
;;				PASSENGER - ON HORSE WITH LEGOLAS											   ;;
;;---------------------------------------------------------------------------------------------;;

		AnimationState        =  PASSENGER FIRING_OR_PREATTACK_A
			Animation           = THRA
				AnimationName     = RUFrodo_THRA
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
				AnimationBlendTime = 0
			End
			StateName           = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SheatheSword") end
			EndScript
		End
		AnimationState = PASSENGER MOVING ACCELERATE
			Animation = RUFro_HH_RUNA
				AnimationName = RUFro_HH_ACCL
				AnimationMode =LOOP
				AnimationBlendTime = 0
			End
			StateName           = Mounted
		End
  		AnimationState = PASSENGER MOVING DECELERATE
  			Animation = RUFro_HH_RUNA
  				AnimationName = RUFro_HH_DECL
  				AnimationMode =LOOP
  				AnimationBlendTime = 0
  			End
  			StateName           = Mounted
  		End
  		AnimationState = PASSENGER MOVING TURN_LEFT 
  			Animation = RUFro_HH_RUNA
  				AnimationName = RUFro_HH_TNL2
  				AnimationMode =LOOP
  				AnimationBlendTime = 0
  			End
  			StateName           = Mounted
  		End
  		AnimationState = PASSENGER MOVING TURN_RIGHT 
  			Animation = RUFro_HH_RUNA
  				AnimationName = RUFro_HH_TNL1
  				AnimationMode =LOOP
  				AnimationBlendTime = 0
  			End
  			StateName           = Mounted
  		End
  		AnimationState = PASSENGER TURN_LEFT_HIGH_SPEED
  			Animation = RUFro_HH_RUNA
  				AnimationName = RUFro_HH_TRNL
  				AnimationMode =LOOP
  				AnimationBlendTime = 0
  			End
  			StateName           = Mounted
  		End
  		AnimationState = PASSENGER TURN_RIGHT_HIGH_SPEED
  			Animation = RUFro_HH_RUNA
  				AnimationName = RUFro_HH_TRNR
  				AnimationMode =LOOP
  				AnimationBlendTime = 0
  			End
  			StateName           = Mounted
  		End
		AnimationState = PASSENGER MOVING
			Animation = RUFro_HH_RUNA
				AnimationName = RUFro_HH_RUNA
				AnimationMode =LOOP
				AnimationBlendTime = 0
			End
			StateName           = Mounted
		End
		AnimationState = PASSENGER SELECTED
			Animation = RUFro_HH_RUNA
				AnimationName = RUFro_HH_IDLA
				AnimationMode =LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Mounted" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
			EndScript
		End
		TransitionState				=	TRANS_MountedSelect
			Animation				=	ATNA
				AnimationName		=	RUFro_HH_ATNA
				AnimationMode		=	ONCE
			End
		End
		AnimationState = PASSENGER
			Animation = IDLE1
				AnimationName = RUFro_HH_IDLA
				AnimationMode =ONCE
			End
			Animation = IDLE2
				AnimationName = RUFro_HH_IDLB
				AnimationMode = ONCE
			End
			Animation = IDLE4
				AnimationName = RUFro_HH_IDLH
				AnimationMode = ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
			StateName           = Mounted
		End

;;------------------ MOVING & DYING ---------------------------

	;;======= DYING

		AnimationState        = STUNNED_FLAILING
			Animation           = FLYA
				AnimationName     = RUGimli_FLYA
				AnimationMode     = LOOP
				AnimationSpeedFactorRange	= 0.3 0.5
			End
			Flags               = RANDOMSTART
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End
		
		AnimationState				=	DYING DEATH_2			
			Animation
				AnimationName				= RUGimli_IDLA
				AnimationMode				= LOOP
			End
		End		
		
		AnimationState        = DYING SPLATTED
			Animation           = LNDB
				AnimationName     = RUGimli_LNDA
				AnimationMode     = ONCE
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End

		AnimationState        = DYING
			Animation           = DIEA
				AnimationName     = RUGimli_DIEA
				AnimationMode     = ONCE
			End
			Animation           = DIEC
				AnimationName     = RUGimli_DIEC
				AnimationMode     = ONCE
			End
;			Animation           = DIEB
;				AnimationName     = RUGimli_DIEB
;				AnimationMode     = ONCE
;			End		
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End
		
		AnimationState        = STUNNED_STANDING_UP
			Animation           = GTPA
				AnimationName     = RUGimli_GTPA
				AnimationMode     = ONCE
			End
		End
	
		AnimationState        = STUNNED
			Animation           = LNDA
				AnimationName     = RUGimli_LNDA
				AnimationMode     = ONCE
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End

		AnimationState						= PARALYZED
			Animation
				AnimationName				= RUGimli_IDLA
				AnimationMode				= LOOP
			End
		End

		
				

; OBSOLETE - Dwarven Grudge
;		AnimationState        = RESURRECTED
;			Animation           = REZA
;				AnimationName     = RUGimli_REZA
;				AnimationMode     = ONCE
;			End
;			;Some FX to show we have risen from the dead
;			EnteringStateFX = FX_Resurrect
;		End
			
	;;======= MOVING
	
	
	AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = RUGimli_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End

; TODO: Slayer Moving
;		AnimationState					= MOVING HERO
;			Animation					= slayer
;				AnimationName			= RUGimli_ATKE
;				AnimationMode			= LOOP
;			End
;		End

; TODO: Replace with SLAYER IDLE animation
; 		AnimationState					= HERO
;			Animation					= slayer standing still
;				AnimationName			= RUGimli_IDLA	; RUGimli_ATKF
;				AnimationMode			= LOOP
;			End
;		End

; OBSOLETE		
;		AnimationState				= MOVING WANDER
;			Animation				= WLKA
;				AnimationName		=  RUGimli_WLKA
;				AnimationMode		= LOOP
;			End
;			Flags						= RANDOMSTART
;		End

; OBSOLETE		
;		AnimationState        = MOVING USER_4
;			Animation           = ATKF
;				AnimationName     = RUGimli_ATKF
;				AnimationMode     = LOOP
;			End
;			Animation           = ATKE
;				AnimationName     = RUGimli_ATKE
;				AnimationMode     = LOOP
;			End
;			;ParticleSysBone     = None InfantryDustTrails
;			BeginScript
;				Prev = CurDrawablePrevAnimationState()
;				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
;			EndScript
;           ;FXEvent	= Frame:6 Name: FX_BladeMasterHitOrient
;           ;FXEvent	= Frame:19 Name: FX_BladeMasterHitOrient
;		End

		AnimationState				=	MOVING ATTACKING
			Animation				=	RUNB
				AnimationName		=	RUGimli_RUNB
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
			;ParticleSysBone		=	None InfantryDustTrails
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End
	
		AnimationState				=	MOVING
			Animation				=	RUNA
				AnimationName		=	RUGimli_RUNA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
			;ParticleSysBone		=	None InfantryDustTrails
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End


;;------------------ ATTACKING  -------------------------------

; AXE THROW
		AnimationState        =  SPECIAL_WEAPON_ONE ;;,;; FIRING_OR_PREATTACK_C
			Animation           = SPCA
				AnimationName     = RUGimli_SPCA
				AnimationMode     = ONCE
;				UseWeaponTiming		= Yes
			End
			FrameForPristineBonePositions = 42;44
			;ParticleSysBone     = None MeleeDust
			BeginScript
				CurDrawableShowSubObject("AXE02")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End

		AnimationState        =  FIRING_OR_PREATTACK_B; WEAPONLOCK_SECONDARY
			Animation           = ATKA
				AnimationName     = RUGimli_ATKD
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			
			;ParticleSysBone None MeleeDust
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End
	
		AnimationState        =  FIRING_OR_PREATTACK_A
			Animation           = ATKA
				AnimationName     = RUGimli_ATKA
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			Animation           = ATKB
				AnimationName     = RUGimli_ATKB
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End		
			Animation           = ATKC
				AnimationName     = RUGimli_ATKC
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
			End
			
			;ParticleSysBone None MeleeDust
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
			EndScript
		End

	;leap animations 		
		AnimationState			= SPECIAL_WEAPON_TWO UNPACKING
			Animation			= GettingReadyToLeap
				AnimationName	= RUGimli_LEPA
				AnimationMode   = ONCE
			End
		End

		AnimationState        =  ABOUT_TO_HIT		;using Gimli Leap
		StateName			= State_AboutToHitGround
			Animation           = Leap
				AnimationName     = RUGimli_LEPC  
				AnimationMode     = ONCE
			;	UseWeaponTiming		= Yes
			End
		End


		AnimationState        = THROWN_PROJECTILE
			Animation           = LEPB
				AnimationName     = RUGimli_LEPB
				AnimationMode     = LOOP
				AnimationBlendTime = 20
			End
		End

;;; REMOVED
;		AnimationState        = WEAPONSET_RAMPAGE ;WEAPONSTATE_ONE
;			Animation           = RPGA
;				AnimationName     = RUGimli_RPGA
;				AnimationMode     = LOOP
;				AnimationBlendTime = 10
;			End
;			BeginScript
;				Prev = CurDrawablePrevAnimationState()
;				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
;			EndScript
;		End
	
;		AnimationState        = USER_1
;			Animation           = TOS1
;				AnimationName     = RUGimli_TOS1
;				AnimationMode     = ONCE
;			End
;			BeginScript
;				Prev = CurDrawablePrevAnimationState()
;				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
;			EndScript
;		End
	

;		AnimationState        = USER_1 PASSENGER
;			Animation           = TOS2
;				AnimationName     = RUGimli_TOS2
;				AnimationMode     = ONCE
;			End
;			BeginScript
;				Prev = CurDrawablePrevAnimationState()
;				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
;			EndScript
;		End
	
;		AnimationState        = PASSENGER
;			Animation           = TOS1
;				AnimationName     = RUGimli_TOS1
;				AnimationMode     = MANUAL
;			End
;			Flags               = START_FRAME_LAST
;			BeginScript
;				Prev = CurDrawablePrevAnimationState()
;				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
;			EndScript
;		End
	
;;-------------------- HIT REACTIONS --------------------------

		AnimationState = HIT_REACTION
			Animation = Hit_Level_1_a
				AnimationName = RUGimli_HITA
				AnimationMode = ONCE
			End
		End
		
;;------------ EMOTIONS ---------------------------------------

;;====== LEVELED
		AnimationState				= LEVELED 						; This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= RUGimli_CHRB
				AnimationMode		= ONCE
			End
		End

;;====== CELEBRATING
		AnimationState			= EMOTION_CELEBRATING
			Animation           = CHRA
				AnimationName   = RUGimli_CHRA
				AnimationMode   = ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End

;;====== TAUNTING
		AnimationState			= EMOTION_TAUNTING
			Animation           = TNTA
				AnimationName   = RUGimli_TNTA
				AnimationMode   = ONCE
			End
			Animation           = TNTB
				AnimationName   = RUGimli_TNTB
				AnimationMode   = ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState					= EMOTION_ALERT
			Animation					= Ready
				AnimationName			= RUGimli_IDLA
				AnimationMode			= LOOP
				AnimationBlendTime  =   15
			End
			BeginScript
				CurDrawableHideSubObject("AXE02")
;				Prev = CurDrawablePrevAnimationState()
;				if Prev == "BORED"		then CurDrawableSetTransitionAnimState("Transition_BoredToReady") end
;				if Prev == "SELECTED"	then CurDrawableSetTransitionAnimState("Transition_SelectedToReady") end
				if Prev == "State_AboutToHitGround" then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle") end
			EndScript

		End
		
		AnimationState			= RAISING_FLAG
			Animation           = CHRA
				AnimationName   = RUGimli_CHRA
				AnimationMode   = LOOP
			End
		End

;;------------------- SELECTED STATES -------------------------
		
		AnimationState				=	SELECTED
			StateName				=	AtAttentionIdle
			SimilarRestart			=   Yes			
			Animation				=	ATNB
				AnimationName		=	 RUGimli_ATNB
				AnimationMode		=	LOOP
			End
			BeginScript
				CurDrawableHideSubObject("AXE02")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
				if Prev == "State_AboutToHitGround" then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle") end
			EndScript
		End
							
;;--------------- IDLE STATES ---------------------------------

		IdleAnimationState
			StateName				= STATE_Idle
			Animation           = IDLB
				AnimationName     = RUGimli_IDLB
				AnimationMode     = ONCE
				AnimationPriority = 30
			End
			Animation           = IDLF
				AnimationName     = RUGimli_IDLF
				AnimationMode     = ONCE
				AnimationPriority = 5
			End		
			Animation           = IDLD
				AnimationName     = RUGimli_IDLD
				AnimationMode     = ONCE
				AnimationPriority = 4
			End
			Animation           = IDLG
				AnimationName     = RUGimli_IDLG
				AnimationMode     = ONCE
				AnimationPriority = 2
			End
			Animation           = IDLH
				AnimationName     = RUGimli_IDLH
				AnimationMode     = ONCE
				AnimationPriority = 1
			End		
			Animation           = IDLC
				AnimationName     = RUGimli_IDLC
				AnimationMode     = ONCE
				AnimationPriority = 1
			End
			Animation           = IDLE
				AnimationName     = RUGimli_IDLE
				AnimationMode     = ONCE
				AnimationPriority = 1
			End
			
			BeginScript
				CurDrawableHideSubObject("AXE02")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "DwarfToss" then CurDrawableSetTransitionAnimState("TRANS_EndDwarfToss") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
				if Prev == "State_AboutToHitGround" then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle") end
			EndScript
		End

		
;---Transitions-------------------------------------

		TransitionState       = TRANS_EndDwarfToss
			Animation           = TOS4
				AnimationName     = RUGimli_TOS4
				AnimationMode     = ONCE
			End
		End	

		TransitionState       = TRANS_SelectedToIdle	
			Animation           = ATNC
				AnimationName     = RUGimli_ATNC
				AnimationMode     = ONCE
				AnimationSpeedFactorRange = 0.7 1.3
			End
		End
		
		TransitionState				=	TRANS_Select
			Animation				=	ATNA
				AnimationName		=	 RUGimli_ATNA
				AnimationMode		=	ONCE
			End
		End
	
		TransitionState = TRANS_AboutToHitGround_To_Idle
			Animation = SplashAtEndOfJump
				AnimationName = RUGimli_LEPC
				AnimationMode = ONCE
				;AnimationBlendTime = 0
			End
			Flags = MAINTAIN_FRAME_ACROSS_STATES
		End
		
	End
    #include "..\..\..\includes\StunDrawModuleSmall.inc"



  ; ***DESIGN parameters ***
  Side = Men
  EditorSorting = UNIT
	ThreatLevel = 1.0
  TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT

  WeaponSet
    Conditions = None
    Weapon = PRIMARY    RohanGimliAxe
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End

  ArmorSet
    Conditions      = None
    Armor           = HeroArmor
    DamageFX        = NormalDamageFX
  End
  BuildCost 		= ANGMAR_THRALL_MASTER_BUILDCOST
  BuildTime			= ANGMAR_THRALL_MASTER_BUILDTIME

  VisionRange = ANGMAR_RHUDAURSLING_VISION_RANGE
    	VisionSide = 35%
	VisionRear = 25%
  ShroudClearingRange = ANGMAR_RHUDAURSLING_SHROUD_RANGE ;;.;; SHROUD_CLEAR_STANDARD

  BountyValue       = ANGMAR_THRALL_MASTER_BOUNTY_VALUE
  DisplayName = OBJECT:RohanGimli
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
  CrushRevengeWeapon = BasicInfantryCrushRevenge

  CommandSet = EmptyCommandSet
  CommandPoints = 0 ;;,;; 40


	; *** AUDIO Parameters ***;

	VoiceAttack								= GimliVoiceAttack
	VoiceAttackCharge						= GimliVoiceAttackCharge
	VoiceAttackMachine						= GimliVoiceAttack
	VoiceAttackStructure					= GimliVoiceAttack
	;VoiceCreated							= GimliVoiceSalute		;this conflicts with his respawn dialogue line -- rehooked to spawn FX
	VoiceFear 								= GimliVoiceHelpMe
	VoiceGuard								= GimliVoiceMove
	VoiceMove								= GimliVoiceMove
	VoiceMoveToCamp							= GimliVoiceMove
	VoiceMoveWhileAttacking					= GimliVoiceDisengage
	VoicePriority							= 67
	VoiceRetreatToCastle					= GimliVoiceRetreat
	VoiceSelect								= GimliVoiceSelectMS
	VoiceSelectBattle 						= GimliVoiceSelectBattle
	SoundImpact								= ImpactHorse
	UnitSpecificSounds
		VoiceGarrison						= GimliVoiceGarrison
		VoiceEnterUnitElvenTransportShip	= GimliVoiceMove
		VoiceInitiateCaptureBuilding		= GimliVoiceMove
		;VoiceEnterStateInitiateCaptureBuilding	=
	End

	CrowdResponseKey = DwarfHero
   #include "..\..\..\includes\StandardUnitEvaEvents.inc"

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU		; Tie into LargeGroupAudio system
		Key = Humanoid_Male Dwarf Dwarf_Male Unit Infantry Hero
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:FootstepDirtA			Animation:RUGimli_SKL.RUGimli_RUNA	Frames:3 14
		AnimationSound = Sound:FootstepDirtA			Animation:RUGimli_SKL.RUGimli_RUNB	Frames:3 12
		AnimationSound = Sound:BodyFallSoldier			Animation:RUGimli_SKL.RUGimli_LNDA	Frames:2
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:RUGimli_SKL.RUGimli_DIEA	Frames:11
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:RUGimli_SKL.RUGimli_DIEC	Frames:59
	End

  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD INFANTRY SELECTABLE CAN_CAST_REFLECTIONS PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT BANNER  ; GRAB_AND_DROP INFANTRY Can't have this as I'll appear in the infantry bone of the mumak - Vengeful
  CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_MEDIUM

  Body = ActiveBody ModuleTag_02
    MaxHealth         = 1000
    MaxHealthDamaged  = 250
	BurningDeathBehavior = Yes
	BurningDeathFX       = FX_InfantryBurningFlame
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = No
    MoodAttackCheckRate        = 500
    HoldGroundCloseRangeDistance = 40
    AttackPriority				= 	AttackPriority_Infantry
    AILuaEventsList				=	MordorInfantryBannerFunctions
	BurningDeathTime			=	BURNINGDEATH_DURATION_INFANTRY
  End

;;.;; Added
    Behavior = AutoHealBehavior ModuleTag_ThrallMasterHealing
        StartsActive = No
        TriggeredBy = Upgrade_ObjectLevel2
        HealingAmount = 10
        HealingDelay = 1000
        StartHealingDelay = 10000
        HealOnlyIfNotInCombat = Yes
    End
;;.;;

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	350		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf					=	AOTR_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf				=	EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
		PointAt						=	EMOTION_POINTAT_OBJECTFILTER

		HeroScanDistance			=	150
		FearScanDistance			=	250

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=   BraceForBeingCrushed_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End

  	LocomotorSet
    		Locomotor = HumanLocomotor
    		Condition = SET_NORMAL
    		Speed     = NORMAL_FOOT_FAST_MEMBER_SPEED
  	End

	LocomotorSet
		Locomotor = BurningDeathLocomotorInfantry
		Condition = SET_BURNINGDEATH
		Speed	  = BURNINGDEATH_WANDERSPEED_INFANTRY
	End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
	ShockStunnedTimeLow		= 1400	;msec
	ShockStunnedTimeHigh	= 2400	;msec
	ShockStandingTime		= 2133	;msec
  End

	#include "..\..\..\includes\CaptureBuilding.inc"

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK -FADED
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
    Sound = INITIAL GimliVoiceDie				;MordorBannerOrcVoiceDie
  End
  

  Behavior = SlowDeathBehavior ModuleTag_FadeDeath
    DeathTypes = ALL -FADED
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
	Sound = INITIAL SpellGenericUnsummonFasterMS
 End

  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
    Sound = INITIAL GimliVoiceDie				;MordorBannerOrcVoiceDie
  End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End
	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 10000							; spawn a new member every n seconds when idle (in miliseconds)
		MeleeFreeUnitSpawnTime		= 20000							; n miliseconds units must not have been fighting to be able to spawn units when idle (in miliseconds)
		DiedRespawnTime			= 10000							; how much time must pass after Banner Carrier dies before horde can spawn another
		MeleeFreeBannerReSpawnTime	= 20000							; how much time since horde has been fighting before a new Banner Carrier can be respawned

		BannerMorphFX		= FX_BannerCarrierMorph					; name of particle FX to use when the BannerCarrier morphs into the dest unit type
		UnitSpawnFX			= FX_BannerCarrierSpawnUnit				; name of particle FX to use when the BannerCarrier spawns a new unit
	End

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; Angmar Thrall Master
Object HostOfTheWestEomer
  ; *** ART Parameters ***
	SelectPortrait = HPRohanEomer
	ButtonImage = HIRohanEomer

	Draw = W3DScriptedModelDraw ModuleTag_01_
		OkToChangeModelColor = Yes
		StaticModelLODMode = yes
		DefaultModelConditionState
			Model            = RUNEomer_SKN 
			WeaponLaunchBone = PRIMARY SPEAR
			WeaponLaunchBone = SECONDARY SPEAR 
			WeaponLaunchBone = TERTIARY SPEAR 
		End
		IdleAnimationState
			StateName = STATE_Idle
			Animation = IDLB
				AnimationName		= RUEomer_SKL.RUEomer_IDLB
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
			Animation = IDLC
				AnimationName		= RUEomer_SKL.RUEomer_IDLC
				AnimationMode		= ONCE
				AnimationPriority	= 20
			End
			Animation = IDLD
				AnimationName		= RUEomer_SKL.RUEomer_IDLD
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
			Animation = IDLE
				AnimationName		= RUEomer_SKL.RUEomer_IDLE
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected"	then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") return end
			EndScript
		End
		ModelConditionState			= MOUNTED
			Model	=	RUNEomerM_SKN
			WeaponLaunchBone = PRIMARY SPEAR
			WeaponLaunchBone = SECONDARY SPEAR
			WeaponLaunchBone = TERTIARY SPEAR 
		End
		AnimationState				=	FREEFALL MOUNTED
			Animation				=	freefall
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	STUNNED_FLAILING MOUNTED
			Animation				=	JustDie
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	DYING SPLATTED MOUNTED
			Animation				=	Land
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_LNDA
				AnimationMode		=	ONCE
			End
		End
		AnimationState				=	DYING MOUNTED
			Animation				=	JustDie
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_DIEA
				AnimationMode		=	ONCE
			End
		End
		AnimationState				=	STUNNED_STANDING_UP MOUNTED
			Animation				=	StandUp
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_GTPA
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		AnimationState				=	STUNNED MOUNTED
			Animation				=	Land
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_LNDA
				AnimationMode		=	ONCE
			End
		End
		AnimationState						= PARALYZED MOUNTED
			Animation
				AnimationName				= RUHHs_Theo_SKL.RUHHs_Theo_IDLA
				AnimationMode				= LOOP
			End
		End
		AnimationState        =  SPECIAL_WEAPON_ONE MOUNTED
			Animation           = SPRA
				AnimationName     = RUHHs_Theo_SKL.RUEomrHrs_SPRA  
				AnimationMode     = ONCE
			End
			FrameForPristineBonePositions = 60
		End
		AnimationState        =  SPECIAL_WEAPON_ONE
			StateName = Attacking_throw
			Animation
				AnimationName		= RUEomer_SKL.RUEomer_ATKE
				AnimationMode       = ONCE
			End
			FrameForPristineBonePositions = 58
		End
		AnimationState				=	MOUNTED TURN_LEFT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TNL1
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.8 1.8
				AnimationBlendTime	=	20
			End
		End
		AnimationState				=	MOUNTED TURN_RIGHT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TNR1
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.8 1.8
				AnimationBlendTime	=	20
			End
		End
		AnimationState				=	MOVING TURN_LEFT MOUNTED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TRNL
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOVING TURN_RIGHT MOUNTED
			Animation				=	TurnRight
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TRNR
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOVING ACCELERATE MOUNTED
			Animation				=	Accelerate
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ACCL
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOVING DECELERATE MOUNTED
			Animation				=	Decelerate
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_DECL
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange	= 0.55 0.55
			End
		End
		AnimationState				=	MOVING WALKING MOUNTED
			Animation				=	Walk
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_WLKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	MOVING BACKING_UP MOUNTED
			Animation				=	BackingUp
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_BAKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = MountedRunAndFire
				AnimationName       = RUHHs_Theo_SKL.RUHHs_Theo_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART  
		End
		AnimationState				=	MOVING MOUNTED
			Animation				=	RunA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_RUNA
				AnimationMode		=	LOOP
			End
 			Flags					=	RANDOMSTART
		End
		AnimationState				=	FIRING_OR_PREATTACK_A MOUNTED
			Animation				=	AttackA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATKA
				AnimationMode		=	ONCE
			End
			Animation				=	AttackB
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATKB
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState						=	PACKING_TYPE_1 MOUNTED
			StateName						=	SPELL
				Animation           =	CHRA
					AnimationName   =	RUHHs_Theo_SKL.RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End	
		End	
		AnimationState				=	RAISING_FLAG MOUNTED
				Animation           =	CHRA
					AnimationName   =	RUHHs_Theo_SKL.RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End
		End
		AnimationState				=	EMOTION_CELEBRATING MOUNTED
				Animation
					AnimationName   =	RUHHs_Theo_SKL.RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End
		End
		AnimationState				=	EMOTION_TAUNTING MOUNTED
				Animation
					AnimationName   =	RUHHs_Theo_SKL.RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End
		End
		AnimationState				=	SELECTED MOUNTED
			SimilarRestart			=   Yes			
			StateName				=	AtAttentionIdle
			Animation				=	ATNB
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLH
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
			EndScript
		End
		TransitionState				=	TRANS_Select
			Animation				=	ATNA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATNA
				AnimationMode		=	ONCE
			End
		End		
		AnimationState				= MOUNTED
			Animation
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLA
				AnimationPriority	=	20
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Animation			=	IdleB
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLB
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Animation			=	IdleC
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				=	STUNNED_FLAILING 
			Flags					=	RANDOMSTART
			Animation				=	RUEomer_FLYA
				AnimationName		=	RUEomer_SKL.RUEomer_FLYA
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			StateName = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword"	then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
			EndScript
		End
		AnimationState				=	DYING SPLATTED
			Animation				=	RUEomer_LNDA
				AnimationName		=	RUEomer_SKL.RUEomer_LNDA
				AnimationMode		=	ONCE
			End
			StateName = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword"	then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
			EndScript
		End
		AnimationState				=	DYING
			Animation				=	RUEomer_DIEA
				AnimationName		=	RUEomer_SKL.RUEomer_DIEA
				AnimationMode		=	ONCE
			End
			Animation				=	RUEomer_DIEB
				AnimationName		=	RUEomer_SKL.RUEomer_DIEB
				AnimationMode		=	ONCE
			End
		End
		AnimationState						= PARALYZED
			Animation
				AnimationName				= RUEomer_IDLA
				AnimationMode				= ONCE_BACKWARDS
			End
			Flags							= START_FRAME_FIRST
		End
		AnimationState				=	STUNNED_STANDING_UP
			Animation				=	RUEomer_GTPA
				AnimationName		=	RUEomer_SKL.RUEomer_GTPA
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		AnimationState				=	STUNNED 
			Animation				=	RUEomer_LNDA
				AnimationName		=	RUEomer_SKL.RUEomer_LNDA
				AnimationMode		=	ONCE
			End
			StateName = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword"	then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
			EndScript
		End
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = RUEomer_SKL.RUEomer_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End
		AnimationState				= MOVING PANICKING
			Animation				= MFDA
				AnimationName		= RUEomer_SKL.RUEomer_MFDA
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
		End
		AnimationState = MOVING ATTACKING
			Animation				=	RUEomer_RUNB
				AnimationName		=	RUEomer_SKL.RUEomer_RUNB
				AnimationMode		=	LOOP
				Distance            =   50
			End
		End
		AnimationState				=	MOVING 
			Flags					=	RANDOMSTART
			Animation				=	RUEomer_RUNA
				AnimationName		=	RUEomer_SKL.RUEomer_RUNA
				AnimationMode		=	LOOP
				Distance            =   30
			End
		End
		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation				=	ATKA
				AnimationName		=	RUEomer_SKL.RUEomer_ATKA
				AnimationMode		=	ONCE
				UseWeaponTiming		=   Yes
			End
			Animation				=	ATKB
				AnimationName		=	RUEomer_SKL.RUEomer_ATKB
				AnimationMode		=	ONCE
				UseWeaponTiming		=   Yes
			End
			Animation				=	ATKC
				AnimationName		=	RUEomer_SKL.RUEomer_ATKC
				AnimationMode		=	ONCE
				UseWeaponTiming		=   Yes
			End
			Animation				=	ATKD
				AnimationName		=	RUEomer_SKL.RUEomer_ATKD
				AnimationMode		=	ONCE
				UseWeaponTiming		=   Yes
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState        = ATTACKING
			Animation           = ALERT_1
				AnimationName     = RUEomer_SKL.RUEomer_IDLA
				AnimationMode     = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				=	RAISING_FLAG
				Animation           =	CHRA
					AnimationName   =	RUEomer_SKL.RUEomer_CHRA
					AnimationMode   =	ONCE
				End
				Animation           =	CHRB
					AnimationName   =	RUEomer_SKL.RUEomer_CHRB
					AnimationMode   =	ONCE
				End
				Flags				=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState						=	PACKING_TYPE_1
			StateName						=	SPELL
				Animation           =	CHRA
					AnimationName   =	RUEomer_SKL.RUEomer_CHRA
					AnimationMode   =	ONCE
				End
		End		
		AnimationState				=	SELECTED
			Animation				=	ATNB
				AnimationName		=	RUEomer_SKL.RUEomer_ATNB
				AnimationMode		=	LOOP
			End
			StateName = STATE_Selected
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle"	then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") return end
			EndScript
		End
		TransitionState = TRANS_Idle_to_Selected
			Animation = IDLF
				AnimationName		= RUEomer_SKL.RUEomer_ATNA
				AnimationMode		= ONCE
			End		
		End
		TransitionState = TRANS_Selected_to_Idle
			Animation			= ATNE
				AnimationName	= RUEomer_SKL.RUEomer_ATNE
				AnimationMode	= ONCE
			End		
		End
		AnimationState				=	EMOTION_CELEBRATING
				Animation           =	CHRA
					AnimationName   =	RUEomer_SKL.RUEomer_CHRA
					AnimationMode   =	ONCE
				End
		End
		AnimationState				=	EMOTION_TAUNTING
				Animation           =	CHRB
					AnimationName   =	RUEomer_SKL.RUEomer_CHRB
					AnimationMode   =	ONCE
				End
				Flags				=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState					= EMOTION_ALERT EMOTION_MORALE_HIGH
			Animation					= Taunting
				AnimationName			= RUEomer_SKL.RUEomer_TNTA
				AnimationMode			= ONCE
			End
			Animation					= Taunting
				AnimationName			= RUEomer_SKL.RUEomer_TNTB
				AnimationMode			= ONCE
			End
			Flags						= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState        = EMOTION_ALERT
			Animation           = ALERT_1
				AnimationName     = RUEomer_SKL.RUEomer_IDLA
				AnimationMode     = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_b
				AnimationName = RUEomer_SKL.RUEomer_HITB
				AnimationMode = ONCE
			End
		End
	TransitionState = Trans_Idle_To_Sword
		Animation = Transition
			AnimationName = GUFaramir_SKL.GUFaramir_STHA
		    AnimationMode = ONCE
		End
    End
    TransitionState = Trans_Sword_To_Idle
		Animation = Transition
			AnimationName = GUFaramir_SKL.GUFaramir_STHB
		    AnimationMode = ONCE
		End
    End
	End
    #include "..\..\..\includes\StunDrawModuleSmall.inc"



  ; ***DESIGN parameters ***
  Side = Men
  EditorSorting = UNIT
	ThreatLevel = 1.0
  TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT

  WeaponSet
    Conditions = None
    Weapon = PRIMARY    EomerSword
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End

  ArmorSet
    Conditions      = None
    Armor           = HeroArmor
    DamageFX        = NormalDamageFX
  End
  BuildCost 		= ANGMAR_THRALL_MASTER_BUILDCOST
  BuildTime			= ANGMAR_THRALL_MASTER_BUILDTIME

  VisionRange = ANGMAR_RHUDAURSLING_VISION_RANGE
    	VisionSide = 35%
	VisionRear = 25%
  ShroudClearingRange = ANGMAR_RHUDAURSLING_SHROUD_RANGE ;;.;; SHROUD_CLEAR_STANDARD

  BountyValue       = ANGMAR_THRALL_MASTER_BOUNTY_VALUE
  DisplayName = OBJECT:RohanEomer
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
  CrushRevengeWeapon = BasicInfantryCrushRevenge

  CommandSet = EmptyCommandSet
  CommandPoints = 0 ;;,;; 40


	; *** AUDIO Parameters ***;

	VoiceAttack			= EomerVoiceAttack
	VoiceAttackCharge		= EomerVoiceAttackChargeUnmounted
	VoiceAttackMachine	= EomerVoiceAttack
	VoiceAttackStructure	= EomerVoiceAttackBuilding
	VoiceFear 			= EomerVoiceHelpMe
	VoiceMove			= EomerVoiceMove
	VoiceMoveToCamp		= EomerVoiceMoveCamp
	VoiceMoveWhileAttacking	= EomerVoiceDisengage
	VoicePriority		= 74
	VoiceRetreatToCastle	= EomerVoiceRetreat
	VoiceSelect			= EomerVoiceSelectMS
	VoiceSelectBattle 	= EomerVoiceSelectBattle
	VoiceGuard			= EomerVoiceMove
	SoundImpact			= ImpactHorse
	UnitSpecificSounds
		VoiceGarrison						= EomerVoiceGarrison
		VoiceEnterUnitElvenTransportShip	= EomerVoiceMove
		VoiceInitiateCaptureBuilding		= EomerVoiceMove
	End
	ClientBehavior = ModelConditionSoundSelectorClientBehavior ModuleTag_MCSoundSelector
		SoundState = MOUNTED
			VoiceAttackCharge		= EomerVoiceAttackChargeMounted
			VoiceMove			= EomerVoiceMoveMounted
			VoiceSelect			= EomerVoiceSelectMountedMS
		End
	End
	CrowdResponseKey = GoodMen
   #include "..\..\..\includes\StandardUnitEvaEvents.inc"

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Humanoid_Male Man Man_Male Unit Infantry Hero
		UnitWeight = 2
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:FootstepDirtA			Animation:RUEomer_SKL.RUEomer_RUNA		Frames:4 15
		AnimationSound = Sound:FootstepDirtA			Animation:RUEomer_SKL.RUEomer_RUNB		Frames:5 15 26 36
		AnimationSound = Sound:SwordIntoScabbard1			Animation:RUEomer_SKL.RUEomer_ATKE 		Frames:13
		AnimationSound = Sound:EomerThrowSpear			Animation:RUEomer_SKL.RUEomer_ATKE 		Frames:55
		AnimationSound = Sound:SwordShingClean1			Animation:RUEomer_SKL.RUEomer_ATKE 		Frames:91
		AnimationSound = Sound:TauntHumanHitShield		Animation:RUEomer_SKL.RUEomer_CHRB		Frames:22 32
		AnimationSound = Sound:BodyFallGenericNoArmor		Animation:RUEomer_SKL.RUEomer_DIEA		Frames:48
		AnimationSound = Sound:BodyFallGenericNoArmor		Animation:RUEomer_SKL.RUEomer_DIEB		Frames:18
		AnimationSound = Sound:BodyFallSoldier			Animation:RUEomer_SKL.RUEomer_LNDA		Frames:2
		AnimationSound = Sound:HorseMoveFootsteps			Animation:RUHHs_Theo_SKL.RUHHs_Theo_ACCL	Frames:15 32
		AnimationSound = Sound:HorseMoveFootsteps			Animation:RUHHs_Theo_SKL.RUHHs_Theo_RUNA	Frames:0
		AnimationSound = Sound:HorseMoveFootsteps			Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNL1	Frames:0
		AnimationSound = Sound:HorseMoveFootsteps			Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNR1	Frames:0
		AnimationSound = Sound:HorseWhinny				Animation:RUHHs_Theo_SKL.RUHHs_Theo_IDLC	Frames:3
		AnimationSound = Sound:SwordIntoScabbard1			Animation:RUHHs_Theo_SKL.RUEomrHrs_SPRA	Frames:10
		AnimationSound = Sound:EomerThrowSpear			Animation:RUHHs_Theo_SKL.RUEomrHrs_SPRA	Frames:53
		AnimationSound = Sound:SwordShingClean1			Animation:RUHHs_Theo_SKL.RUEomrHrs_SPRA	Frames:75
		AnimationSound = Sound:BodyFallSoldier			Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA	Frames:3 10
		AnimationSound = Sound:HorseDieForHero			Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA	Frames:2
		AnimationSound = Sound:HorseDieForHero			Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA	Frames:0
		AnimationSound = Sound:BodyFallGenericNoArmor		Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA	Frames:6
		AnimationSound = Sound:BodyFallSoldier			Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA	Frames:45
	End

  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD INFANTRY SELECTABLE CAN_CAST_REFLECTIONS PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT BANNER  ; GRAB_AND_DROP INFANTRY Can't have this as I'll appear in the infantry bone of the mumak - Vengeful
  CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_MEDIUM

  Body = ActiveBody ModuleTag_02
    MaxHealth         = 1000
    MaxHealthDamaged  = 250
	BurningDeathBehavior = Yes
	BurningDeathFX       = FX_InfantryBurningFlame
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = No
    MoodAttackCheckRate        = 500
    HoldGroundCloseRangeDistance = 40
    AttackPriority				= 	AttackPriority_Infantry
    AILuaEventsList				=	MordorInfantryBannerFunctions
	BurningDeathTime			=	BURNINGDEATH_DURATION_INFANTRY
  End

;;.;; Added
    Behavior = AutoHealBehavior ModuleTag_ThrallMasterHealing
        StartsActive = No
        TriggeredBy = Upgrade_ObjectLevel2
        HealingAmount = 10
        HealingDelay = 1000
        StartHealingDelay = 10000
        HealOnlyIfNotInCombat = Yes
    End
;;.;;

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	350		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf					=	AOTR_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf				=	EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
		PointAt						=	EMOTION_POINTAT_OBJECTFILTER

		HeroScanDistance			=	150
		FearScanDistance			=	250

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=   BraceForBeingCrushed_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End

  	LocomotorSet
    		Locomotor = HumanLocomotor
    		Condition = SET_NORMAL
    		Speed     = NORMAL_FOOT_FAST_MEMBER_SPEED
  	End

	LocomotorSet
		Locomotor = BurningDeathLocomotorInfantry
		Condition = SET_BURNINGDEATH
		Speed	  = BURNINGDEATH_WANDERSPEED_INFANTRY
	End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
	ShockStunnedTimeLow		= 1400	;msec
	ShockStunnedTimeHigh	= 2400	;msec
	ShockStandingTime		= 2133	;msec
  End

	#include "..\..\..\includes\CaptureBuilding.inc"

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK -FADED
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
    Sound = INITIAL EomerVoiceDie				;MordorBannerOrcVoiceDie
  End
  

  Behavior = SlowDeathBehavior ModuleTag_FadeDeath
    DeathTypes = ALL -FADED
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
	Sound = INITIAL SpellGenericUnsummonFasterMS
 End

  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
    Sound = INITIAL EomerVoiceDie				;MordorBannerOrcVoiceDie
  End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End
	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 10000							; spawn a new member every n seconds when idle (in miliseconds)
		MeleeFreeUnitSpawnTime		= 20000							; n miliseconds units must not have been fighting to be able to spawn units when idle (in miliseconds)
		DiedRespawnTime			= 10000							; how much time must pass after Banner Carrier dies before horde can spawn another
		MeleeFreeBannerReSpawnTime	= 20000							; how much time since horde has been fighting before a new Banner Carrier can be respawned

		BannerMorphFX		= FX_BannerCarrierMorph					; name of particle FX to use when the BannerCarrier morphs into the dest unit type
		UnitSpawnFX			= FX_BannerCarrierSpawnUnit				; name of particle FX to use when the BannerCarrier spawns a new unit
	End

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; Angmar Thrall Master
Object HostOfTheWestImrahil
  ; *** ART Parameters ***
	SelectPortrait = HEImrahilnew
	ButtonImage = HIImrahilnew

	Draw = W3DScriptedModelDraw ModuleTag_01_
		OkToChangeModelColor = Yes
		StaticModelLODMode = yes
        DefaultModelConditionState
            Model            = guimrahil_skn
			Skeleton = EUGlrfdl_SKL
            WeaponLaunchBone = PRIMARY SPEAR
            WeaponLaunchBone = SECONDARY SPEAR
            WeaponLaunchBone = TERTIARY SPEAR
        End
		IdleAnimationState
			StateName = STATE_Idle
			Animation = IDLB
				AnimationName		= EUGlrfdl_IDLB
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
			Animation = IDLC
				AnimationName		= EUGlrfdl_IDLC
				AnimationMode		= ONCE
				AnimationPriority	= 20
			End
			Animation = IDLD
				AnimationName		= EUGlrfdl_IDLD
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
			Animation = IDLE
				AnimationName		= EUGlrfdl_IDLE
				AnimationMode		= ONCE
				AnimationPriority	= 1
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected"	then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") return end
			EndScript
		End
		ModelConditionState			= MOUNTED
			Model	=	guimrahil_hrs
			WeaponLaunchBone = PRIMARY SPEAR
			WeaponLaunchBone = SECONDARY SPEAR
			WeaponLaunchBone = TERTIARY SPEAR 
		End
		AnimationState				=	FREEFALL MOUNTED
			Animation				=	freefall
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	STUNNED_FLAILING MOUNTED
			Animation				=	JustDie
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	DYING SPLATTED MOUNTED
			Animation				=	Land
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_LNDA
				AnimationMode		=	ONCE
			End
		End
		AnimationState				=	DYING MOUNTED
			Animation				=	JustDie
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_DIEA
				AnimationMode		=	ONCE
			End
		End
		AnimationState				=	STUNNED_STANDING_UP MOUNTED
			Animation				=	StandUp
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_GTPA
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		AnimationState				=	STUNNED MOUNTED
			Animation				=	Land
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_LNDA
				AnimationMode		=	ONCE
			End
		End
		AnimationState						= PARALYZED MOUNTED
			Animation
				AnimationName				= RUHHs_Theo_SKL.RUHHs_Theo_IDLA
				AnimationMode				= LOOP
			End
		End
		AnimationState        =  SPECIAL_WEAPON_ONE MOUNTED
			Animation           = SPRA
				AnimationName     = RUHHs_Theo_SKL.RUEomrHrs_SPRA  
				AnimationMode     = ONCE
			End
			FrameForPristineBonePositions = 60
		End
		AnimationState        =  SPECIAL_WEAPON_ONE
			StateName = Attacking_throw
			Animation
				AnimationName		= RUEomer_SKL.RUEomer_ATKE
				AnimationMode       = ONCE
			End
			FrameForPristineBonePositions = 58
		End
		AnimationState				=	MOUNTED TURN_LEFT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TNL1
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.8 1.8
				AnimationBlendTime	=	20
			End
		End
		AnimationState				=	MOUNTED TURN_RIGHT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TNR1
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.8 1.8
				AnimationBlendTime	=	20
			End
		End
		AnimationState				=	MOVING TURN_LEFT MOUNTED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TRNL
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOVING TURN_RIGHT MOUNTED
			Animation				=	TurnRight
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TRNR
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOVING ACCELERATE MOUNTED
			Animation				=	Accelerate
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ACCL
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOVING DECELERATE MOUNTED
			Animation				=	Decelerate
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_DECL
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange	= 0.55 0.55
			End
		End
		AnimationState				=	MOVING WALKING MOUNTED
			Animation				=	Walk
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_WLKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	MOVING BACKING_UP MOUNTED
			Animation				=	BackingUp
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_BAKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = MountedRunAndFire
				AnimationName       = RUHHs_Theo_SKL.RUHHs_Theo_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART  
		End
		AnimationState				=	MOVING MOUNTED
			Animation				=	RunA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_RUNA
				AnimationMode		=	LOOP
			End
 			Flags					=	RANDOMSTART
		End
		AnimationState				=	FIRING_OR_PREATTACK_A MOUNTED
			Animation				=	AttackA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATKA
				AnimationMode		=	ONCE
			End
			Animation				=	AttackB
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATKB
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState						=	PACKING_TYPE_1 MOUNTED
			StateName						=	SPELL
				Animation           =	CHRA
					AnimationName   =	RUHHs_Theo_SKL.RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End	
		End	
		AnimationState				=	RAISING_FLAG MOUNTED
				Animation           =	CHRA
					AnimationName   =	RUHHs_Theo_SKL.RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End
		End
		AnimationState				=	EMOTION_CELEBRATING MOUNTED
				Animation
					AnimationName   =	RUHHs_Theo_SKL.RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End
		End
		AnimationState				=	EMOTION_TAUNTING MOUNTED
				Animation
					AnimationName   =	RUHHs_Theo_SKL.RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End
		End
		AnimationState				=	SELECTED MOUNTED
			SimilarRestart			=   Yes			
			StateName				=	AtAttentionIdle
			Animation				=	ATNB
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLH
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
			EndScript
		End
		TransitionState				=	TRANS_Select
			Animation				=	ATNA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATNA
				AnimationMode		=	ONCE
			End
		End		
		AnimationState				= MOUNTED
			Animation
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLA
				AnimationPriority	=	20
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Animation			=	IdleB
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLB
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Animation			=	IdleC
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				=	STUNNED_FLAILING 
			Flags					=	RANDOMSTART
			Animation				=	RUEomer_FLYA
				AnimationName		=	EUGlrfdl_FLYA
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			StateName = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword"	then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
			EndScript
		End
		AnimationState				=	DYING SPLATTED
			Animation				=	RUEomer_LNDA
				AnimationName		=	EUGlrfdl_LNDA
				AnimationMode		=	ONCE
			End
			StateName = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword"	then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
			EndScript
		End
		AnimationState				=	DYING
			Animation				=	RUEomer_DIEA
				AnimationName		=	EUGlrfdl_DTHA
				AnimationMode		=	ONCE
			End
		End
		AnimationState						= PARALYZED
			Animation
				AnimationName				= EUGlrfdl_IDLB
				AnimationMode				= ONCE_BACKWARDS
			End
			Flags							= START_FRAME_FIRST
		End
		AnimationState				=	STUNNED_STANDING_UP
			Animation				=	RUEomer_GTPA
				AnimationName		=	EUGlrfdl_GTPA
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		AnimationState				=	STUNNED 
			Animation				=	RUEomer_LNDA
				AnimationName		=	EUGlrfdl_LNDA
				AnimationMode		=	ONCE
			End
			StateName = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword"	then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
			EndScript
		End
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = EUGlrfdl_ATKSV2
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End
		AnimationState				= MOVING PANICKING
			Animation				= MFDA
				AnimationName		= EUGlrfdl_RUNA
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
		End
		AnimationState = MOVING ATTACKING
			Animation				=	RUEomer_RUNB
				AnimationName		=	EUGlrfdl_RUNB
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOVING 
			Flags					=	RANDOMSTART
			Animation				=	RUEomer_RUNA
				AnimationName		=	EUGlrfdl_RUNA
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation				=	ATKA
				AnimationName		=	EUGlrfdl_ATKA
				AnimationMode		=	ONCE
				UseWeaponTiming		=	Yes
			End
			Animation				=	ATKB
				AnimationName		=	EUGlrfdl_ATKB
				AnimationMode		=	ONCE
				UseWeaponTiming		=	Yes
			End
			Animation				=	ATKC
				AnimationName		=	EUGlrfdl_ATKC
				AnimationMode		=	ONCE
				UseWeaponTiming		=	Yes
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState        = ATTACKING
			Animation           = ALERT_1
				AnimationName     = EUGlrfdl_IDLA
				AnimationMode     = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				=	RAISING_FLAG
				Animation           =	CHRA
					AnimationName   =	EUGlrfdl_CHRA
					AnimationMode   =	ONCE
				End
				Flags				=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState						=	PACKING_TYPE_1
			StateName						=	SPELL
				Animation           =	CHRA
					AnimationName   =	EUGlrfdl_CHRA
					AnimationMode   =	ONCE
				End
		End		
		AnimationState				=	SELECTED
			Animation				=	ATNB
				AnimationName		=	EUGlrfdl_ATNB
				AnimationMode		=	LOOP
			End
			StateName = STATE_Selected
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle"	then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") return end
			EndScript
		End
		TransitionState = TRANS_Idle_to_Selected
			Animation = IDLF
				AnimationName		= EUGlrfdl_ATNA
				AnimationMode		= ONCE
			End		
		End
		TransitionState = TRANS_Selected_to_Idle
			Animation			= ATNE
				AnimationName	= EUGlrfdl_ATNC
				AnimationMode	= ONCE
			End		
		End
		AnimationState				=	EMOTION_CELEBRATING
				Animation           =	CHRA
					AnimationName   =	EUGlrfdl_CHRA
					AnimationMode   =	ONCE
				End
		End
		AnimationState				=	EMOTION_TAUNTING
				Animation           =	CHRB
					AnimationName   =	EUGlrfdl_TNTA
					AnimationMode   =	ONCE
				End
				Flags				=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState					= EMOTION_ALERT EMOTION_MORALE_HIGH
			Animation					= Taunting
				AnimationName			= EUGlrfdl_TNTA
				AnimationMode			= ONCE
			End
			Flags						= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState        = EMOTION_ALERT
			Animation           = ALERT_1
				AnimationName     = EUGlrfdl_IDLA
				AnimationMode     = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_b
				AnimationName = EUGlrfdl_HITA
				AnimationMode = ONCE
			End
		End
	TransitionState = Trans_Idle_To_Sword
		Animation = Transition
			AnimationName = GUFaramir_SKL.GUFaramir_STHA
		    AnimationMode = ONCE
		End
    End
    TransitionState = Trans_Sword_To_Idle
		Animation = Transition
			AnimationName = GUFaramir_SKL.GUFaramir_STHB
		    AnimationMode = ONCE
		End
    End
	End
    #include "..\..\..\includes\StunDrawModuleSmall.inc"

  ; ***DESIGN parameters ***
  Side = Men
  EditorSorting = UNIT
	ThreatLevel = 1.0
  TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT

  WeaponSet
    Conditions = None
    Weapon = PRIMARY    TheodenSword
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End

  ArmorSet
    Conditions      = None
    Armor           = HeroArmor
    DamageFX        = NormalDamageFX
  End
  BuildCost 		= ANGMAR_THRALL_MASTER_BUILDCOST
  BuildTime			= ANGMAR_THRALL_MASTER_BUILDTIME

  VisionRange = ANGMAR_RHUDAURSLING_VISION_RANGE
    	VisionSide = 35%
	VisionRear = 25%
  ShroudClearingRange = ANGMAR_RHUDAURSLING_SHROUD_RANGE ;;.;; SHROUD_CLEAR_STANDARD

  BountyValue       = ANGMAR_THRALL_MASTER_BOUNTY_VALUE
  DisplayName = OBJECT:GondorImrahil
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
  CrushRevengeWeapon = BasicInfantryCrushRevenge

  CommandSet = EmptyCommandSet
  CommandPoints = 0 ;;,;; 40


	; *** AUDIO Parameters ***;

	VoiceAttack					= ImrahilVoiceAttack
	VoiceAttackStructure			= ImrahilVoiceAttackBuilding
	VoiceAttackMachine			= ImrahilVoiceAttack
	VoiceAttackCharge				= ImrahilVoiceAttackCharge
	VoiceEnterStateAttack			= ImrahilVoiceEnterStateAttack
	VoiceEnterStateAttackStructure	= ImrahilVoiceEnterStateAttackBuilding
	VoiceEnterStateAttackMachine		= ImrahilVoiceEnterStateAttack
	VoiceEnterStateAttackCharge		= ImrahilVoiceEnterStateAttackCharge
	;VoiceCreated				= EarnurVoiceSalute
	VoiceFear 					= ImrahilVoiceHelpMe
	VoiceMove					= ImrahilVoiceMove
	VoiceMoveToCamp				= ImrahilVoiceMoveCamp
	VoiceMoveWhileAttacking			= ImrahilVoiceDisengage
	VoiceEnterStateMove			= ImrahilVoiceEnterStateMove
	VoiceEnterStateMoveToCamp		= ImrahilVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking	= ImrahilVoiceEnterStateDisengage
	VoicePriority				= 90
	VoiceRetreatToCastle			= ImrahilVoiceRetreat
	VoiceEnterStateRetreatToCastle	= ImrahilVoiceEnterStateRetreat
	VoiceSelect					= ImrahilVoiceSelectMS
	VoiceSelectBattle				= ImrahilVoiceSelectBattle
	VoiceGuard					= ImrahilVoiceMove
	SoundImpact					= ImpactHorse
	UnitSpecificSounds
		VoiceEnterUnitElvenTransportShip	= ImrahilVoiceMoveGarrison
		VoiceGarrison						= ImrahilVoiceMoveGarrison
		VoiceInitiateCaptureBuilding		= ImrahilVoiceCaptureBuilding
	End
	ClientBehavior = ModelConditionSoundSelectorClientBehavior ModuleTag_MCSoundSelector
		SoundState = MOUNTED
			VoiceMove			= ImrahilVoiceMove
			VoiceAttack					= ImrahilVoiceAttackMounted
			VoiceAttackStructure			= ImrahilVoiceAttackBuilding
			VoiceAttackMachine			= ImrahilVoiceAttackMounted
			VoiceAttackCharge				= ImrahilVoiceAttackCharge
			VoiceEnterStateAttack			= ImrahilVoiceEnterStateAttackMounted
			VoiceEnterStateAttackCharge		= ImrahilVoiceEnterStateAttackCharge
			VoiceSelect					= ImrahilVoiceSelectMountedMS
;			VoiceSelect			= TheodenVoiceSelectMountedMS
		End
	End
	CrowdResponseKey = GoodMen
   #include "..\..\..\includes\StandardUnitEvaEvents.inc"

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Humanoid_Male Man Man_Male Unit Infantry Hero
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:FootstepDirtA			Animation:RUEomer_SKL.RUEomer_RUNA		Frames:4 15
		AnimationSound = Sound:FootstepDirtA			Animation:RUEomer_SKL.RUEomer_RUNB		Frames:5 15 26 36
		AnimationSound = Sound:SwordIntoScabbard1			Animation:RUEomer_SKL.RUEomer_ATKE 		Frames:13
		AnimationSound = Sound:EomerThrowSpear			Animation:RUEomer_SKL.RUEomer_ATKE 		Frames:55
		AnimationSound = Sound:SwordShingClean1			Animation:RUEomer_SKL.RUEomer_ATKE 		Frames:91
		AnimationSound = Sound:TauntHumanHitShield		Animation:RUEomer_SKL.RUEomer_CHRB		Frames:22 32
		AnimationSound = Sound:BodyFallGenericNoArmor		Animation:RUEomer_SKL.RUEomer_DIEA		Frames:48
		AnimationSound = Sound:BodyFallGenericNoArmor		Animation:RUEomer_SKL.RUEomer_DIEB		Frames:18
		AnimationSound = Sound:BodyFallSoldier			Animation:RUEomer_SKL.RUEomer_LNDA		Frames:2
		AnimationSound = Sound:HorseMoveFootsteps			Animation:RUHHs_Theo_SKL.RUHHs_Theo_ACCL	Frames:15 32
		AnimationSound = Sound:HorseMoveFootsteps			Animation:RUHHs_Theo_SKL.RUHHs_Theo_RUNA	Frames:0
		AnimationSound = Sound:HorseMoveFootsteps			Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNL1	Frames:0
		AnimationSound = Sound:HorseMoveFootsteps			Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNR1	Frames:0
		AnimationSound = Sound:HorseWhinny				Animation:RUHHs_Theo_SKL.RUHHs_Theo_IDLC	Frames:3
		AnimationSound = Sound:SwordIntoScabbard1			Animation:RUHHs_Theo_SKL.RUEomrHrs_SPRA	Frames:10
		AnimationSound = Sound:EomerThrowSpear			Animation:RUHHs_Theo_SKL.RUEomrHrs_SPRA	Frames:53
		AnimationSound = Sound:SwordShingClean1			Animation:RUHHs_Theo_SKL.RUEomrHrs_SPRA	Frames:75
		AnimationSound = Sound:BodyFallSoldier			Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA	Frames:3 10
		AnimationSound = Sound:HorseDieForHero			Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA	Frames:2
		AnimationSound = Sound:HorseDieForHero			Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA	Frames:0
		AnimationSound = Sound:BodyFallGenericNoArmor		Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA	Frames:6
		AnimationSound = Sound:BodyFallSoldier			Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA	Frames:45
	End

  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD INFANTRY SELECTABLE CAN_CAST_REFLECTIONS PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT BANNER  ; GRAB_AND_DROP INFANTRY Can't have this as I'll appear in the infantry bone of the mumak - Vengeful
  CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_MEDIUM

  Body = ActiveBody ModuleTag_02
    MaxHealth         = 1000
    MaxHealthDamaged  = 250
	BurningDeathBehavior = Yes
	BurningDeathFX       = FX_InfantryBurningFlame
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = No
    MoodAttackCheckRate        = 500
    HoldGroundCloseRangeDistance = 40
    AttackPriority				= 	AttackPriority_Infantry
    AILuaEventsList				=	MordorInfantryBannerFunctions
	BurningDeathTime			=	BURNINGDEATH_DURATION_INFANTRY
  End

;;.;; Added
    Behavior = AutoHealBehavior ModuleTag_ThrallMasterHealing
        StartsActive = No
        TriggeredBy = Upgrade_ObjectLevel2
        HealingAmount = 10
        HealingDelay = 1000
        StartHealingDelay = 10000
        HealOnlyIfNotInCombat = Yes
    End
;;.;;

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	350		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf					=	AOTR_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf				=	EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
		PointAt						=	EMOTION_POINTAT_OBJECTFILTER

		HeroScanDistance			=	150
		FearScanDistance			=	250

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=   BraceForBeingCrushed_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End

  	LocomotorSet
    		Locomotor = HumanLocomotor
    		Condition = SET_NORMAL
    		Speed     = NORMAL_FOOT_FAST_MEMBER_SPEED
  	End

	LocomotorSet
		Locomotor = BurningDeathLocomotorInfantry
		Condition = SET_BURNINGDEATH
		Speed	  = BURNINGDEATH_WANDERSPEED_INFANTRY
	End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
	ShockStunnedTimeLow		= 1400	;msec
	ShockStunnedTimeHigh	= 2400	;msec
	ShockStandingTime		= 2133	;msec
  End

	#include "..\..\..\includes\CaptureBuilding.inc"

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK -FADED
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
    Sound = INITIAL EomerVoiceDie				;MordorBannerOrcVoiceDie
  End
  

  Behavior = SlowDeathBehavior ModuleTag_FadeDeath
    DeathTypes = ALL -FADED
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
	Sound = INITIAL SpellGenericUnsummonFasterMS
 End

  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
    Sound = INITIAL ImrahilVoiceDie				;MordorBannerOrcVoiceDie
  End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End
	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 10000							; spawn a new member every n seconds when idle (in miliseconds)
		MeleeFreeUnitSpawnTime		= 20000							; n miliseconds units must not have been fighting to be able to spawn units when idle (in miliseconds)
		DiedRespawnTime			= 10000							; how much time must pass after Banner Carrier dies before horde can spawn another
		MeleeFreeBannerReSpawnTime	= 20000							; how much time since horde has been fighting before a new Banner Carrier can be respawned

		BannerMorphFX		= FX_BannerCarrierMorph					; name of particle FX to use when the BannerCarrier morphs into the dest unit type
		UnitSpawnFX			= FX_BannerCarrierSpawnUnit				; name of particle FX to use when the BannerCarrier spawns a new unit
	End

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; Angmar Thrall Master
Object HostOfTheWestElladan
  ; *** ART Parameters ***
	SelectPortrait = HPrivElladan
	ButtonImage = HIrivelladan

	Draw = W3DScriptedModelDraw ModuleTag_01_
		OkToChangeModelColor = Yes
		StaticModelLODMode = yes
        DefaultModelConditionState
            Model            = auelladan_ha
			Skeleton = GUFaramir_SKL
        End
		IdleAnimationState
			StateName = STATE_Idle
			Animation           		= IDLE
				AnimationName       	= auelladan_idla
				; AnimationMode       	= LOOP
				AnimationPriority	    = 6
				AnimationBlendTime  = 15
			End
			Animation           		= IDLF
				AnimationName       	= auelladan_idlb
				; AnimationMode       	= LOOP
				AnimationPriority	    = 1
			End
			Animation           		= IDLG
				AnimationName       	= auelladan_idlc
				; AnimationMode       	= LOOP
				AnimationPriority	    = 1
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected"	then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") return end
			EndScript
		End
		ModelConditionState			= MOUNTED
			Model	=	auelladanHA_mtd 
		End
		AnimationState				=	FREEFALL MOUNTED
			Animation				=	freefall
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	STUNNED_FLAILING MOUNTED
			Animation				=	JustDie
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	DYING SPLATTED MOUNTED
			Animation				=	Land
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_LNDA
				AnimationMode		=	ONCE
			End
		End
		AnimationState				=	DYING MOUNTED
			Animation				=	JustDie
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_DIEA
				AnimationMode		=	ONCE
			End
		End
		AnimationState				=	STUNNED_STANDING_UP MOUNTED
			Animation				=	StandUp
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_GTPA
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		AnimationState				=	STUNNED MOUNTED
			Animation				=	Land
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_LNDA
				AnimationMode		=	ONCE
			End
		End
		AnimationState						= PARALYZED MOUNTED
			Animation
				AnimationName				= RUHHs_Theo_SKL.RUHHs_Theo_IDLA
				AnimationMode				= LOOP
			End
		End
		AnimationState        =  SPECIAL_WEAPON_ONE MOUNTED
			Animation           = SPRA
				AnimationName     = RUHHs_Theo_SKL.RUEomrHrs_SPRA  
				AnimationMode     = ONCE
			End
			FrameForPristineBonePositions = 60
		End
		AnimationState        =  SPECIAL_WEAPON_ONE
			StateName = Attacking_throw
			Animation
				AnimationName		= gumithilrS_atkb
				AnimationMode       = ONCE
			End
			FrameForPristineBonePositions = 58
		End
		AnimationState				=	MOUNTED TURN_LEFT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TNL1
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.8 1.8
				AnimationBlendTime	=	20
			End
		End
		AnimationState				=	MOUNTED TURN_RIGHT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TNR1
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.8 1.8
				AnimationBlendTime	=	20
			End
		End
		AnimationState				=	MOVING TURN_LEFT MOUNTED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TRNL
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOVING TURN_RIGHT MOUNTED
			Animation				=	TurnRight
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TRNR
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOVING ACCELERATE MOUNTED
			Animation				=	Accelerate
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ACCL
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOVING DECELERATE MOUNTED
			Animation				=	Decelerate
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_DECL
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange	= 0.55 0.55
			End
		End
		AnimationState				=	MOVING WALKING MOUNTED
			Animation				=	Walk
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_WLKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	MOVING BACKING_UP MOUNTED
			Animation				=	BackingUp
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_BAKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = MountedRunAndFire
				AnimationName       = RUHHs_Theo_SKL.RUHHs_Theo_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART  
		End
		AnimationState				=	MOVING MOUNTED
			Animation				=	RunA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_RUNA
				AnimationMode		=	LOOP
			End
 			Flags					=	RANDOMSTART
		End
		AnimationState				=	FIRING_OR_PREATTACK_A MOUNTED
			Animation				=	AttackA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATKA
				AnimationMode		=	ONCE
			End
			Animation				=	AttackB
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATKB
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState						=	PACKING_TYPE_1 MOUNTED
			StateName						=	SPELL
				Animation           =	CHRA
					AnimationName   =	RUHHs_Theo_SKL.RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End	
		End	
		AnimationState				=	RAISING_FLAG MOUNTED
				Animation           =	CHRA
					AnimationName   =	RUHHs_Theo_SKL.RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End
		End
		AnimationState				=	EMOTION_CELEBRATING MOUNTED
				Animation
					AnimationName   =	RUHHs_Theo_SKL.RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End
		End
		AnimationState				=	EMOTION_TAUNTING MOUNTED
				Animation
					AnimationName   =	RUHHs_Theo_SKL.RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End
		End
		AnimationState				=	SELECTED MOUNTED
			SimilarRestart			=   Yes			
			StateName				=	AtAttentionIdle
			Animation				=	ATNB
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLH
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
			EndScript
		End
		TransitionState				=	TRANS_Select
			Animation				=	ATNA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATNA
				AnimationMode		=	ONCE
			End
		End		
		AnimationState				= MOUNTED
			Animation
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLA
				AnimationPriority	=	20
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Animation			=	IdleB
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLB
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Animation			=	IdleC
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				=	STUNNED_FLAILING 
			Flags					=	RANDOMSTART
			Animation				=	RUEomer_FLYA
				AnimationName		=	GUFaramir_FLYB
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			StateName = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword"	then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
			EndScript
		End
		AnimationState				=	DYING SPLATTED
			Animation				=	RUEomer_LNDA
				AnimationName		=	GUFaramir_LNDB
				AnimationMode		=	ONCE
			End
			StateName = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword"	then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
			EndScript
		End
		AnimationState				=	DYING
			Animation           = GUFaramir_DIEA
				AnimationName     = GUFaramir_DIEA
				AnimationMode     = ONCE
			End
			Animation           = GUFaramir_DIEB
				AnimationName     = GUFaramir_DIEB
				AnimationMode     = ONCE
			End
		End
		AnimationState						= PARALYZED
			Animation
				AnimationName				= GUFaramir_IDLC
				AnimationMode				= ONCE_BACKWARDS
			End
			Flags							= START_FRAME_FIRST
		End
		AnimationState				=	STUNNED_STANDING_UP
			Animation				=	RUEomer_GTPA
				AnimationName		=	GUFaramir_GTPB
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		AnimationState				=	STUNNED 
			Animation				=	RUEomer_LNDA
				AnimationName		=	GUFaramir_LNDB
				AnimationMode		=	ONCE
			End
			StateName = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword"	then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
			EndScript
		End
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = GUFaramir_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End
		AnimationState				= MOVING PANICKING
			Animation				= MFDA
				AnimationName		= auelladan_runa
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
		End
		AnimationState = MOVING ATTACKING
			Animation				=	RUEomer_RUNB
				AnimationName		=	auelladan_runa
				AnimationMode		=	LOOP
				Distance            =   50
			End
		End
		AnimationState				=	MOVING 
			Flags					=	RANDOMSTART
			Animation				=	RUEomer_RUNA
				AnimationName		=	auelladan_runa
				AnimationMode		=	LOOP
				Distance            =   30
			End
		End
		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation				=	ATKA
				AnimationName		=	auelladan_atka
				AnimationMode		=	ONCE
				UseWeaponTiming		=	Yes
			End
			Animation				=	ATKB
				AnimationName		=	auelladan_atkb
				AnimationMode		=	ONCE
				UseWeaponTiming		=	Yes
			End
			Animation				=	ATKC
				AnimationName		=	auelladan_atkc
				AnimationMode		=	ONCE
				UseWeaponTiming		=	Yes
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState        = ATTACKING
			Animation           = ALERT_1
				AnimationName     = auelladan_idlaA
				AnimationMode     = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				=	RAISING_FLAG
				Animation           =	CHRA
					AnimationName   =	GUFaramir_CHRC
					AnimationMode   =	ONCE
				End
				Flags				=	RESTART_ANIM_WHEN_COMPLETE
		End	
		AnimationState				=	SELECTED
			Animation				=	ATNB
				AnimationName		=	GUFaramir_ATNE
				AnimationMode		=	LOOP
			End
			StateName = STATE_Selected
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle"	then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") return end
			EndScript
		End
		TransitionState = TRANS_Idle_to_Selected
			Animation = IDLF
				AnimationName		= auelladan_atnf
				AnimationMode		= ONCE_BACKWARDS
			End		
		End
		TransitionState = TRANS_Selected_to_Idle
			Animation			= ATNE
				AnimationName	= auelladan_atnf
				AnimationMode	= ONCE
			End		
		End
		AnimationState				=	EMOTION_CELEBRATING
				Animation           =	CHRA
					AnimationName   =	GUFaramir_CHRC
					AnimationMode   =	ONCE
				End
		End
		AnimationState				=	EMOTION_TAUNTING
				Animation           =	CHRB
					AnimationName   =	GUFaramir_TNTC
					AnimationMode   =	ONCE
				End
				Flags				=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState					= EMOTION_ALERT EMOTION_MORALE_HIGH
			Animation					= Taunting
				AnimationName			= GUFaramir_TNTC
				AnimationMode			= ONCE
			End
			Flags						= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState        = EMOTION_ALERT
			Animation           = ALERT_1
				AnimationName     = auelladan_idlaA
				AnimationMode     = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_b
				AnimationName = GUFaramir_HITB
				AnimationMode = ONCE
			End
		End
	TransitionState = Trans_Idle_To_Sword
		Animation = Transition
			AnimationName = GUFaramir_SKL.GUFaramir_STHA
		    AnimationMode = ONCE
		End
    End
    TransitionState = Trans_Sword_To_Idle
		Animation = Transition
			AnimationName = GUFaramir_SKL.GUFaramir_STHB
		    AnimationMode = ONCE
		End
    End
	End
    #include "..\..\..\includes\StunDrawModuleSmall.inc"

  ; ***DESIGN parameters ***
  Side = Men
  EditorSorting = UNIT
	ThreatLevel = 1.0
  TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT

  WeaponSet
    Conditions = None
    Weapon = PRIMARY    ElladanSword
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End

  ArmorSet
    Conditions      = None
    Armor           = HeroArmor
    DamageFX        = NormalDamageFX
  End
  BuildCost 		= ANGMAR_THRALL_MASTER_BUILDCOST
  BuildTime			= ANGMAR_THRALL_MASTER_BUILDTIME

  VisionRange = ANGMAR_RHUDAURSLING_VISION_RANGE
    	VisionSide = 35%
	VisionRear = 25%
  ShroudClearingRange = ANGMAR_RHUDAURSLING_SHROUD_RANGE ;;.;; SHROUD_CLEAR_STANDARD

  BountyValue       = ANGMAR_THRALL_MASTER_BOUNTY_VALUE
  DisplayName = OBJECT:Elladan
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
  CrushRevengeWeapon = BasicInfantryCrushRevenge

  CommandSet = EmptyCommandSet
  CommandPoints = 0 ;;,;; 40


	; *** AUDIO Parameters ***;

	VoiceAttack				= ElladanVoiceAttack
	VoiceAttackAir				= ElladanVoiceAttack
	VoiceAttackCharge			= ElladanVoiceAttackCharge
	VoiceAttackMachine		= ElladanVoiceAttack
	VoiceAttackStructure		= ElladanVoiceAttackBuilding
	VoiceMove				= ElladanVoiceMove
	VoiceMoveToCamp			= ElladanVoiceMoveCamp
	VoiceMoveWhileAttacking		= ElladanVoiceDisengage
	VoicePriority			= 82
	VoiceRetreatToCastle		= ElladanVoiceRetreat
	VoiceSelect				= ElladanVoiceSelectMS
	VoiceSelectBattle 		= ElladanVoiceSelectBattle
	VoiceGuard				= ElladanVoiceMove
	VoiceFear 				= ElladanVoiceHelpMe
	SoundImpact				= ImpactHorse
	UnitSpecificSounds
		VoiceGarrison		= ElladanVoiceGarrison
		VoiceEnterUnitElvenTransportShip	= ElladanVoiceMove
		VoiceInitiateCaptureBuilding		= ElladanVoiceMove
		VoiceMoveToTrees	= ElladanVoiceMove			
	End
	
	CrowdResponseKey = ElfHero
   #include "..\..\..\includes\StandardUnitEvaEvents.inc"

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Humanoid_Male Elf_Male Unit Infantry Hero
	End
	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:FootstepDirtA		Animation:GUFaramir_SKL.auelrohir_runa		Frames:11 21
		AnimationSound = Sound:FootstepDirtA		Animation:GUFaramir_SKL.GUFaramir_RUNB		Frames:2 12
		AnimationSound = Sound:WeaponSwitchBow		Animation:GUFaramir_SKL.GUFaramir_ATKC		Frames:18
		AnimationSound = Sound:SwordShingClean1		Animation:GUFaramir_SKL.GUFaramir_STHA		Frames:21
		AnimationSound = Sound:SwordIntoScabbard1		Animation:GUFaramir_SKL.GUFaramir_STHB		Frames:11
		AnimationSound = Sound:WeaponSwitchBow		Animation:GUFaramir_SKL.GUFaramir_STHB		Frames:28
		AnimationSound = Sound:SwordIntoScabbard1		Animation:GUFaramir_SKL.GUFaramir_STHC		Frames:2
		AnimationSound = Sound:WeaponSwitchBow		Animation:GUFaramir_SKL.GUFaramir_STHC		Frames:3
		AnimationSound = Sound:SwordShingClean1		Animation:GUFaramir_SKL.GUFaramir_STHD		Frames:6
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:GUFaramir_SKL.GUFaramir_DIEA		Frames:88
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:GUFaramir_SKL.GUFaramir_DIEB		Frames:85
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:GUFaramir_SKL.GUFaramir_DIEC		Frames:49
		AnimationSound = Sound:BodyFallSoldier		Animation:GUFaramir_SKL.GUFaramir_LNDA		Frames:3
		AnimationSound = Sound:BodyFallSoldier		Animation:GUFaramir_SKL.GUFaramir_LNDB		Frames:2
		AnimationSound = Sound:HorseMoveFootsteps		Animation:RUHHs_Theo_SKL.RUHHs_Theo_ACCL		Frames:14 32
		AnimationSound = Sound:HorseMoveFootsteps		Animation:RUHHs_Theo_SKL.RUHHs_Theo_RUNA		Frames:0
		AnimationSound = Sound:HorseMoveFootsteps		Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNL1		Frames:0
		AnimationSound = Sound:HorseMoveFootsteps		Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNR1		Frames:0
		AnimationSound = Sound:HorseWhinny50Percent	Animation:RUHHs_Theo_SKL.RUHHs_Theo_IDLC		Frames:0
		AnimationSound = Sound:HorseDieForHero		Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA		Frames:0
		AnimationSound = Sound:BodyFallSoldier		Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA		Frames:1 9
		AnimationSound = Sound:HorseDieForHero		Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA		Frames:0
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA		Frames:4
		AnimationSound = Sound:BodyFallSoldier		Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA		Frames:42
	End

  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD INFANTRY SELECTABLE CAN_CAST_REFLECTIONS PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT BANNER  ; GRAB_AND_DROP INFANTRY Can't have this as I'll appear in the infantry bone of the mumak - Vengeful
  CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_MEDIUM

  Body = ActiveBody ModuleTag_02
    MaxHealth         = 1000
    MaxHealthDamaged  = 250
	BurningDeathBehavior = Yes
	BurningDeathFX       = FX_InfantryBurningFlame
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = No
    MoodAttackCheckRate        = 500
    HoldGroundCloseRangeDistance = 40
    AttackPriority				= 	AttackPriority_Infantry
    AILuaEventsList				=	MordorInfantryBannerFunctions
	BurningDeathTime			=	BURNINGDEATH_DURATION_INFANTRY
  End

;;.;; Added
    Behavior = AutoHealBehavior ModuleTag_ThrallMasterHealing
        StartsActive = No
        TriggeredBy = Upgrade_ObjectLevel2
        HealingAmount = 10
        HealingDelay = 1000
        StartHealingDelay = 10000
        HealOnlyIfNotInCombat = Yes
    End
;;.;;

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	350		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf					=	AOTR_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf				=	EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
		PointAt						=	EMOTION_POINTAT_OBJECTFILTER

		HeroScanDistance			=	150
		FearScanDistance			=	250

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=   BraceForBeingCrushed_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End

  	LocomotorSet
    		Locomotor = HumanLocomotor
    		Condition = SET_NORMAL
    		Speed     = NORMAL_FOOT_FAST_MEMBER_SPEED
  	End

	LocomotorSet
		Locomotor = BurningDeathLocomotorInfantry
		Condition = SET_BURNINGDEATH
		Speed	  = BURNINGDEATH_WANDERSPEED_INFANTRY
	End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
	ShockStunnedTimeLow		= 1400	;msec
	ShockStunnedTimeHigh	= 2400	;msec
	ShockStandingTime		= 2133	;msec
  End

	#include "..\..\..\includes\CaptureBuilding.inc"

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK -FADED
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
    Sound = INITIAL ElladanVoiceDie				;MordorBannerOrcVoiceDie
  End
  

  Behavior = SlowDeathBehavior ModuleTag_FadeDeath
    DeathTypes = ALL -FADED
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
	Sound = INITIAL SpellGenericUnsummonFasterMS
 End

  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
    Sound = INITIAL ElladanVoiceDie				;MordorBannerOrcVoiceDie
  End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End
	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 10000							; spawn a new member every n seconds when idle (in miliseconds)
		MeleeFreeUnitSpawnTime		= 20000							; n miliseconds units must not have been fighting to be able to spawn units when idle (in miliseconds)
		DiedRespawnTime			= 10000							; how much time must pass after Banner Carrier dies before horde can spawn another
		MeleeFreeBannerReSpawnTime	= 20000							; how much time since horde has been fighting before a new Banner Carrier can be respawned

		BannerMorphFX		= FX_BannerCarrierMorph					; name of particle FX to use when the BannerCarrier morphs into the dest unit type
		UnitSpawnFX			= FX_BannerCarrierSpawnUnit				; name of particle FX to use when the BannerCarrier spawns a new unit
	End

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End

;------------------------------------------------------------------------------
; Angmar Thrall Master
Object HostOfTheWestElrohir
  ; *** ART Parameters ***
	SelectPortrait = HPrivElrohir
	ButtonImage = HIrivelrohir

	Draw = W3DScriptedModelDraw ModuleTag_01_
		OkToChangeModelColor = Yes
		StaticModelLODMode = yes
        DefaultModelConditionState
            Model            = auelrohir_ha
			Skeleton = GUFaramir_SKL
        End
		IdleAnimationState
			StateName = STATE_Idle
			Animation           		= IDLE
				AnimationName       	= auelladan_idla
				; AnimationMode       	= LOOP
				AnimationPriority	    = 6
				AnimationBlendTime  = 15
			End
			Animation           		= IDLF
				AnimationName       	= auelladan_idlb
				; AnimationMode       	= LOOP
				AnimationPriority	    = 1
			End
			Animation           		= IDLG
				AnimationName       	= auelladan_idlc
				; AnimationMode       	= LOOP
				AnimationPriority	    = 1
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected"	then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") return end
			EndScript
		End
		ModelConditionState			= MOUNTED
			Model	=	auelrohirHA_mtd 
		End
		AnimationState				=	FREEFALL MOUNTED
			Animation				=	freefall
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	STUNNED_FLAILING MOUNTED
			Animation				=	JustDie
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_FLYC
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	DYING SPLATTED MOUNTED
			Animation				=	Land
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_LNDA
				AnimationMode		=	ONCE
			End
		End
		AnimationState				=	DYING MOUNTED
			Animation				=	JustDie
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_DIEA
				AnimationMode		=	ONCE
			End
		End
		AnimationState				=	STUNNED_STANDING_UP MOUNTED
			Animation				=	StandUp
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_GTPA
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		AnimationState				=	STUNNED MOUNTED
			Animation				=	Land
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_LNDA
				AnimationMode		=	ONCE
			End
		End
		AnimationState						= PARALYZED MOUNTED
			Animation
				AnimationName				= RUHHs_Theo_SKL.RUHHs_Theo_IDLA
				AnimationMode				= LOOP
			End
		End
		AnimationState        =  SPECIAL_WEAPON_ONE MOUNTED
			Animation           = SPRA
				AnimationName     = RUHHs_Theo_SKL.RUEomrHrs_SPRA  
				AnimationMode     = ONCE
			End
			FrameForPristineBonePositions = 60
		End
		AnimationState        =  SPECIAL_WEAPON_ONE
			StateName = Attacking_throw
			Animation
				AnimationName		= gumithilrS_atkb
				AnimationMode       = ONCE
			End
			FrameForPristineBonePositions = 58
		End
		AnimationState				=	MOUNTED TURN_LEFT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TNL1
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.8 1.8
				AnimationBlendTime	=	20
			End
		End
		AnimationState				=	MOUNTED TURN_RIGHT_HIGH_SPEED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TNR1
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange= 1.8 1.8
				AnimationBlendTime	=	20
			End
		End
		AnimationState				=	MOVING TURN_LEFT MOUNTED
			Animation				=	TurnLeft
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TRNL
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOVING TURN_RIGHT MOUNTED
			Animation				=	TurnRight
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_TRNR
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOVING ACCELERATE MOUNTED
			Animation				=	Accelerate
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ACCL
				AnimationMode		=	LOOP
			End
		End
		AnimationState				=	MOVING DECELERATE MOUNTED
			Animation				=	Decelerate
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_DECL
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange	= 0.55 0.55
			End
		End
		AnimationState				=	MOVING WALKING MOUNTED
			Animation				=	Walk
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_WLKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState				=	MOVING BACKING_UP MOUNTED
			Animation				=	BackingUp
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_BAKA
				AnimationMode		=	LOOP
			End
			Flags					=	RANDOMSTART
		End
		AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = MountedRunAndFire
				AnimationName       = RUHHs_Theo_SKL.RUHHs_Theo_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART  
		End
		AnimationState				=	MOVING MOUNTED
			Animation				=	RunA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_RUNA
				AnimationMode		=	LOOP
			End
 			Flags					=	RANDOMSTART
		End
		AnimationState				=	FIRING_OR_PREATTACK_A MOUNTED
			Animation				=	AttackA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATKA
				AnimationMode		=	ONCE
			End
			Animation				=	AttackB
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATKB
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState						=	PACKING_TYPE_1 MOUNTED
			StateName						=	SPELL
				Animation           =	CHRA
					AnimationName   =	RUHHs_Theo_SKL.RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End	
		End	
		AnimationState				=	RAISING_FLAG MOUNTED
				Animation           =	CHRA
					AnimationName   =	RUHHs_Theo_SKL.RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End
		End
		AnimationState				=	EMOTION_CELEBRATING MOUNTED
				Animation
					AnimationName   =	RUHHs_Theo_SKL.RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End
		End
		AnimationState				=	EMOTION_TAUNTING MOUNTED
				Animation
					AnimationName   =	RUHHs_Theo_SKL.RUHHs_Theo_CHRA
					AnimationMode   =	LOOP
				End
		End
		AnimationState				=	SELECTED MOUNTED
			SimilarRestart			=   Yes			
			StateName				=	AtAttentionIdle
			Animation				=	ATNB
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLH
				AnimationMode		=	LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
				if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
			EndScript
		End
		TransitionState				=	TRANS_Select
			Animation				=	ATNA
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_ATNA
				AnimationMode		=	ONCE
			End
		End		
		AnimationState				= MOUNTED
			Animation
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLA
				AnimationPriority	=	20
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Animation			=	IdleB
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLB
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Animation			=	IdleC
				AnimationName		=	RUHHs_Theo_SKL.RUHHs_Theo_IDLC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	15
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				=	STUNNED_FLAILING 
			Flags					=	RANDOMSTART
			Animation				=	RUEomer_FLYA
				AnimationName		=	GUFaramir_FLYB
				AnimationMode		=	LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			StateName = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword"	then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
			EndScript
		End
		AnimationState				=	DYING SPLATTED
			Animation				=	RUEomer_LNDA
				AnimationName		=	GUFaramir_LNDB
				AnimationMode		=	ONCE
			End
			StateName = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword"	then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
			EndScript
		End
		AnimationState				=	DYING
			Animation           = GUFaramir_DIEA
				AnimationName     = GUFaramir_DIEA
				AnimationMode     = ONCE
			End
			Animation           = GUFaramir_DIEB
				AnimationName     = GUFaramir_DIEB
				AnimationMode     = ONCE
			End
		End
		AnimationState						= PARALYZED
			Animation
				AnimationName				= GUFaramir_IDLC
				AnimationMode				= ONCE_BACKWARDS
			End
			Flags							= START_FRAME_FIRST
		End
		AnimationState				=	STUNNED_STANDING_UP
			Animation				=	RUEomer_GTPA
				AnimationName		=	GUFaramir_GTPB
				AnimationMode		=	ONCE
				AnimationSpeedFactorRange = 1.5 1.5
			End
		End
		AnimationState				=	STUNNED 
			Animation				=	RUEomer_LNDA
				AnimationName		=	GUFaramir_LNDB
				AnimationMode		=	ONCE
			End
			StateName = NoSword
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Sword"	then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
			EndScript
		End
		AnimationState        = MOVING FIRING_OR_PREATTACK_A
			ShareAnimation		= Yes
			Animation           = RunAndFire
				AnimationName       = GUFaramir_ATRA
				AnimationMode       = LOOP
			End
			Flags               = RANDOMSTART 
		End
		AnimationState				= MOVING PANICKING
			Animation				= MFDA
				AnimationName		= auelrohir_runa
				AnimationMode		= LOOP
			End
			Flags					= RANDOMSTART
		End
		AnimationState = MOVING ATTACKING
			Animation				=	RUEomer_RUNB
				AnimationName		=	auelrohir_runa
				AnimationMode		=	LOOP
				Distance            =   50
			End
		End
		AnimationState				=	MOVING 
			Flags					=	RANDOMSTART
			Animation				=	RUEomer_RUNA
				AnimationName		=	auelrohir_runa
				AnimationMode		=	LOOP
				Distance            =   30
			End
		End
		AnimationState				=	FIRING_OR_PREATTACK_A
			Animation           = ATKD
				AnimationName     = GUFaramirA_SPCA
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.149 1.149
			End
			Animation           = ATKSPCB
				AnimationName    = GUFaramirA_SPCB
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.149 1.149
			End
			
			Animation           = ATKA
				AnimationName    = auelrohir_atka
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.149 1.149
			End
			Animation           = ATKB
				AnimationName    = auelrohir_atkb
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.149 1.149
			End
			Animation           = ATKC
				AnimationName    = auelrohir_atkc
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.149 1.149
			End
			Animation           = ATKD
				AnimationName    = auelrohir_atkd
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.149 1.149
			End
			Animation           = ATKE
				AnimationName    = auelrohir_atke
				AnimationMode     = ONCE
				UseWeaponTiming		= Yes
				AnimationSpeedFactorRange = 1.149 1.149
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState        = ATTACKING
			Animation           = ALERT_1
				AnimationName     = GUFaramir_IDLA
				AnimationMode     = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState				=	RAISING_FLAG
				Animation           =	CHRA
					AnimationName   =	GUFaramir_CHRC
					AnimationMode   =	ONCE
				End
				Flags				=	RESTART_ANIM_WHEN_COMPLETE
		End	
		AnimationState				=	SELECTED
			Animation				=	ATNB
				AnimationName		=	GUFaramir_ATNE
				AnimationMode		=	LOOP
			End
			StateName = STATE_Selected
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle"	then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") return end
			EndScript
		End
		TransitionState = TRANS_Idle_to_Selected
			Animation = IDLF
				AnimationName		= GUFaramir_ANTD
				AnimationMode		= ONCE
			End		
		End
		TransitionState = TRANS_Selected_to_Idle
			Animation			= ATNE
				AnimationName	= GUFaramir_ATNF
				AnimationMode	= ONCE
			End		
		End
		AnimationState				=	EMOTION_CELEBRATING
				Animation           =	CHRA
					AnimationName   =	GUFaramir_CHRC
					AnimationMode   =	ONCE
				End
		End
		AnimationState				=	EMOTION_TAUNTING
				Animation           =	CHRB
					AnimationName   =	GUFaramir_TNTC
					AnimationMode   =	ONCE
				End
				Flags				=	RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState					= EMOTION_ALERT EMOTION_MORALE_HIGH
			Animation					= Taunting
				AnimationName			= GUFaramir_TNTC
				AnimationMode			= ONCE
			End
			Flags						= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState        = EMOTION_ALERT
			Animation           = ALERT_1
				AnimationName     = GUFaramir_IDLA
				AnimationMode     = ONCE
			End
			Flags               = RESTART_ANIM_WHEN_COMPLETE
		End
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_b
				AnimationName = GUFaramir_HITB
				AnimationMode = ONCE
			End
		End
	TransitionState = Trans_Idle_To_Sword
		Animation = Transition
			AnimationName = GUFaramir_SKL.GUFaramir_STHA
		    AnimationMode = ONCE
		End
    End
    TransitionState = Trans_Sword_To_Idle
		Animation = Transition
			AnimationName = GUFaramir_SKL.GUFaramir_STHB
		    AnimationMode = ONCE
		End
    End
	End
    #include "..\..\..\includes\StunDrawModuleSmall.inc"

  ; ***DESIGN parameters ***
  Side = Men
  EditorSorting = UNIT
	ThreatLevel = 1.0
  TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT

  WeaponSet
    Conditions = None
    Weapon = PRIMARY    ElrohirSword
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End

  ArmorSet
    Conditions      = None
    Armor           = HeroArmor
    DamageFX        = NormalDamageFX
  End
  BuildCost 		= ANGMAR_THRALL_MASTER_BUILDCOST
  BuildTime			= ANGMAR_THRALL_MASTER_BUILDTIME

  VisionRange = ANGMAR_RHUDAURSLING_VISION_RANGE
    	VisionSide = 35%
	VisionRear = 25%
  ShroudClearingRange = ANGMAR_RHUDAURSLING_SHROUD_RANGE ;;.;; SHROUD_CLEAR_STANDARD

  BountyValue       = ANGMAR_THRALL_MASTER_BOUNTY_VALUE
  DisplayName = OBJECT:Elrohir
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
  CrushRevengeWeapon = BasicInfantryCrushRevenge

  CommandSet = EmptyCommandSet
  CommandPoints = 0 ;;,;; 40


	; *** AUDIO Parameters ***;

	VoiceAttack				= ElrohirVoiceAttack
	VoiceAttackAir				= ElrohirVoiceAttack
	VoiceAttackCharge			= ElrohirVoiceAttackCharge
	VoiceAttackMachine		= ElrohirVoiceAttack
	VoiceAttackStructure		= ElrohirVoiceAttackBuilding
	VoiceMove				= ElrohirVoiceMove
	VoiceMoveToCamp			= ElrohirVoiceMoveCamp
	VoiceMoveWhileAttacking		= ElrohirVoiceDisengage
	VoicePriority			= 82
	VoiceRetreatToCastle		= ElrohirVoiceRetreat
	VoiceSelect				= ElrohirVoiceSelectMS
	VoiceSelectBattle 		= ElrohirVoiceSelectBattle
	VoiceGuard				= ElrohirVoiceMove
	VoiceFear 				= ElrohirVoiceHelpMe
	SoundImpact				= ImpactHorse
	UnitSpecificSounds
		VoiceGarrison		= ElrohirVoiceGarrison
		VoiceEnterUnitElvenTransportShip	= ElrohirVoiceMove
		VoiceInitiateCaptureBuilding		= ElrohirVoiceMove
		VoiceMoveToTrees	= ElrohirVoiceMove				
	End
	
	CrowdResponseKey = ElfHero
   #include "..\..\..\includes\StandardUnitEvaEvents.inc"

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key = Humanoid_Male Elf_Male Unit Infantry Hero
	End
	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:FootstepDirtA		Animation:GUFaramir_SKL.auelrohir_runa		Frames:11 21
		AnimationSound = Sound:FootstepDirtA		Animation:GUFaramir_SKL.GUFaramir_RUNB		Frames:2 12
		AnimationSound = Sound:WeaponSwitchBow		Animation:GUFaramir_SKL.GUFaramir_ATKC		Frames:18
		AnimationSound = Sound:SwordShingClean1		Animation:GUFaramir_SKL.GUFaramir_STHA		Frames:21
		AnimationSound = Sound:SwordIntoScabbard1		Animation:GUFaramir_SKL.GUFaramir_STHB		Frames:11
		AnimationSound = Sound:WeaponSwitchBow		Animation:GUFaramir_SKL.GUFaramir_STHB		Frames:28
		AnimationSound = Sound:SwordIntoScabbard1		Animation:GUFaramir_SKL.GUFaramir_STHC		Frames:2
		AnimationSound = Sound:WeaponSwitchBow		Animation:GUFaramir_SKL.GUFaramir_STHC		Frames:3
		AnimationSound = Sound:SwordShingClean1		Animation:GUFaramir_SKL.GUFaramir_STHD		Frames:6
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:GUFaramir_SKL.GUFaramir_DIEA		Frames:88
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:GUFaramir_SKL.GUFaramir_DIEB		Frames:85
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:GUFaramir_SKL.GUFaramir_DIEC		Frames:49
		AnimationSound = Sound:BodyFallSoldier		Animation:GUFaramir_SKL.GUFaramir_LNDA		Frames:3
		AnimationSound = Sound:BodyFallSoldier		Animation:GUFaramir_SKL.GUFaramir_LNDB		Frames:2
		AnimationSound = Sound:HorseMoveFootsteps		Animation:RUHHs_Theo_SKL.RUHHs_Theo_ACCL		Frames:14 32
		AnimationSound = Sound:HorseMoveFootsteps		Animation:RUHHs_Theo_SKL.RUHHs_Theo_RUNA		Frames:0
		AnimationSound = Sound:HorseMoveFootsteps		Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNL1		Frames:0
		AnimationSound = Sound:HorseMoveFootsteps		Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNR1		Frames:0
		AnimationSound = Sound:HorseWhinny50Percent	Animation:RUHHs_Theo_SKL.RUHHs_Theo_IDLC		Frames:0
		AnimationSound = Sound:HorseDieForHero		Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA		Frames:0
		AnimationSound = Sound:BodyFallSoldier		Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA		Frames:1 9
		AnimationSound = Sound:HorseDieForHero		Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA		Frames:0
		AnimationSound = Sound:BodyFallGenericNoArmor	Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA		Frames:4
		AnimationSound = Sound:BodyFallSoldier		Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA		Frames:42
	End

  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD INFANTRY SELECTABLE CAN_CAST_REFLECTIONS PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT BANNER  ; GRAB_AND_DROP INFANTRY Can't have this as I'll appear in the infantry bone of the mumak - Vengeful
  CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_MEDIUM

  Body = ActiveBody ModuleTag_02
    MaxHealth         = 1000
    MaxHealthDamaged  = 250
	BurningDeathBehavior = Yes
	BurningDeathFX       = FX_InfantryBurningFlame
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = No
    MoodAttackCheckRate        = 500
    HoldGroundCloseRangeDistance = 40
    AttackPriority				= 	AttackPriority_Infantry
    AILuaEventsList				=	MordorInfantryBannerFunctions
	BurningDeathTime			=	BURNINGDEATH_DURATION_INFANTRY
  End

;;.;; Added
    Behavior = AutoHealBehavior ModuleTag_ThrallMasterHealing
        StartsActive = No
        TriggeredBy = Upgrade_ObjectLevel2
        HealingAmount = 10
        HealingDelay = 1000
        StartHealingDelay = 10000
        HealOnlyIfNotInCombat = Yes
    End
;;.;;

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	350		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf					=	AOTR_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf				=	EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
		PointAt						=	EMOTION_POINTAT_OBJECTFILTER

		HeroScanDistance			=	150
		FearScanDistance			=	250

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=   BraceForBeingCrushed_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End

  	LocomotorSet
    		Locomotor = HumanLocomotor
    		Condition = SET_NORMAL
    		Speed     = NORMAL_FOOT_FAST_MEMBER_SPEED
  	End

	LocomotorSet
		Locomotor = BurningDeathLocomotorInfantry
		Condition = SET_BURNINGDEATH
		Speed	  = BURNINGDEATH_WANDERSPEED_INFANTRY
	End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
	ShockStunnedTimeLow		= 1400	;msec
	ShockStunnedTimeHigh	= 2400	;msec
	ShockStandingTime		= 2133	;msec
  End

	#include "..\..\..\includes\CaptureBuilding.inc"

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK -FADED
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
    Sound = INITIAL ElrohirVoiceDie				;MordorBannerOrcVoiceDie
  End
  

  Behavior = SlowDeathBehavior ModuleTag_FadeDeath
    DeathTypes = ALL -FADED
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
	Sound = INITIAL SpellGenericUnsummonFasterMS
 End

  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 2000
    SinkRate = 0.70     ; in Dist/Sec
    DestructionDelay = 10000
    Sound = INITIAL ElrohirVoiceDie				;MordorBannerOrcVoiceDie
  End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End
	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 10000							; spawn a new member every n seconds when idle (in miliseconds)
		MeleeFreeUnitSpawnTime		= 20000							; n miliseconds units must not have been fighting to be able to spawn units when idle (in miliseconds)
		DiedRespawnTime			= 10000							; how much time must pass after Banner Carrier dies before horde can spawn another
		MeleeFreeBannerReSpawnTime	= 20000							; how much time since horde has been fighting before a new Banner Carrier can be respawned

		BannerMorphFX		= FX_BannerCarrierMorph					; name of particle FX to use when the BannerCarrier morphs into the dest unit type
		UnitSpawnFX			= FX_BannerCarrierSpawnUnit				; name of particle FX to use when the BannerCarrier spawns a new unit
	End

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19;
  ShadowSizeY = 19;
  ShadowTexture = ShadowI;
End